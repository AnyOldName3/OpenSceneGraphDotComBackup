<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;James,&lt;br&gt;&lt;br&gt;&lt;/div&gt;Sorry&nbsp;to&nbsp;hear&nbsp;there&nbsp;is&nbsp;a&nbsp;regression. &nbsp;I&#39;ve&nbsp;looked&nbsp;at&nbsp;your&nbsp;explanation&nbsp;and&nbsp;the&nbsp;code&nbsp;you&nbsp;linked&nbsp;to,&nbsp;and&nbsp;the&nbsp;relevant&nbsp;osg::StateSet::set*()&nbsp;methods&nbsp;and&nbsp;can&#39;t&nbsp;spot&nbsp;anything&nbsp;obvious&nbsp;wrong.&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;One&nbsp;debug&nbsp;test&nbsp;would&nbsp;be&nbsp;to&nbsp;write&nbsp;out&nbsp;the&nbsp;subgraph&nbsp;that&nbsp;the&nbsp;CanvasImage&nbsp;class&nbsp;creates&nbsp;to&nbsp;a&nbsp;.osgt&nbsp;file&nbsp;and&nbsp;then&nbsp;have&nbsp;a&nbsp;look&nbsp;at&nbsp;the&nbsp;results&nbsp;to&nbsp;see&nbsp;if&nbsp;it&nbsp;makes&nbsp;sense. &nbsp;You&nbsp;could&nbsp;compare&nbsp;the&nbsp;subgraph&nbsp;generated&nbsp;by&nbsp;the&nbsp;OSG&nbsp;before&nbsp;OSG_PROVIDE_READFILE&nbsp;change. &nbsp;If&nbsp;there&nbsp;are&nbsp;differences&nbsp;then&nbsp;it&nbsp;points&nbsp;to&nbsp;an&nbsp;issue&nbsp;with&nbsp;one&nbsp;of&nbsp;set&nbsp;methods,&nbsp;and&nbsp;potentially&nbsp;even&nbsp;the&nbsp;exact&nbsp;method&nbsp;that&nbsp;is&nbsp;a&nbsp;problem.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Robert.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;26&nbsp;March&nbsp;2016&nbsp;at&nbsp;11:24,&nbsp;James&nbsp;Turner&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:zakalawe@mac.com&quot;&nbsp;target=&quot;_blank&quot;&gt;zakalawe@mac.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hello,&lt;br&gt;<br>
&lt;br&gt;<br>
I’m&nbsp;seeing&nbsp;a&nbsp;bug&nbsp;with&nbsp;both&nbsp;master&nbsp;(c202e4c37276e56caf650684b92a2d83f5dd5a74)&nbsp;and&nbsp;the&nbsp;tip&nbsp;of&nbsp;the&nbsp;3.4.0&nbsp;branch&nbsp;(f33c58b2f1899b1328b25956ae49e97e6b85097b),&nbsp;where&nbsp;a&nbsp;particular&nbsp;textured&nbsp;quad&nbsp;fails&nbsp;to&nbsp;display&nbsp;its&nbsp;texture&nbsp;since&nbsp;the&nbsp;OSG_PROVIDE_READFILE&nbsp;change&nbsp;was&nbsp;made.&lt;br&gt;<br>
&lt;br&gt;<br>
I’ve&nbsp;done&nbsp;a&nbsp;history&nbsp;bisect&nbsp;to&nbsp;prove&nbsp;to&nbsp;my&nbsp;satisfaction&nbsp;that&nbsp;this&nbsp;change&nbsp;caused&nbsp;the&nbsp;problem,&nbsp;and&nbsp;I&nbsp;see&nbsp;there’s&nbsp;been&nbsp;a&nbsp;couple&nbsp;of&nbsp;follow&nbsp;up&nbsp;fixes:&nbsp;especially&nbsp;the&nbsp;fix&nbsp;in&nbsp;commit&nbsp;b07cbc2ca8bbb13fa568eb11623aa6fe22479183&nbsp;from&nbsp;Jannik&nbsp;Heller&nbsp;about&nbsp;StateSet&nbsp;setAttributeAndModes.&lt;br&gt;<br>
&lt;br&gt;<br>
However&nbsp;even&nbsp;with&nbsp;those&nbsp;fixes&nbsp;applied,&nbsp;I’m&nbsp;still&nbsp;see&nbsp;a&nbsp;white&nbsp;rectangle&nbsp;where&nbsp;previously&nbsp;there&nbsp;was&nbsp;a&nbsp;textured&nbsp;rectangle.&nbsp;I’ve&nbsp;verified&nbsp;the&nbsp;osg::Image&nbsp;is&nbsp;loaded&nbsp;correctly,&nbsp;and&nbsp;adjusted&nbsp;my&nbsp;code&nbsp;to&nbsp;use&nbsp;ref-ptrs&nbsp;/&nbsp;osgDB::readRefImageFile&nbsp;in&nbsp;case&nbsp;this&nbsp;made&nbsp;any&nbsp;difference,&nbsp;but&nbsp;nothing&nbsp;has&nbsp;helped&nbsp;so&nbsp;far.&nbsp;The&nbsp;issue&nbsp;is&nbsp;reproducible&nbsp;on&nbsp;at&nbsp;least&nbsp;Windows,&nbsp;Mac&nbsp;and&nbsp;Linux.&lt;br&gt;<br>
&lt;br&gt;<br>
I’ve&nbsp;also&nbsp;reviewed&nbsp;the&nbsp;large&nbsp;OSG_PROVIDE_READFILE&nbsp;change,&nbsp;and&nbsp;I&nbsp;don’t&nbsp;see&nbsp;any&nbsp;functional&nbsp;changes,&nbsp;especially&nbsp;since&nbsp;I’m&nbsp;using&nbsp;the&nbsp;default&nbsp;value&nbsp;of&nbsp;OSG_PROVIDE_READFILE.&lt;br&gt;<br>
&lt;br&gt;<br>
My&nbsp;guess&nbsp;is&nbsp;one&nbsp;of&nbsp;the&nbsp;templates&nbsp;added,&nbsp;is&nbsp;causing&nbsp;some&nbsp;alternative&nbsp;code&nbsp;path&nbsp;to&nbsp;be&nbsp;taken&nbsp;that’s&nbsp;upsetting&nbsp;something&nbsp;in&nbsp;the&nbsp;image&nbsp;-&gt;&nbsp;texture&nbsp;-&gt;&nbsp;stateset&nbsp;logic.&lt;br&gt;<br>
&lt;br&gt;<br>
Any&nbsp;debugging&nbsp;/&nbsp;investigation&nbsp;suggestions&nbsp;to&nbsp;figure&nbsp;this&nbsp;out&nbsp;would&nbsp;be&nbsp;most&nbsp;appreciated.&nbsp;Unfortunately&nbsp;I&nbsp;don’t&nbsp;have&nbsp;a&nbsp;minimal&nbsp;test&nbsp;case,&nbsp;the&nbsp;code&nbsp;is&nbsp;deeply&nbsp;embedded&nbsp;inside&nbsp;FlightGear’s&nbsp;support&nbsp;library,&nbsp;SimGear.&nbsp;You&nbsp;can&nbsp;see&nbsp;what&nbsp;I&nbsp;guess&nbsp;are&nbsp;the&nbsp;most&nbsp;relevant&nbsp;part&nbsp;here:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://sourceforge.net/p/flightgear/simgear/ci/next/tree/simgear/canvas/elements/CanvasImage.cxx#l112&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://sourceforge.net/p/flightgear/simgear/ci/next/tree/simgear/canvas/elements/CanvasImage.cxx#l112&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://sourceforge.net/p/flightgear/simgear/ci/next/tree/simgear/canvas/elements/CanvasImage.cxx#l466&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://sourceforge.net/p/flightgear/simgear/ci/next/tree/simgear/canvas/elements/CanvasImage.cxx#l466&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Nothing&nbsp;in&nbsp;this&nbsp;file&nbsp;has&nbsp;changed&nbsp;in&nbsp;nearly&nbsp;a&nbsp;year,&nbsp;and&nbsp;works&nbsp;fine&nbsp;with&nbsp;OSG&nbsp;3.2&nbsp;/&nbsp;prior&nbsp;to&nbsp;the&nbsp;problem&nbsp;commit&nbsp;on&nbsp;the&nbsp;on&nbsp;3.4.0&nbsp;branch.&lt;br&gt;<br>
&lt;br&gt;<br>
Any&nbsp;help&nbsp;or&nbsp;debugging&nbsp;suggestions&nbsp;gratefully&nbsp;received!&lt;br&gt;<br>
&lt;br&gt;<br>
Kind&nbsp;regards,&lt;br&gt;<br>
James&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
