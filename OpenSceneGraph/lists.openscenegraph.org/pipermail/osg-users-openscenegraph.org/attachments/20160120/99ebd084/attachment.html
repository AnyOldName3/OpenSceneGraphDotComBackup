<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;Paul, &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;I&nbsp;guess&nbsp;you&nbsp;have&nbsp;one&nbsp;channel&nbsp;float&nbsp;data. &lt;/span&gt;Certainly&nbsp;this&nbsp;is&nbsp;wrong:&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;rImage-&gt;setImage(&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;rawImage.rows(),&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;rawImage.cols(),&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;arrayDepth,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;GL_LUMINANCE, &lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;GL_RGB32F_ARB, &lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;GL_FLOAT,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;pData, &lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;osg::Image::NO_DELETE &lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;);&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;At&nbsp;least&nbsp;GL_RGB32F_ARB&nbsp;should&nbsp;be&nbsp;swapped&nbsp;with&nbsp;GL_LUMINANCE.&nbsp;First&nbsp;you&nbsp;pass&nbsp;internal&nbsp;format&nbsp;for&nbsp;GPU&nbsp;storage&nbsp;then&nbsp;you&nbsp;pass&nbsp;pixel&nbsp;format&nbsp;in&nbsp;which&nbsp;image&nbsp;is&nbsp;stored&nbsp;in&nbsp;CPU&nbsp;mem. &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;If&nbsp;texture&nbsp;is&nbsp;one&nbsp;channel&nbsp;float&nbsp;luminance&nbsp;I&nbsp;suppose&nbsp;you&nbsp;should&nbsp;just&nbsp;use&nbsp;with&nbsp;GL_LUMINANCE&nbsp;as&nbsp;internal&nbsp;format&nbsp;too&nbsp;(instead&nbsp;of&nbsp;GL_RGB32F).&nbsp;You&nbsp;later&nbsp;force&nbsp;GL_LUMINANCE32F&nbsp;when&nbsp;texture&nbsp;is&nbsp;created&nbsp;anyway,&nbsp;so&nbsp;both&nbsp;should&nbsp;work&nbsp;imho.&nbsp;But&nbsp;passing&nbsp;GL_RGB32F_ARB&nbsp;as&nbsp;pixel&nbsp;format&nbsp;probably&nbsp;causes&nbsp;that&nbsp;texture&nbsp;is&nbsp;not&nbsp;created&nbsp;correctly&nbsp;(if&nbsp;created&nbsp;at&nbsp;all).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;Cheers,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;Wojtek&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2016-01-20&nbsp;21:34&nbsp;GMT+01:00&nbsp;Paul&nbsp;Leopard&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:paul.leopard@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;paul.leopard@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
I&#39;ve&nbsp;been&nbsp;trying&nbsp;to&nbsp;map&nbsp;a&nbsp;32&nbsp;bit&nbsp;float&nbsp;texture&nbsp;onto&nbsp;a&nbsp;quad&nbsp;for&nbsp;a&nbsp;while&nbsp;without&nbsp;success.&nbsp;Below&nbsp;is&nbsp;my&nbsp;code,&nbsp;can&nbsp;anyone&nbsp;tell&nbsp;me&nbsp;what&nbsp;I&nbsp;am&nbsp;doing&nbsp;wrong?&nbsp;This&nbsp;code&nbsp;opens&nbsp;a&nbsp;float32&nbsp;image&nbsp;file,&nbsp;reads&nbsp;it&nbsp;into&nbsp;an&nbsp;array,&nbsp;creates&nbsp;an&nbsp;osg::Image&nbsp;with&nbsp;the&nbsp;array&nbsp;data,&nbsp;creates&nbsp;an&nbsp;osg::Texture2D&nbsp;with&nbsp;the&nbsp;image,&nbsp;then&nbsp;maps&nbsp;that&nbsp;texture&nbsp;onto&nbsp;a&nbsp;quad.&lt;br&gt;<br>
&lt;br&gt;<br>
Thank&nbsp;you!&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
Paul&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Code:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
#include&nbsp;&quot;sgp_core/TArrayAlgo.h&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
#include&nbsp;&lt;osgViewer/Viewer&gt;&lt;br&gt;<br>
#include&nbsp;&lt;osg/Texture2D&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
#include&nbsp;&lt;string&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
//&nbsp;Imply&nbsp;namespaces&lt;br&gt;<br>
&lt;br&gt;<br>
using&nbsp;namespace&nbsp;sgp_core;&lt;br&gt;<br>
using&nbsp;namespace&nbsp;std;&lt;br&gt;<br>
&lt;br&gt;<br>
//&nbsp;Scene&nbsp;graph&nbsp;root&nbsp;and&nbsp;HUD&lt;br&gt;<br>
osg::ref_ptr&lt;osg::Group&gt;&nbsp;SceneGraph&nbsp;=&nbsp;new&nbsp;osg::Group();&lt;br&gt;<br>
&lt;br&gt;<br>
/**&lt;br&gt;<br>
*&nbsp;Create&nbsp;an&nbsp;OSG&nbsp;Image&nbsp;given&nbsp;a&nbsp;float&nbsp;data&nbsp;array&lt;br&gt;<br>
*/&lt;br&gt;<br>
osg::ref_ptr&lt;osg::Image&gt;&nbsp;CreateImage(&nbsp;TScalarArray&lt;float&gt;&amp;&nbsp;rawImage&nbsp;)&lt;br&gt;<br>
{&lt;br&gt;<br>
osg::ref_ptr&lt;osg::Image&gt;&nbsp;rImage&nbsp;=&nbsp;new&nbsp;osg::Image();&lt;br&gt;<br>
unsigned&nbsp;char*&nbsp;pData&nbsp;=&nbsp;reinterpret_cast&lt;unsigned&nbsp;char*&gt;(&nbsp;rawImage.c_data()&nbsp;);&lt;br&gt;<br>
&lt;br&gt;<br>
size_t&nbsp;arrayDepth&nbsp;=&nbsp;1;&lt;br&gt;<br>
&lt;br&gt;<br>
rImage-&gt;setImage(&lt;br&gt;<br>
rawImage.rows(),&lt;br&gt;<br>
rawImage.cols(),&lt;br&gt;<br>
arrayDepth,&lt;br&gt;<br>
GL_LUMINANCE,&lt;br&gt;<br>
GL_RGB32F_ARB,&lt;br&gt;<br>
GL_FLOAT,&lt;br&gt;<br>
pData,&lt;br&gt;<br>
osg::Image::NO_DELETE&lt;br&gt;<br>
);&lt;br&gt;<br>
&lt;br&gt;<br>
return&nbsp;rImage;&lt;br&gt;<br>
&lt;br&gt;<br>
}&nbsp;//&nbsp;end&nbsp;CreateImage()&nbsp;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&lt;br&gt;<br>
&lt;br&gt;<br>
/**&lt;br&gt;<br>
*&nbsp;Create&nbsp;a&nbsp;unit&nbsp;textured&nbsp;quad&nbsp;(Geometry)&nbsp;given&nbsp;it&#39;s&nbsp;position,&nbsp;size,&nbsp;and&nbsp;an&nbsp;image&lt;br&gt;<br>
*/&lt;br&gt;<br>
osg::ref_ptr&lt;osg::Geometry&gt;&nbsp;CreateTexturedQuad(&nbsp;osg::Image*&nbsp;pImage&nbsp;)&lt;br&gt;<br>
{&lt;br&gt;<br>
float&nbsp;xDim&nbsp;=&nbsp;pImage-&gt;t();&lt;br&gt;<br>
float&nbsp;yDim&nbsp;=&nbsp;pImage-&gt;s();&lt;br&gt;<br>
&lt;br&gt;<br>
float32&nbsp;xLrc&nbsp;=&nbsp;-xDim*0.5f;&lt;br&gt;<br>
float32&nbsp;yLrc&nbsp;=&nbsp;-yDim*0.5f;&lt;br&gt;<br>
float32&nbsp;zLrc&nbsp;=&nbsp;0;&lt;br&gt;<br>
osg::ref_ptr&lt;osg::Geometry&gt;&nbsp;rQuad&nbsp;=&lt;br&gt;<br>
osg::createTexturedQuadGeometry(&lt;br&gt;<br>
osg::Vec3(&nbsp;xLrc,&nbsp;yLrc,&nbsp;zLrc&nbsp;),&lt;br&gt;<br>
osg::Vec3(&nbsp;xDim,&nbsp;0.0f,&nbsp;0.0f&nbsp;),&lt;br&gt;<br>
osg::Vec3(&nbsp;0.0f,&nbsp;yDim,&nbsp;0.0f&nbsp;)&lt;br&gt;<br>
);&lt;br&gt;<br>
&lt;br&gt;<br>
osg::Texture2D*&nbsp;pTex&nbsp;=&nbsp;new&nbsp;osg::Texture2D();&lt;br&gt;<br>
pTex-&gt;setInternalFormat(&nbsp;GL_LUMINANCE32F_ARB&nbsp;);&lt;br&gt;<br>
pTex-&gt;setFilter(&nbsp;osg::Texture::MIN_FILTER,&nbsp;osg::Texture::LINEAR&nbsp;);&lt;br&gt;<br>
pTex-&gt;setFilter(&nbsp;osg::Texture::MAG_FILTER,&nbsp;osg::Texture::LINEAR&nbsp;);&lt;br&gt;<br>
pTex-&gt;setWrap(&nbsp;osg::Texture::WRAP_S,&nbsp;osg::Texture::CLAMP_TO_EDGE&nbsp;);&lt;br&gt;<br>
pTex-&gt;setWrap(&nbsp;osg::Texture::WRAP_T,&nbsp;osg::Texture::CLAMP_TO_EDGE&nbsp;);&lt;br&gt;<br>
pTex-&gt;setImage(&nbsp;pImage&nbsp;);&lt;br&gt;<br>
&lt;br&gt;<br>
osg::StateSet*&nbsp;pSS&nbsp;=&nbsp;rQuad-&gt;getOrCreateStateSet();&lt;br&gt;<br>
pSS-&gt;setTextureAttributeAndModes(&nbsp;0,&nbsp;pTex&nbsp;);&lt;br&gt;<br>
&lt;br&gt;<br>
return&nbsp;rQuad;&lt;br&gt;<br>
}&nbsp;//&nbsp;CreateTexturedQuad()&nbsp;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&lt;br&gt;<br>
&lt;br&gt;<br>
//&nbsp;________________________________________________________________________________________________&lt;br&gt;<br>
//&nbsp;Main&nbsp;program&lt;br&gt;<br>
&lt;br&gt;<br>
int&nbsp;main(&nbsp;int&nbsp;argc,&nbsp;const&nbsp;char**&nbsp;pArgv&nbsp;)&lt;br&gt;<br>
{&lt;br&gt;<br>
//&nbsp;Parse&nbsp;parameters&lt;br&gt;<br>
osg::ArgumentParser&nbsp;arguments(&nbsp;&amp;argc,const_cast&lt;char**&gt;(&nbsp;pArgv&nbsp;)&nbsp;);&lt;br&gt;<br>
string&nbsp;description(&quot;Scratch&nbsp;Program&nbsp;for&nbsp;Apache&nbsp;DFT&nbsp;Task&quot;);&lt;br&gt;<br>
&lt;br&gt;<br>
try&lt;br&gt;<br>
{&lt;br&gt;<br>
//&nbsp;Create&nbsp;image&nbsp;array&nbsp;and&nbsp;load&nbsp;image&nbsp;data&nbsp;from&nbsp;disk&lt;br&gt;<br>
string&nbsp;imageFileName(&nbsp;&quot;512x432_FLIR.float&quot;&nbsp;);&lt;br&gt;<br>
TScalarArray&lt;float&gt;&nbsp;rawImage;&lt;br&gt;<br>
readFrom(&nbsp;rawImage,&nbsp;imageFileName&nbsp;);&lt;br&gt;<br>
cout&nbsp;&lt;&lt;&nbsp;&quot;IMAGE&nbsp;:&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;imageFileName&nbsp;&lt;&lt;&nbsp;endl;&lt;br&gt;<br>
cout&nbsp;&lt;&lt;&nbsp;&quot;SIZE&nbsp;:&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;rawImage.rows()&nbsp;&lt;&lt;&nbsp;&quot;x&quot;&nbsp;&lt;&lt;&nbsp;rawImage.cols()&nbsp;&lt;&lt;&nbsp;endl;&lt;br&gt;<br>
&lt;br&gt;<br>
//&nbsp;Create&nbsp;OSG&nbsp;image&nbsp;with&nbsp;the&nbsp;raw&nbsp;data&lt;br&gt;<br>
osg::ref_ptr&lt;osg::Image&gt;&nbsp;rImage&nbsp;=&nbsp;CreateImage(&nbsp;rawImage&nbsp;);&lt;br&gt;<br>
&lt;br&gt;<br>
//&nbsp;Create&nbsp;a&nbsp;quad&nbsp;and&nbsp;map&nbsp;the&nbsp;image&nbsp;as&nbsp;a&nbsp;texture&nbsp;on&nbsp;it&lt;br&gt;<br>
osg::ref_ptr&lt;osg::Geometry&gt;&nbsp;rGeom&nbsp;=&nbsp;CreateTexturedQuad(&nbsp;rImage&nbsp;);&lt;br&gt;<br>
&lt;br&gt;<br>
osg::ref_ptr&lt;osg::Geode&gt;&nbsp;rQuadGeode&nbsp;=&nbsp;new&nbsp;osg::Geode();&lt;br&gt;<br>
rQuadGeode-&gt;addDrawable(&nbsp;rGeom&nbsp;);&lt;br&gt;<br>
&lt;br&gt;<br>
SceneGraph-&gt;addChild(&nbsp;rQuadGeode&nbsp;);&lt;br&gt;<br>
}&lt;br&gt;<br>
catch(&nbsp;Exception&amp;&nbsp;e&nbsp;)&lt;br&gt;<br>
{&lt;br&gt;<br>
cerr&nbsp;&lt;&lt;&nbsp;&quot;ERROR:&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;e.what()&nbsp;&lt;&lt;&nbsp;endl;&lt;br&gt;<br>
return&nbsp;1;&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
//&nbsp;Setup&nbsp;viewer&lt;br&gt;<br>
osgViewer::Viewer&nbsp;viewer(arguments);&lt;br&gt;<br>
viewer.setSceneData(&nbsp;SceneGraph.get()&nbsp;);&lt;br&gt;<br>
&lt;br&gt;<br>
return&nbsp;viewer.run();&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
//&nbsp;EOF&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------&lt;br&gt;<br>
things&nbsp;are&nbsp;more&nbsp;like&nbsp;they&nbsp;are&nbsp;now&nbsp;than&nbsp;they&nbsp;have&nbsp;ever&nbsp;been&nbsp;before&lt;br&gt;<br>
&lt;br&gt;<br>
------------------&lt;br&gt;<br>
Read&nbsp;this&nbsp;topic&nbsp;online&nbsp;here:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://forum.openscenegraph.org/viewtopic.php?p=66064#66064&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://forum.openscenegraph.org/viewtopic.php?p=66064#66064&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
