<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Robert,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;using&nbsp;code&nbsp;extracted&nbsp;from&nbsp;the&nbsp;osgscreencapture&nbsp;example&nbsp;to&nbsp;generate&nbsp;small&nbsp;thumbnails&nbsp;of&nbsp;loaded&nbsp;shapes.&lt;/div&gt;&lt;div&gt;It&nbsp;all&nbsp;work&nbsp;is&nbsp;very&nbsp;nicely&nbsp;except&nbsp;that&nbsp;it&nbsp;is&nbsp;leaking&nbsp;memory&nbsp;on&nbsp;each&nbsp;usage. &nbsp;I&nbsp;have&nbsp;commented&nbsp;out&nbsp;our&nbsp;code&nbsp;and&nbsp;based&nbsp;on&nbsp;that&nbsp;and&nbsp;a&nbsp;few&nbsp;other&nbsp;tests&nbsp;I&nbsp;am&nbsp;fairly&nbsp;convinced&nbsp;that&nbsp;the&nbsp;leak&nbsp;is&nbsp;the&nbsp;pixel&nbsp;buffer&nbsp;(GraphicsContext)&nbsp;itself.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;prettyprint&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(250,&nbsp;250,&nbsp;250);&nbsp;border-color:&nbsp;rgb(187,&nbsp;187,&nbsp;187);&nbsp;border-style:&nbsp;solid;&nbsp;border-width:&nbsp;1px;&nbsp;overflow-wrap:&nbsp;break-word;&quot;&gt;&lt;code&nbsp;class=&quot;prettyprint&quot;&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#000;&quot;&nbsp;class=&quot;styled-by-prettify&quot;&gt;osg&lt;/span&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#660;&quot;&nbsp;class=&quot;styled-by-prettify&quot;&gt;::&lt;/span&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#000;&quot;&nbsp;class=&quot;styled-by-prettify&quot;&gt;ref_ptr&lt;/span&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#660;&quot;&nbsp;class=&quot;styled-by-prettify&quot;&gt;&lt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#000;&quot;&nbsp;class=&quot;styled-by-prettify&quot;&gt;osg&lt;/span&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#660;&quot;&nbsp;class=&quot;styled-by-prettify&quot;&gt;::&lt;/span&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#606;&quot;&nbsp;class=&quot;styled-by-prettify&quot;&gt;GraphicsContext&lt;/span&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#660;&quot;&nbsp;class=&quot;styled-by-prettify&quot;&gt;&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/code&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;createPixelBuffer(int&nbsp;aSize,&nbsp;int&nbsp;aNumSamples)&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;osg::ref_ptr&lt;osg::GraphicsContext::Traits&gt;&nbsp;traits&nbsp;=&nbsp;new&nbsp;osg::GraphicsContext::Traits;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;x &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;y &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;width &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;aSize;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;height &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&nbsp;aSize;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;red &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;8;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;green &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;8;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;blue &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&nbsp;8;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;alpha &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;8;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;windowDecoration &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&nbsp;false;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;pbuffer &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;true;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;doubleBuffer &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&nbsp;true;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;sharedContext &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;readDISPLAY();&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;traits-&gt;setUndefinedScreenDetailsToDefaultScreen();&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;if&nbsp;(aNumSamples&nbsp;!=&nbsp;0)&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;{&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;traits-&gt;sampleBuffers&nbsp;=&nbsp;1;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;traits-&gt;samples &nbsp; &nbsp; &nbsp; =&nbsp;aNumSamples;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;return&nbsp;osg::GraphicsContext::createGraphicsContext(traits.get());&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;}&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;bool&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;generateThumbnail(const&nbsp;std::string&nbsp;&amp;&nbsp;aFilePath,&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const&nbsp;std::string&nbsp;&amp;&nbsp;aThumbnailPath,&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const&nbsp;std::string&nbsp;&amp;&nbsp;aResourcesPath,&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;int &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; aSize,&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bool &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;aTopDownView)&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;auto&nbsp;pixelBuffer&nbsp;=&nbsp;createPixelBuffer(aSize,&nbsp;8);&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;if&nbsp;(!pixelBuffer)&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;{&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;pixelBuffer&nbsp;=&nbsp;createPixelBuffer(aSize,&nbsp;0);&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;// &nbsp; &nbsp;const&nbsp;auto&nbsp;shape&nbsp;=&nbsp;loadShapeOrError(aFilePath);&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;osg::ref_ptr&lt;osgViewer::Viewer&gt;&nbsp;viewer&nbsp;=&nbsp;new&nbsp;osgViewer::Viewer;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;auto &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;camera&nbsp;=&nbsp;viewer-&gt;getCamera();&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;camera-&gt;setGraphicsContext(pixelBuffer.get());&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;camera-&gt;setViewport(new&nbsp;osg::Viewport(0,&nbsp;0,&nbsp;aSize,&nbsp;aSize));&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;camera-&gt;setDrawBuffer(GL_BACK);&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;camera-&gt;setReadBuffer(GL_BACK);&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;// &nbsp; &nbsp;setupShapeViewer(viewer,&nbsp;shape.get(),&nbsp;aResourcesPath,&nbsp;aTopDownView);&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;// &nbsp; &nbsp;osg::ref_ptr&lt;ImageGrabber&gt;&nbsp;grabber&nbsp;=&nbsp;new&nbsp;ImageGrabber(aThumbnailPath);&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;// &nbsp; &nbsp;viewer.getCamera()-&gt;setPostDrawCallback(grabber.get());&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;viewer-&gt;realize();&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;viewer-&gt;frame();&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt; &nbsp; &nbsp;return&nbsp;true;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;subprettyprint&quot;&gt;&lt;font&nbsp;color=&quot;#666600&quot;&nbsp;face=&quot;monospace&quot;&gt;};&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;If&nbsp;I&nbsp;call&nbsp;the&nbsp;above&nbsp;code&nbsp;repeatedly&nbsp;then&nbsp;it&nbsp;leaks&nbsp;and&nbsp;I&nbsp;cannot&nbsp;understand&nbsp;why&nbsp;since&nbsp;everything&nbsp;is&nbsp;in&nbsp;osg:ref_ptr&lt;&gt;. &lt;/div&gt;&lt;div&gt;The&nbsp;Viewer&nbsp;was&nbsp;a&nbsp;concrete&nbsp;instance&nbsp;originally&nbsp;but&nbsp;that&nbsp;makes&nbsp;no&nbsp;difference.&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;also&nbsp;tried&nbsp;using&nbsp;a&nbsp;slave&nbsp;camera&nbsp;as&nbsp;in&nbsp;the&nbsp;original&nbsp;example.&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;nasty&nbsp;workaround&nbsp;of&nbsp;extracting&nbsp;a&nbsp;shared&nbsp;pixel&nbsp;buffer&nbsp;and&nbsp;re-using&nbsp;it&nbsp;-&nbsp;but&nbsp;ideally&nbsp;this&nbsp;code&nbsp;would&nbsp;be&nbsp;called&nbsp;using&nbsp;std::async,&nbsp;to&nbsp;have&nbsp;multiple&nbsp;thumbnails&nbsp;generated&nbsp;in&nbsp;parallel,&nbsp;so&nbsp;that&nbsp;is&nbsp;going&nbsp;to&nbsp;be&nbsp;tricky.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Kinda&nbsp;hoping&nbsp;you&nbsp;can&nbsp;point&nbsp;to&nbsp;my&nbsp;stupid&nbsp;mistake&nbsp;in&nbsp;how&nbsp;I&nbsp;am&nbsp;using&nbsp;osg&nbsp;;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Brian&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
<br>
&lt;p&gt;&lt;/p&gt;<br>
<br>
--&nbsp;&lt;br&nbsp;/&gt;<br>
You&nbsp;received&nbsp;this&nbsp;message&nbsp;because&nbsp;you&nbsp;are&nbsp;subscribed&nbsp;to&nbsp;the&nbsp;Google&nbsp;Groups&nbsp;&quot;OpenSceneGraph&nbsp;Users&quot;&nbsp;group.&lt;br&nbsp;/&gt;<br>
To&nbsp;unsubscribe&nbsp;from&nbsp;this&nbsp;group&nbsp;and&nbsp;stop&nbsp;receiving&nbsp;emails&nbsp;from&nbsp;it,&nbsp;send&nbsp;an&nbsp;email&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;mailto:osg-users+unsubscribe@googlegroups.com&quot;&gt;osg-users+unsubscribe@googlegroups.com&lt;/a&gt;.&lt;br&nbsp;/&gt;<br>
To&nbsp;view&nbsp;this&nbsp;discussion&nbsp;on&nbsp;the&nbsp;web&nbsp;visit&nbsp;&lt;a&nbsp;href=&quot;https://groups.google.com/d/msgid/osg-users/acdd2682-5b66-4064-aed1-66d2e5c9e3d5o%40googlegroups.com?utm_medium=email&amp;utm_source=footer&quot;&gt;https://groups.google.com/d/msgid/osg-users/acdd2682-5b66-4064-aed1-66d2e5c9e3d5o%40googlegroups.com&lt;/a&gt;.&lt;br&nbsp;/&gt;<br>

</tt>
