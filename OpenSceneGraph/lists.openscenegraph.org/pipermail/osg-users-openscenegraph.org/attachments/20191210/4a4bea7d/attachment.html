<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;br&gt;On&nbsp;Monday,&nbsp;9&nbsp;December&nbsp;2019&nbsp;19:57:27&nbsp;UTC,&nbsp;Greg&nbsp;D&nbsp;&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;My&nbsp;quick&nbsp;fix&nbsp;is&nbsp;to&nbsp;clear&nbsp;the&nbsp;cache&nbsp;on&nbsp;the&nbsp;first&nbsp;render&nbsp;(and&nbsp;call&nbsp;clear&nbsp;thereafter). &nbsp;OpenFlight&nbsp;files&nbsp;open&nbsp;and&nbsp;render&nbsp;fine&nbsp;now. &nbsp;Is&nbsp;this&nbsp;a&nbsp;safe&nbsp;fix?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;void&nbsp;ViewerBase::frame(double&nbsp;simulationTime)&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;....&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;osgDB::Registry::instance()-&gt;&lt;wbr&gt;clearObjectCache(); &nbsp;//&nbsp;ADDED&nbsp;TO&nbsp;CLEAR&nbsp;CACHE&nbsp;AFTER&nbsp;RENDER&nbsp;SINCE&nbsp;IT&nbsp;BECOMES&nbsp;CORRUPTED&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Adding&nbsp;this&nbsp;line&nbsp;to&nbsp;ViewerBase&nbsp;is&nbsp;a&nbsp;point&nbsp;of&nbsp;information&nbsp;about&nbsp;the&nbsp;problem&nbsp;rather&nbsp;than&nbsp;a&nbsp;fix. &nbsp;FYI,&nbsp;you&nbsp;can&nbsp;override&nbsp;Viewer::frame()&nbsp;by&nbsp;just&nbsp;subclassing&nbsp;Viewer&nbsp;there&nbsp;is&nbsp;no&nbsp;need&nbsp;to&nbsp;modify&nbsp;the&nbsp;OSG&nbsp;itself. &nbsp;You&nbsp;can&nbsp;also&nbsp;call&nbsp;the&nbsp;clear&nbsp;after&nbsp;the&nbsp;frame()&nbsp;in&nbsp;your&nbsp;own&nbsp;frame&nbsp;loop. &nbsp;However,&nbsp;all&nbsp;of&nbsp;these&nbsp;clearObjectCache()&nbsp;changes&nbsp;are&nbsp;hacks&nbsp;around&nbsp;a&nbsp;different&nbsp;problem.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;From&nbsp;your&nbsp;previous&nbsp;post&nbsp;that&nbsp;the&nbsp;change&nbsp;to&nbsp;OpenFlight&#39;s&nbsp;use&nbsp;of&nbsp;local&nbsp;cache&nbsp;vs&nbsp;ObjectCache&nbsp;indicates&nbsp;to&nbsp;me&nbsp;that&nbsp;the&nbsp;memory&nbsp;optimization&nbsp;of&nbsp;unrefering&nbsp;the&nbsp;osg::Image&nbsp;after&nbsp;the&nbsp;image&nbsp;data&nbsp;has&nbsp;been&nbsp;applied&nbsp;to&nbsp;the&nbsp;Textures&nbsp;texture&nbsp;object. &nbsp;If&nbsp;an&nbsp;Texture&nbsp;is&nbsp;in&nbsp;the&nbsp;cache&nbsp;and&nbsp;could&nbsp;be&nbsp;reused&nbsp;*and*&nbsp;the&nbsp;texture&nbsp;object&nbsp;data&nbsp;is&nbsp;released&nbsp;between&nbsp;the&nbsp;first&nbsp;use&nbsp;but&nbsp;before&nbsp;that&nbsp;Texture&nbsp;is&nbsp;later&nbsp;reused.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;potential&nbsp;fixes&nbsp;are&nbsp;:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;   &nbsp;Nt&nbsp;enable&nbsp;Texture::UnrefImageAfterApply &nbsp;-&nbsp;this&nbsp;is&nbsp;set&nbsp;to&nbsp;true&nbsp;by&nbsp;the&nbsp;osgUtil::Optimizer&#39;s&nbsp;TextureVisitor. &nbsp;Is&nbsp;you&nbsp;app&nbsp;call&nbsp;the&nbsp;Optimizer&nbsp;on&nbsp;loaded&nbsp;databases?&lt;br&gt;&lt;/div&gt;&lt;div&gt;   &nbsp;Don&#39;t&nbsp;delete&nbsp;the&nbsp;graphics&nbsp;contexts,&nbsp;instead&nbsp;just&nbsp;close&nbsp;the&nbsp;window&nbsp;and&nbsp;reopen&nbsp;it&nbsp;when&nbsp;you&nbsp;need&nbsp;it.&lt;/div&gt;&lt;div&gt;   &nbsp;Don&#39;t&nbsp;enable&nbsp;the&nbsp;object&nbsp;cache&nbsp;usage.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;A&nbsp;fix&nbsp;at&nbsp;the&nbsp;OSG&nbsp;would&nbsp;be&nbsp;for&nbsp;the&nbsp;OjbectCache&nbsp;to&nbsp;automatically&nbsp;detect&nbsp;the&nbsp;usage&nbsp;case&nbsp;where&nbsp;a&nbsp;Texture&nbsp;is&nbsp;in&nbsp;the&nbsp;case,&nbsp;it&#39;s&nbsp;been&nbsp;compiled&nbsp;and&nbsp;the&nbsp;image&nbsp;unreferred,&nbsp;the&nbsp;context&nbsp;deleted,&nbsp;then&nbsp;the&nbsp;Texture&nbsp;requested&nbsp;from&nbsp;the&nbsp;cache.  &nbsp;The&nbsp;place&nbsp;to&nbsp;do&nbsp;this&nbsp;would&nbsp;probably&nbsp;be&nbsp;ObjectCache::releaseGLObjects(osg::State*&nbsp;state). &nbsp;It&#39;d&nbsp;need&nbsp;to&nbsp;dynamic_cast&lt;Texture&gt;&nbsp;the&nbsp;Objects&nbsp;in&nbsp;the&nbsp;cache&nbsp;to&nbsp;find&nbsp;the&nbsp;textures&nbsp;then&nbsp;remove&nbsp;the&nbsp;Texture&nbsp;from&nbsp;the&nbsp;cache&nbsp;if&nbsp;it&#39;s&nbsp;got&nbsp;UnrefImageAfter&nbsp;enabled&nbsp;and&nbsp;no&nbsp;osg::Image&nbsp;still&nbsp;attached&nbsp;to&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Robert.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
<br>
&lt;p&gt;&lt;/p&gt;<br>
<br>
--&nbsp;&lt;br&nbsp;/&gt;<br>
You&nbsp;received&nbsp;this&nbsp;message&nbsp;because&nbsp;you&nbsp;are&nbsp;subscribed&nbsp;to&nbsp;the&nbsp;Google&nbsp;Groups&nbsp;&quot;OpenSceneGraph&nbsp;Users&quot;&nbsp;group.&lt;br&nbsp;/&gt;<br>
To&nbsp;unsubscribe&nbsp;from&nbsp;this&nbsp;group&nbsp;and&nbsp;stop&nbsp;receiving&nbsp;emails&nbsp;from&nbsp;it,&nbsp;send&nbsp;an&nbsp;email&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;mailto:osg-users+unsubscribe@googlegroups.com&quot;&gt;osg-users+unsubscribe@googlegroups.com&lt;/a&gt;.&lt;br&nbsp;/&gt;<br>
To&nbsp;view&nbsp;this&nbsp;discussion&nbsp;on&nbsp;the&nbsp;web&nbsp;visit&nbsp;&lt;a&nbsp;href=&quot;https://groups.google.com/d/msgid/osg-users/d726cd31-ce28-43ce-814c-1e293da836b8%40googlegroups.com?utm_medium=email&amp;utm_source=footer&quot;&gt;https://groups.google.com/d/msgid/osg-users/d726cd31-ce28-43ce-814c-1e293da836b8%40googlegroups.com&lt;/a&gt;.&lt;br&nbsp;/&gt;<br>

</tt>
