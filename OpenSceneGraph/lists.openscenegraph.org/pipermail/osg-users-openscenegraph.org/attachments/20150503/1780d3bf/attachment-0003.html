<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Robert,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;when&nbsp;I&nbsp;browse&nbsp;the&nbsp;code&nbsp;I&nbsp;seeing&nbsp;this&nbsp;in&nbsp;the&nbsp;Atomic.h/cpp&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;table&nbsp;id=&quot;info&quot;&nbsp;summary=&quot;Revision&nbsp;info&quot;&nbsp;style=&quot;font-size:13px;margin:0px;border:1px&nbsp;solid&nbsp;rgb(215,215,215);border-collapse:collapse;border-spacing:0px;clear:both;width:1328px;color:rgb(0,0,0);font-family:Verdana,Arial,&#39;Bitstream&nbsp;Vera&nbsp;Sans&#39;,Helvetica,sans-serif;background:rgb(247,247,240)&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th&nbsp;scope=&quot;col&quot;&nbsp;style=&quot;font-stretch:normal;font-size:11.0500001907349px;padding:2px&nbsp;0.5em;vertical-align:top;white-space:nowrap&quot;&gt;Revision &lt;a&nbsp;href=&quot;http://trac.openscenegraph.org/projects/osg/changeset/13132&quot;&nbsp;style=&quot;color:rgb(187,0,0);text-decoration:none;border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(187,187,187)&quot;&gt;13132&lt;/a&gt;, &lt;span&nbsp;title=&quot;8268&nbsp;bytes&quot;&gt;8.1&nbsp;kB&lt;/span&gt; (checked&nbsp;in&nbsp;by&nbsp;robert, &lt;a&nbsp;class=&quot;&quot;&nbsp;href=&quot;http://trac.openscenegraph.org/projects/osg/timeline?from=2015-04-30T16%3A04%3A51Z%2B0200&amp;precision=second&quot;&nbsp;title=&quot;2015-04-30T16:04:51Z+0200&nbsp;in&nbsp;Timeline&quot;&nbsp;style=&quot;color:rgb(187,0,0);text-decoration:none;border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(187,187,187)&quot;&gt;3&nbsp;days&lt;/a&gt; ago)&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;class=&quot;&quot;&nbsp;style=&quot;font-family:Verdana,Arial,&#39;Bitstream&nbsp;Vera&nbsp;Sans&#39;,Helvetica,sans-serif;font-stretch:normal;font-size:11.0500001907349px;padding:2px&nbsp;0.5em;vertical-align:top;width:1315.96875px&quot;&gt;&lt;p&nbsp;style=&quot;margin:0px;padding:0px&quot;&gt;From&nbsp;Christian&nbsp;Kehl,&nbsp;changes&nbsp;for&nbsp;making&nbsp;osgAndroid&nbsp;working&nbsp;with&nbsp;GLES1&nbsp;enabled &lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;And&nbsp;I&nbsp;reverted&nbsp;back&nbsp;the&nbsp;changes&nbsp;to&nbsp;match&nbsp;3.3.7&nbsp;but&nbsp;it&nbsp;still&nbsp;crashes&nbsp;in&nbsp;Atomic::operator--()&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Debug&nbsp;works&nbsp;just&nbsp;fine,&nbsp;so&nbsp;I&nbsp;have&nbsp;no&nbsp;idea&nbsp;what&nbsp;is&nbsp;wrong&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Nick&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sun,&nbsp;May&nbsp;3,&nbsp;2015&nbsp;at&nbsp;2:05&nbsp;PM,&nbsp;Robert&nbsp;Osfield&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:robert.osfield@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;robert.osfield@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;HI&nbsp;Nick,&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;3&nbsp;May&nbsp;2015&nbsp;at&nbsp;12:56,&nbsp;Trajce&nbsp;Nikolov&nbsp;NICK&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:trajce.nikolov.nick@gmail.com&quot;&gt;trajce.nikolov.nick@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;upgraded&nbsp;to&nbsp;the&nbsp;latest&nbsp;from&nbsp;the&nbsp;trunk.&nbsp;My&nbsp;app&nbsp;crashes&nbsp;now&nbsp;in&lt;br&gt;<br>
&gt;&nbsp;OpenThreads::Atomic&nbsp;and&nbsp;I&nbsp;am&nbsp;seeing&nbsp;in&nbsp;the&nbsp;log&nbsp;there&nbsp;are&nbsp;changes&nbsp;from&nbsp;3&nbsp;days&lt;br&gt;<br>
&gt;&nbsp;ago.&nbsp;Investigating&nbsp;now&nbsp;....&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;I&nbsp;haven&#39;t&nbsp;checked&nbsp;anything&nbsp;in&nbsp;to&nbsp;OpenThreads&nbsp;recently,&nbsp;the&nbsp;last&nbsp;check&lt;br&gt;<br>
in&nbsp;for&nbsp;OpenThreads::Atmoic&nbsp;was:&lt;br&gt;<br>
&lt;br&gt;<br>
$&nbsp;svn&nbsp;log&nbsp;include/OpenThreads/Atomic&lt;br&gt;<br>
------------------------------------------------------------------------&lt;br&gt;<br>
r13132&nbsp;|&nbsp;robert&nbsp;|&nbsp;2012-09-06&nbsp;11:52:28&nbsp;+0100&nbsp;(Thu,&nbsp;06&nbsp;Sep&nbsp;2012)&nbsp;|&nbsp;11&nbsp;lines&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;From&nbsp;Piotr&nbsp;Domagalski,&nbsp;&quot;Currently,&nbsp;code&nbsp;using&nbsp;OpenSceneGraph&nbsp;doesn&#39;t&lt;br&gt;<br>
build&nbsp;with&nbsp;clang&nbsp;due&nbsp;to&nbsp;the&nbsp;way&nbsp;__sync_bool_compare_and_swap()&nbsp;is&nbsp;used&lt;br&gt;<br>
in&nbsp;OpenThreads/Atomic&nbsp;header&nbsp;file.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;tested&nbsp;it&nbsp;with&nbsp;clang&nbsp;3.1&nbsp;and&nbsp;it&nbsp;seems&nbsp;that&nbsp;clang&nbsp;is&nbsp;enforcing&nbsp;the&lt;br&gt;<br>
use&nbsp;of&nbsp;the&nbsp;same&nbsp;type&nbsp;for&nbsp;all&nbsp;parameters&nbsp;in&nbsp;this&nbsp;builtin.&nbsp;Looking&nbsp;at&lt;br&gt;<br>
the&nbsp;function&nbsp;declaration&nbsp;[1]&lt;br&gt;<br>
&lt;br&gt;<br>
bool&nbsp;__sync_bool_compare_and_swap&nbsp;(type&nbsp;*ptr,&nbsp;type&nbsp;oldval&nbsp;type&nbsp;newval,&nbsp;...)&lt;br&gt;<br>
&lt;br&gt;<br>
it&nbsp;seems&nbsp;to&nbsp;be&nbsp;doing&nbsp;the&nbsp;right&nbsp;thing:&nbsp;here&nbsp;the&nbsp;same&nbsp;type&nbsp;is&nbsp;used&nbsp;for&lt;br&gt;<br>
*ptr,&nbsp;oldval&nbsp;and&nbsp;newval.&lt;br&gt;<br>
&lt;br&gt;<br>
[1]&nbsp;&lt;a&nbsp;href=&quot;http://gcc.gnu.org/onlinedocs/gcc/_005f_005fsync-Builtins.html#g_t_005f_005fsync-Builtins&quot;&nbsp;target=&quot;_blank&quot;&gt;http://gcc.gnu.org/onlinedocs/gcc/_005f_005fsync-Builtins.html#g_t_005f_005fsync-Builtins&lt;/a&gt;&lt;br&gt;<br>
&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;hope&nbsp;this&nbsp;doesn&#39;t&nbsp;mean&nbsp;subversion&nbsp;repository&nbsp;has&nbsp;been&nbsp;hacked.&lt;br&gt;<br>
&lt;br&gt;<br>
Robert.&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;trajce&nbsp;nikolov&nbsp;nick&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
