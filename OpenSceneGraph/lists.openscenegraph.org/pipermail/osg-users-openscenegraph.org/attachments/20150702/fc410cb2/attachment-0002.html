<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;&lt;!--<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
font-size:&nbsp;12pt;<br>
font-family:Calibri<br>
}<br>
--&gt;&lt;/style&gt;&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;&lt;div&nbsp;dir='ltr'&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;2&quot;&gt;Dear&nbsp;All,&lt;/font&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;2&quot;&gt;I&nbsp;load&nbsp;a&nbsp;model&nbsp;with&nbsp;the&nbsp;following&nbsp;code&nbsp;in&nbsp;my&nbsp;program,&nbsp;p1&nbsp;and&nbsp;p2&nbsp;are&nbsp;osg::Vec3&nbsp;type&nbsp;variables&nbsp;and&nbsp;simply&nbsp;representing&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;2&quot;&gt;the&nbsp;each&nbsp;ends&nbsp;of&nbsp;object&nbsp;in&nbsp;spatial&nbsp;space&nbsp;(&nbsp;I&nbsp;also&nbsp;use&nbsp;them&nbsp;to&nbsp;find&nbsp;the&nbsp;direction&nbsp;vector).&nbsp;What&nbsp;I&nbsp;want&nbsp;to&nbsp;achive&nbsp;is:&nbsp;to&nbsp;place&nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;2&quot;&gt;that&nbsp;model&nbsp;&lt;/font&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;2&quot;&gt;up&nbsp;vector&nbsp;always&nbsp;aligned&nbsp;&nbsp;facing&nbsp;upward&nbsp;(&nbsp;this&nbsp;doesn't&nbsp;mean&nbsp;that&nbsp;it&nbsp;must&nbsp;coincidence/be&nbsp;parallel&nbsp;with&nbsp;global&nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;2&quot;&gt;Z&nbsp;axis)&nbsp;&nbsp;to&nbsp;achieve&nbsp;that&nbsp;&nbsp;If&nbsp;I&nbsp;apply&nbsp;the&nbsp;quaternions&nbsp;then&nbsp;&lt;/font&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;object&nbsp;is&nbsp;positioned&nbsp;with&nbsp;correct&nbsp;direction&nbsp;vector&nbsp;(calulated&nbsp;via&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;p1,&nbsp;p2)&nbsp;&nbsp;but&nbsp;rolled&nbsp;with&nbsp;arbitrary&nbsp;angle&nbsp;along&nbsp;that&nbsp;direction&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;vector,&nbsp;which&nbsp;violates&nbsp;my&nbsp;conditional&nbsp;goal.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;It&nbsp;also&nbsp;seems&nbsp;that&nbsp;it's&nbsp;not&nbsp;a&nbsp;supprise&nbsp;that&nbsp;it&nbsp;produces&nbsp;that&nbsp;result&nbsp;bcoz&nbsp;nowhere&nbsp;I&nbsp;specify&nbsp;the&nbsp;crucial&nbsp;right&nbsp;or&nbsp;up&nbsp;vector&nbsp;with&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;quaternion&nbsp;which&nbsp;is&nbsp;required&nbsp;to&nbsp;position&nbsp;the&nbsp;object&nbsp;in&nbsp;3D&nbsp;space.&nbsp;So&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;How&nbsp;am&nbsp;I&nbsp;supposed&nbsp;to&nbsp;correct&nbsp;that&nbsp;effect&nbsp;either&nbsp;with&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;quaternions&nbsp;or&nbsp;matrices&nbsp;?&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;2&quot;&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loadedModel&nbsp;=&nbsp;osgDB::readNodeFile(&quot;quad.obj&quot;);&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::Vec3Array*&nbsp;verlist=&nbsp;static_cast&lt;osg::Vec3Array*&nbsp;&gt;(rubber_line-&gt;getVertexArray());&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::Vec3&nbsp;p1&nbsp;=&nbsp;(*verlist)[0];&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::Vec3&nbsp;p2&nbsp;=&nbsp;(*verlist)[1];&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::ref_ptr&lt;osg::PositionAttitudeTransform&gt;&nbsp;Transf&nbsp;=&nbsp;new&nbsp;osg::PositionAttitudeTransform;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Transf-&gt;setPosition(&nbsp;p1&nbsp;);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::Quat&nbsp;quad;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::Matrix&nbsp;matrix,&nbsp;mat2;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quad.makeRotate(osg::Vec3(0,1,0),p2-p1);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Transf-&gt;setAttitude(quad);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Transf-&gt;addChild(loadedModel);&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootnode-&gt;addChild(Transf);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
