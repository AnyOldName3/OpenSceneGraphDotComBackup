<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;don&#39;t&nbsp;have&nbsp;any&nbsp;modern&nbsp;Apples&nbsp;to&nbsp;Apples&nbsp;comparisons&nbsp;to&nbsp;cite.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;do&nbsp;know,&nbsp;that&nbsp;if&nbsp;you&nbsp;recall,&nbsp;we&nbsp;ran&nbsp;into&nbsp;threading&nbsp;issues&nbsp;when&nbsp;dealing&nbsp;with&nbsp;the&nbsp;massive&nbsp;plenoptic&nbsp;display&nbsp;IG&nbsp;back&nbsp;in&nbsp;2015&nbsp;or&nbsp;so&nbsp;on&nbsp;AMD&nbsp;cards,&nbsp;and&nbsp;it&nbsp;needed&nbsp;special&nbsp;assistance&nbsp;from&nbsp;AMD&nbsp;to&nbsp;unclog&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Do&nbsp;you&nbsp;know&nbsp;Graham&nbsp;Sellers&nbsp;at&nbsp;AMD?&nbsp;Maybe&nbsp;we&nbsp;could&nbsp;get&nbsp;some&nbsp;advising&nbsp;from&nbsp;him.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Mon,&nbsp;Apr&nbsp;1,&nbsp;2019&nbsp;at&nbsp;2:59&nbsp;PM&nbsp;Robert&nbsp;Osfield&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:robert.osfield@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;robert.osfield@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;Hi&nbsp;All,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;recently&nbsp;got&nbsp;a&nbsp;new&nbsp;dev&nbsp;machine,&nbsp;a&nbsp;AMD2700&nbsp;+&nbsp;Geforce&nbsp;2060&lt;br&gt;<br>
system.&nbsp;I&nbsp;wanted&nbsp;a&nbsp;quiet&nbsp;mulit-core&nbsp;system&nbsp;as&nbsp;well&nbsp;as&nbsp;to&nbsp;get&nbsp;some&lt;br&gt;<br>
experiment&nbsp;working&nbsp;with&nbsp;AMD&nbsp;chips&nbsp;as&nbsp;I&#39;ve&nbsp;been&nbsp;using&nbsp;Intel&nbsp;Corei7&lt;br&gt;<br>
chips&nbsp;for&nbsp;the&nbsp;last&nbsp;8&nbsp;years. &nbsp;The&nbsp;machine&nbsp;uses&nbsp;passive&nbsp;cooling&nbsp;for&lt;br&gt;<br>
everything&nbsp;except&nbsp;the&nbsp;graphics&nbsp;card&nbsp;so&nbsp;it&#39;s&nbsp;soo&nbsp;quiet&nbsp;you&nbsp;hardly&nbsp;know&lt;br&gt;<br>
it&#39;s&nbsp;on&nbsp;:-)&lt;br&gt;<br>
&lt;br&gt;<br>
I&#39;ve&nbsp;begun&nbsp;performance&nbsp;testing&nbsp;and&nbsp;was&nbsp;expecting&nbsp;most&nbsp;improvements&lt;br&gt;<br>
across&nbsp;the&nbsp;board&nbsp;for&nbsp;single&nbsp;threaded&nbsp;tasks,&nbsp;and&nbsp;big&nbsp;improvement&nbsp;on&lt;br&gt;<br>
highly&nbsp;threaded&nbsp;tasks&nbsp;like&nbsp;building. &nbsp; I&nbsp;expected&nbsp;this&nbsp;based&nbsp;on&nbsp;a&lt;br&gt;<br>
number&nbsp;of&nbsp;online&nbsp;performance&nbsp;comparisons. &nbsp;For&nbsp;example:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://cpu.userbenchmark.com/Compare/Intel-Core-i7-4770S-vs-AMD-Ryzen-7-2700/m2123vs3957&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://cpu.userbenchmark.com/Compare/Intel-Core-i7-4770S-vs-AMD-Ryzen-7-2700/m2123vs3957&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://hwbench.com/cpus/amd-ryzen-7-2700-vs-intel-core-i7-4770s&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://hwbench.com/cpus/amd-ryzen-7-2700-vs-intel-core-i7-4770s&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;using&nbsp;the&nbsp;OSG&nbsp;I&#39;m&nbsp;seeing&nbsp;lower&nbsp;framerates&nbsp;for&nbsp;almost&nbsp;all&nbsp;the&nbsp;test&lt;br&gt;<br>
models&nbsp;I&nbsp;regularly&nbsp;use,&nbsp;in&nbsp;particular&nbsp;the&nbsp;cull&nbsp;traversal&nbsp;can&nbsp;be&nbsp;20-40%&lt;br&gt;<br>
slower.&lt;br&gt;<br>
&lt;br&gt;<br>
Doing&nbsp;synthetic&nbsp;OSG&nbsp;+&nbsp;VSG&nbsp;scene&nbsp;graph&nbsp;creation,&nbsp;traversal&nbsp;tests&nbsp;shows&lt;br&gt;<br>
the&nbsp;OSG&nbsp;32%&nbsp;slower&nbsp;on&nbsp;the&nbsp;AMD&nbsp;(running&nbsp;osggroups&nbsp;from&nbsp;the&nbsp;osg2vsg&lt;br&gt;<br>
project)&nbsp;while&nbsp;the&nbsp;equivalent&nbsp;VSG&nbsp;test &nbsp;is&nbsp;~14%&nbsp;faster&nbsp;on&nbsp;the&nbsp;AMD&lt;br&gt;<br>
(running&nbsp;vsgvisitor&nbsp;from&nbsp;the&nbsp;vsgExamples&nbsp;project).&lt;br&gt;<br>
&lt;br&gt;<br>
Looking&nbsp;at&nbsp;the&nbsp;Linux&nbsp;perf&nbsp;stat&nbsp;utility&nbsp;it&nbsp;looks&nbsp;like&nbsp;the&nbsp;OSG&nbsp;runs&nbsp;for&lt;br&gt;<br>
AMD&nbsp;run&nbsp;are&nbsp;hitting&nbsp;up&nbsp;against&nbsp;498&nbsp;context-switches&nbsp;for&nbsp;the&nbsp;run&nbsp;of&lt;br&gt;<br>
osggroups,&nbsp;while&nbsp;the&nbsp;Intel&nbsp;just&nbsp;sees&nbsp;24&nbsp;context&nbsp;switches. &nbsp;Branch&lt;br&gt;<br>
misses&nbsp;are&nbsp;0.66%&nbsp;on&nbsp;AMD&nbsp;vs&nbsp;0.37%&nbsp;on&nbsp;Intel. &nbsp;Instructions&nbsp;per&nbsp;cycle&nbsp;are&lt;br&gt;<br>
all&nbsp;worse&nbsp;on&nbsp;the&nbsp;AMD&nbsp;too,&nbsp;0.72&nbsp;(AMD)&nbsp;vs&nbsp;0.95&nbsp;(Intel)&lt;br&gt;<br>
instrictions/cycle&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;same&nbsp;equivalent&nbsp;tests&nbsp;with&nbsp;the&nbsp;VSG&nbsp;shows&nbsp;that&nbsp;the&nbsp;AMD&nbsp;has&nbsp;56&lt;br&gt;<br>
context&nbsp;switches&nbsp;vs&nbsp;2&nbsp;on&nbsp;the&nbsp;Intel. &nbsp;Branch&nbsp;misses&nbsp;are&nbsp;also&nbsp;still&lt;br&gt;<br>
higher&nbsp;on&nbsp;the&nbsp;AMD,&nbsp;but&nbsp;the&nbsp;instructions&nbsp;per&nbsp;cycle&nbsp;are&nbsp;now&nbsp;2.13&nbsp;(AMD)&lt;br&gt;<br>
vs&nbsp;1.96&nbsp;(Intel)&nbsp;instructions/cycle.&lt;br&gt;<br>
&lt;br&gt;<br>
Another&nbsp;way&nbsp;of&nbsp;presenting&nbsp;this&nbsp;data,&nbsp;this&nbsp;OSG&nbsp;vs&nbsp;VSG&nbsp;tests&nbsp;runs&nbsp;a&lt;br&gt;<br>
testing&nbsp;of&nbsp;creation&nbsp;11&nbsp;deep&nbsp;quad&nbsp;tree,&nbsp;traversing&nbsp;every&nbsp;node&nbsp;in&nbsp;the&lt;br&gt;<br>
graph&nbsp;10&nbsp;times,&nbsp;then&nbsp;destroying&nbsp;the&nbsp;graph:&lt;br&gt;<br>
&lt;br&gt;<br>
VSG&nbsp;Intel&nbsp;0.615&nbsp;secs &nbsp;(VSG&nbsp;6.33&nbsp;x&nbsp;faster&nbsp;than&nbsp;OSG)&lt;br&gt;<br>
OSG&nbsp;Intel&nbsp;3.895&nbsp;secs&lt;br&gt;<br>
&lt;br&gt;<br>
VSG&nbsp;AMD&nbsp;0.555&nbsp;secs&nbsp;(VSG&nbsp;9.36&nbsp;x&nbsp;faster&nbsp;than&nbsp;OSG)&lt;br&gt;<br>
OSG&nbsp;AMD&nbsp;5.196&nbsp;secs&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Despite&nbsp;the&nbsp;raw&nbsp;creation,&nbsp;traversals&nbsp;and&nbsp;destruction&nbsp;being&nbsp;quicker&nbsp;on&lt;br&gt;<br>
the&nbsp;AMD&nbsp;with&nbsp;the&nbsp;VSG,&nbsp;the&nbsp;VSG&nbsp;framerates&nbsp;on&nbsp;scenes&nbsp;are&nbsp;worse&nbsp;on&nbsp;the&lt;br&gt;<br>
AMD&nbsp;vs&nbsp;Intel&nbsp;though,&nbsp;except&nbsp;where&nbsp;the&nbsp;2060&#39;s&nbsp;better&nbsp;fill&nbsp;rate&nbsp;gives&nbsp;it&lt;br&gt;<br>
advantage. &nbsp;Even&nbsp;when&nbsp;I&nbsp;take&nbsp;the&nbsp;VSG&#39;s&nbsp;traversals&nbsp;out&nbsp;of&nbsp;the&nbsp;equation&lt;br&gt;<br>
and&nbsp;just&nbsp;submitted&nbsp;the&nbsp;same&nbsp;command&nbsp;graph&nbsp;to&nbsp;render&nbsp;each&nbsp;frame&nbsp;the&lt;br&gt;<br>
frame&nbsp;rate&nbsp;is&nbsp;worse&nbsp;on&nbsp;the&nbsp;AMD&nbsp;vs&nbsp;Intel&nbsp;system,&nbsp;suggesting&nbsp;it&#39;s&nbsp;not&lt;br&gt;<br>
just&nbsp;the&nbsp;slower&nbsp;traversals&nbsp;that&nbsp;is&nbsp;at&nbsp;issue&nbsp;-&nbsp;the&nbsp;Vulkan&nbsp;driver&nbsp;and&lt;br&gt;<br>
hardware&nbsp;look&nbsp;to&nbsp;be&nbsp;struggling&nbsp;as&nbsp;well.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;two&nbsp;systems&nbsp;aren&#39;t&nbsp;identical&nbsp;software&nbsp;wise,&nbsp;the&nbsp;Intel&nbsp;system&nbsp;in&nbsp;on&lt;br&gt;<br>
Kubuntu&nbsp;18.04&nbsp;with&nbsp;gcc&nbsp;7.3.0&nbsp;vs&nbsp;Kubuntu&nbsp;18.10&nbsp;with&nbsp;gcc&nbsp;8.2.0. &nbsp;The&lt;br&gt;<br>
Intel&nbsp;system&nbsp;has&nbsp;NVidia&nbsp;396.54.09&nbsp;vs&nbsp;AMD&nbsp;system&nbsp;with&nbsp;NVidia&nbsp;415.27.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;wouldn&#39;t&nbsp;have&nbsp;thought&nbsp;the&nbsp;OS,&nbsp;compile&nbsp;and&nbsp;drivers&nbsp;to&nbsp;make&nbsp;such&nbsp;stark&lt;br&gt;<br>
differences&nbsp;in&nbsp;performance. &nbsp;The&nbsp;VSG&#39;s&nbsp;lighterweight&nbsp;design&nbsp;does&nbsp;seem&lt;br&gt;<br>
to&nbsp;help&nbsp;reduce&nbsp;the&nbsp;impact&nbsp;a&nbsp;bit&nbsp;and&nbsp;for&nbsp;some&nbsp;tests&nbsp;gives&nbsp;the&nbsp;AMD&nbsp;an&lt;br&gt;<br>
advantage,&nbsp;but&nbsp;it&#39;s&nbsp;still&nbsp;overall&nbsp;slower&nbsp;on&nbsp;the&nbsp;AMD. &nbsp;The&nbsp;OSG&nbsp;sees&nbsp;a&lt;br&gt;<br>
huge&nbsp;hit&nbsp;on&nbsp;complex&nbsp;scenes&nbsp;on&nbsp;the&nbsp;AMD&nbsp;system.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;I&#39;m&nbsp;perplexed&nbsp;what&nbsp;might&nbsp;be&nbsp;going&nbsp;on. &nbsp;The&nbsp;perf&nbsp;stat&nbsp;report&lt;br&gt;<br>
suggests&nbsp;that&nbsp;the&nbsp;AMD&nbsp;is&nbsp;running&nbsp;at&nbsp;around&nbsp;3.9-4GHz&nbsp;vs&nbsp;Intel&nbsp;running&lt;br&gt;<br>
at&nbsp;3.8&nbsp;to&nbsp;3.GHz. &nbsp;The&nbsp;perf&nbsp;stat&nbsp;results&nbsp;suggests&nbsp;that&nbsp;certain&lt;br&gt;<br>
workloads&nbsp;are&nbsp;really&nbsp;messing&nbsp;up&nbsp;the&nbsp;AMD&#39;s&nbsp;chip&nbsp;ability&nbsp;to&nbsp;efficiently&lt;br&gt;<br>
handle&nbsp;the&nbsp;load.&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;one&nbsp;upside,&nbsp;the&nbsp;AMD&#39;s&nbsp;8&nbsp;cores/16&nbsp;threads&nbsp;vs&nbsp;Intel&#39;s&nbsp;4cores/8&lt;br&gt;<br>
threads&nbsp;certainly&nbsp;helps&nbsp;when&nbsp;compiling&nbsp;the&nbsp;OSG,&nbsp;but&nbsp;this&nbsp;is&nbsp;small&lt;br&gt;<br>
comfort&nbsp;as&nbsp;my&nbsp;job&nbsp;is&nbsp;far&nbsp;more&nbsp;focused&nbsp;on&nbsp;optimizing&nbsp;real-time&lt;br&gt;<br>
rendering&nbsp;performance&nbsp;than&nbsp;just&nbsp;getting&nbsp;code&nbsp;compiled.&lt;br&gt;<br>
&lt;br&gt;<br>
I&#39;d&nbsp;really&nbsp;like&nbsp;some&nbsp;feedback&nbsp;from&nbsp;the&nbsp;community&nbsp;as&nbsp;to&nbsp;what&nbsp;might&nbsp;be&lt;br&gt;<br>
going&nbsp;wrong&nbsp;on&nbsp;my&nbsp;AMD&nbsp;system. &nbsp;Are&nbsp;others&nbsp;seeing&nbsp;significantly&nbsp;slower&lt;br&gt;<br>
CPU&nbsp;performance&nbsp;on&nbsp;AMD&nbsp;vs&nbsp;Intel&nbsp;for&nbsp;certain&nbsp;tasks?&lt;br&gt;<br>
&lt;br&gt;<br>
Any&nbsp;suggestions&nbsp;as&nbsp;what&nbsp;tests&nbsp;to&nbsp;do&nbsp;next? &nbsp;What&nbsp;to&nbsp;tweak?&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
Robert.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail-m_-2470052483918599122gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;style=&quot;text-align:center&quot;&gt;Chris&nbsp;&#39;Xenon&#39;&nbsp;Hanson,&nbsp;omo&nbsp;sanza&nbsp;lettere.&nbsp;Xenon@AlphaPixel.com&nbsp;&lt;a&nbsp;href=&quot;http://www.alphapixel.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.alphapixel.com/&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;text-align:center&quot;&gt;Training&nbsp;•&nbsp;Consulting&nbsp;•&nbsp;Contracting&lt;/div&gt;&lt;div&nbsp;style=&quot;text-align:center&quot;&gt;3D&nbsp;•&nbsp;Scene&nbsp;Graphs&nbsp;(Open&nbsp;Scene&nbsp;Graph/OSG)&nbsp;•&nbsp;OpenGL&nbsp;2&nbsp;•&nbsp;OpenGL&nbsp;3&nbsp;•&nbsp;OpenGL&nbsp;4&nbsp;•&nbsp;GLSL&nbsp;•&nbsp;OpenGL&nbsp;ES&nbsp;1&nbsp;•&nbsp;OpenGL&nbsp;ES&nbsp;2&nbsp;•&nbsp;OpenCL&lt;/div&gt;&lt;div&nbsp;style=&quot;text-align:center&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;Legal/IP&nbsp;•&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt; &lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;Forensics&nbsp;•&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt; &lt;/span&gt;Imaging &lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;•&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt; &lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;UAVs &lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;•&nbsp;GIS&nbsp;•&nbsp;GPS&nbsp;•&nbsp;osgEarth • Terrain • Telemetry&nbsp;•&nbsp;Cryptography&nbsp;•&nbsp;LIDAR&nbsp;•&nbsp;Embedded&nbsp;•&nbsp;Mobile&nbsp;•&nbsp;iPhone/iPad/iOS&nbsp;•&nbsp;Android&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;text-align:center&quot;&gt;&lt;a&nbsp;href=&quot;https://twitter.com/alphapixel&quot;&nbsp;target=&quot;_blank&quot;&gt;@alphapixel&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;http://facebook.com/alphapixel&quot;&nbsp;target=&quot;_blank&quot;&gt;facebook.com/alphapixel&lt;/a&gt; (775)&nbsp;623-PIXL&nbsp;[7495]&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
