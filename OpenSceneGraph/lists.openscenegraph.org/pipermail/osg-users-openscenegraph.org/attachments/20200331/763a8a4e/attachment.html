<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Does&nbsp;the&nbsp;code&nbsp;crash&nbsp;whether&nbsp;you&nbsp;enable&nbsp;or&nbsp;disable&nbsp;the&nbsp;debug&nbsp;output?&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Tue,&nbsp;31&nbsp;Mar&nbsp;2020&nbsp;at&nbsp;08:15,&nbsp;OpenSceneGraph&nbsp;Users&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hello&nbsp;everyone,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;recently&nbsp;I&nbsp;encountered&nbsp;a&nbsp;sporadic&nbsp;crash&nbsp;in&nbsp;my&nbsp;App&nbsp;at&nbsp;same&nbsp;position&nbsp;upon&nbsp;calling&nbsp;function&nbsp;Renderer::draw()&nbsp;in&nbsp;osgViewer/Renderer.cpp.&nbsp;The&nbsp;crash&nbsp;happend&nbsp;at &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;  &lt;font&nbsp;size=&quot;2&quot;&gt;DEBUG_MESSAGE&lt;&lt;&quot;draw()&nbsp;got&nbsp;SceneView&nbsp;&quot;&lt;&lt;sceneView&lt;&lt;std::endl;&lt;/font&gt;&nbsp;&lt;/i&gt;(screenshots&nbsp;of&nbsp;callstack&nbsp;are&nbsp;attached)&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;and&nbsp;triggerd&nbsp;an&nbsp;exception&nbsp;via&nbsp;a&nbsp;string&nbsp;of&nbsp;basic&nbsp;streambuf&nbsp;operations&nbsp;very&nbsp;deep&nbsp;down&nbsp;to&nbsp;msvcp100d.dll&nbsp;in&nbsp;dbgheap.c&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;&lt;i&gt; /*&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt; &nbsp; &nbsp; &nbsp; &nbsp; *&nbsp;If&nbsp;this&nbsp;ASSERT&nbsp;fails,&nbsp;a&nbsp;bad&nbsp;pointer&nbsp;has&nbsp;been&nbsp;passed&nbsp;in.&nbsp;It&nbsp;may&nbsp;be&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt; &nbsp; &nbsp; &nbsp; &nbsp; *&nbsp;totally&nbsp;bogus,&nbsp;or&nbsp;it&nbsp;may&nbsp;have&nbsp;been&nbsp;allocated&nbsp;from&nbsp;another&nbsp;heap.&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt; &nbsp; &nbsp; &nbsp; &nbsp; *&nbsp;The&nbsp;pointer&nbsp;MUST&nbsp;come&nbsp;from&nbsp;the&nbsp;&#39;local&#39;&nbsp;heap.&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt; &nbsp; &nbsp; &nbsp; &nbsp; */&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt; &nbsp; &nbsp; &nbsp; &nbsp;_ASSERTE(_CrtIsValidHeapPointer(pUserData)); &lt;/i&gt; ----&gt;&nbsp;assertion&nbsp;error&nbsp;thrown,&nbsp;the&nbsp;heap&nbsp;pointer&nbsp;is&nbsp;invalid&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;debug&nbsp;session&nbsp;I&nbsp;checked&nbsp;the&nbsp;call&nbsp;stack&nbsp;step&nbsp;by&nbsp;step&nbsp;and&nbsp;found&nbsp;that&nbsp;when&nbsp;putting&nbsp;&quot;&lt;i&gt;draw()&nbsp;got&nbsp;SceneView&lt;/i&gt;&quot;&nbsp;in&nbsp;stringbuffer,&nbsp;functoin&nbsp;overflow&nbsp;of&nbsp;std::basic_stringbuf&nbsp;is&nbsp;triggerd,&nbsp;and&nbsp;subsequently&lt;/div&gt;&lt;div&gt;the&nbsp;deallocate&nbsp;step&nbsp;at&nbsp;:&lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;i&gt;if&nbsp;(_Mystate&nbsp;&amp;&nbsp;_Allocated)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;_Al.deallocate(_Oldptr,&nbsp;_Oldsize);&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;_Mystate&nbsp;|=&nbsp;_Allocated;&lt;/i&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;was&nbsp;executed.&nbsp;it&nbsp;tried&nbsp;to&nbsp;deallocate&nbsp;the&nbsp;buffer,&nbsp;pointed&nbsp;by&nbsp;&quot;_Oldptr&quot;&nbsp;with&nbsp;size&nbsp;&quot;_Oldsize&quot;.&nbsp;But&nbsp;the&nbsp;size&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;actual&nbsp;buffer&nbsp;length.&nbsp;Therefore&nbsp;the&nbsp;assertion&nbsp;error&nbsp;above&nbsp;was&nbsp;thrown.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Info&nbsp;to&nbsp;my&nbsp;App:&lt;/div&gt;&lt;div&gt;I&nbsp;enhance&nbsp;the&nbsp;viewer&nbsp;with&nbsp;osgWidget::WindowManager.&nbsp;My&nbsp;App&nbsp;recieves&nbsp;external&nbsp;data&nbsp;cyclic&nbsp;and&nbsp;renders&nbsp;boxes&nbsp;and&nbsp;lines&nbsp;in&nbsp;one&nbsp;data&nbsp;transmission&nbsp;framework.&nbsp;The&nbsp;API&nbsp;of&nbsp;this&nbsp;framework&nbsp;calls&nbsp;my&nbsp;viewer&nbsp;to&nbsp;render&nbsp;every&nbsp;20ms,&nbsp;an&nbsp;example&nbsp;of&nbsp;this&nbsp;call:&lt;/div&gt;&lt;div&gt; &nbsp; framework::call_on_cycle&nbsp;()&nbsp;{ &nbsp;//&nbsp;main&nbsp;thread&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;process&nbsp;and&nbsp;storing&nbsp;incoming&nbsp;data&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; process_data();&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myViewer-&gt;frame();&lt;/div&gt;&lt;div&gt; }&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;My&nbsp;App&nbsp;runs&nbsp;at DrawThreadPerContext&nbsp;mode&nbsp;and&nbsp;updates&nbsp;drawables&nbsp;in&nbsp;callback&nbsp;and&nbsp;setting&nbsp;them&nbsp;as&nbsp;DYNAMIC.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;there&nbsp;anyone&nbsp;ever&nbsp;facing&nbsp;similar&nbsp;Problem?&nbsp;Or&nbsp;any&nbsp;ideas&nbsp;to&nbsp;analyse&nbsp;or&nbsp;sort&nbsp;this&nbsp;out?&nbsp;I&nbsp;will&nbsp;really&nbsp;appreciate&nbsp;any&nbsp;help.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Yuan&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/div&gt;&lt;/div&gt;<br>
<br>
&lt;p&gt;&lt;/p&gt;<br>
<br>
--&nbsp;&lt;br&gt;<br>
You&nbsp;received&nbsp;this&nbsp;message&nbsp;because&nbsp;you&nbsp;are&nbsp;subscribed&nbsp;to&nbsp;the&nbsp;Google&nbsp;Groups&nbsp;&quot;OpenSceneGraph&nbsp;Users&quot;&nbsp;group.&lt;br&gt;<br>
To&nbsp;unsubscribe&nbsp;from&nbsp;this&nbsp;group&nbsp;and&nbsp;stop&nbsp;receiving&nbsp;emails&nbsp;from&nbsp;it,&nbsp;send&nbsp;an&nbsp;email&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;mailto:osg-users+unsubscribe@googlegroups.com&quot;&nbsp;target=&quot;_blank&quot;&gt;osg-users+unsubscribe@googlegroups.com&lt;/a&gt;.&lt;br&gt;<br>
To&nbsp;view&nbsp;this&nbsp;discussion&nbsp;on&nbsp;the&nbsp;web&nbsp;visit&nbsp;&lt;a&nbsp;href=&quot;https://groups.google.com/d/msgid/osg-users/b0bac75e-6cdb-47f7-9ede-1e8aa931af4c%40googlegroups.com?utm_medium=email&amp;utm_source=footer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://groups.google.com/d/msgid/osg-users/b0bac75e-6cdb-47f7-9ede-1e8aa931af4c%40googlegroups.com&lt;/a&gt;.&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
