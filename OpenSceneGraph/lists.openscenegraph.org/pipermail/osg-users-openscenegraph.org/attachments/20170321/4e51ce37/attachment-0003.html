<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=windows-1252&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi&nbsp;Robert,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;problem&nbsp;is&nbsp;here:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;if&nbsp;(osgDB::Registry::instance()-&gt;loadLibrary(pluginLib)==osgDB::Registry::LOADED)&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;   &nbsp;return&nbsp;findWrapper(name);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;return&nbsp;NULL;<br>
<br>
The&nbsp;loadLibrary()&nbsp;returns&nbsp;PREVIOUSLY_LOADED&nbsp;and&nbsp;not&nbsp;LOADED.<br>
So&nbsp;NULL&nbsp;gets&nbsp;returned&nbsp;instead&nbsp;of&nbsp;a&nbsp;wrapper&nbsp;pointer&nbsp;and&nbsp;thus&nbsp;the&nbsp;node&nbsp;doesn't&nbsp;get&nbsp;exported.<br>
Or&nbsp;am&nbsp;I&nbsp;on&nbsp;the&nbsp;wrong&nbsp;search&nbsp;path?<br>
<br>
I&nbsp;try&nbsp;exporting&nbsp;my&nbsp;scene&nbsp;into&nbsp;an&nbsp;.osgx&nbsp;file&nbsp;by&nbsp;calling:<br>
&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;osg&lt;/span&gt;::&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;ref_ptr&lt;/span&gt;&lt;&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;osgDB&lt;/span&gt;::&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;ReaderWriter&lt;/span&gt;&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;rw&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;=&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;osgDB&lt;/span&gt;::&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;Registry&lt;/span&gt;::instance()-&gt;getReaderWriterForExtension(<br>
&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;osgDB&lt;/span&gt;::getLowerCaseFileExtension(_filename.toStdString()));<br>
&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#808000;&quot;&gt;if&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;(!rw.valid())<br>
&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#808000;&quot;&gt;return&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#808000;&quot;&gt;false&lt;/span&gt;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;osgDB&lt;/span&gt;::&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;ReaderWriter&lt;/span&gt;::&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;WriteResult&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;result&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;=&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;rw-&gt;&lt;span&nbsp;style=&quot;&nbsp;font-style:italic;&nbsp;color:#000000;&quot;&gt;writeNode&lt;/span&gt;(_node,&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;_filename.toStdString());<br>
<br>
result.success()&nbsp;is&nbsp;true.&nbsp;<br>
It&nbsp;creates&nbsp;a&nbsp;file&nbsp;containing&nbsp;only&nbsp;the&nbsp;outer&nbsp;xml&nbsp;header&nbsp;and&nbsp;no&nbsp;scene&nbsp;data.&nbsp;node&nbsp;is&nbsp;of&nbsp;type&nbsp;osg::group<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;Am&nbsp;21.03.2017&nbsp;um&nbsp;14:42&nbsp;schrieb&nbsp;Robert<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Osfield:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
cite=&quot;mid:CAFN7Y+Wh9TEF__dw1aUF3EQvoHKDnXk2qkN2LdUL6yBJwYKn4A@mail.gmail.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Hi&nbsp;Werner,<br>
<br>
I&nbsp;can't&nbsp;work&nbsp;out&nbsp;what&nbsp;might&nbsp;be&nbsp;wrong&nbsp;form&nbsp;the&nbsp;description.<br>
<br>
In&nbsp;general&nbsp;the&nbsp;ObjectWrapperManager::findWrapper()&nbsp;checks&nbsp;wrappers<br>
that&nbsp;have&nbsp;been&nbsp;registered&nbsp;with&nbsp;it&nbsp;first,&nbsp;then&nbsp;if&nbsp;it&nbsp;fails&nbsp;to&nbsp;find&nbsp;one<br>
then&nbsp;attempts&nbsp;to&nbsp;load&nbsp;plugins&nbsp;that&nbsp;may&nbsp;be&nbsp;able&nbsp;to&nbsp;provide&nbsp;that<br>
wrapper.&nbsp;If&nbsp;the&nbsp;code&nbsp;is&nbsp;getting&nbsp;to&nbsp;the&nbsp;find&nbsp;return&nbsp;then&nbsp;it's&nbsp;an<br>
indication&nbsp;that&nbsp;the&nbsp;wrapper&nbsp;has&nbsp;been&nbsp;found.&nbsp;&nbsp;Given&nbsp;this&nbsp;the<br>
ObjectWrapperManager::findWrapper()&nbsp;code&nbsp;looks&nbsp;correct.<br>
<br>
This&nbsp;review&nbsp;would&nbsp;suggest&nbsp;that&nbsp;the&nbsp;issue&nbsp;is&nbsp;likely&nbsp;elsewhere.&nbsp;&nbsp;What<br>
might&nbsp;be&nbsp;wrong&nbsp;is&nbsp;not&nbsp;something&nbsp;I&nbsp;can&nbsp;say&nbsp;at&nbsp;this&nbsp;stage.&nbsp;&nbsp;Would&nbsp;it&nbsp;be<br>
possible&nbsp;create&nbsp;a&nbsp;test&nbsp;case&nbsp;that&nbsp;reproduces&nbsp;the&nbsp;problem&nbsp;so&nbsp;others&nbsp;can<br>
look&nbsp;into&nbsp;it?<br>
<br>
Robert.<br>
<br>
<br>
On&nbsp;21&nbsp;March&nbsp;2017&nbsp;at&nbsp;13:15,&nbsp;Werner&nbsp;Modenbach&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;mailto:Werner.Modenbach@texion.eu&quot;&gt;&lt;Werner.Modenbach@texion.eu&gt;&lt;/a&gt;&nbsp;wrote:<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Hi&nbsp;Robert,<br>
<br>
I&nbsp;think&nbsp;I&nbsp;catched&nbsp;another&nbsp;problem&nbsp;in&nbsp;version&nbsp;3.4.0.<br>
I&nbsp;try&nbsp;exporting&nbsp;my&nbsp;scene&nbsp;as&nbsp;.osgx&nbsp;file.<br>
But&nbsp;except&nbsp;the&nbsp;xml&nbsp;header&nbsp;nothing&nbsp;is&nbsp;written.<br>
I&nbsp;debuged&nbsp;it&nbsp;and&nbsp;found&nbsp;the&nbsp;following&nbsp;sequence&nbsp;of&nbsp;calls:<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::ref_ptr&lt;osgDB::ReaderWriter&gt;&nbsp;rw&nbsp;=<br>
osgDB::Registry::instance()-&gt;getReaderWriterForExtension(<br>
<br>
<br>
osgDB::getLowerCaseFileExtension(_filename.toStdString()));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!rw.valid())<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;osgDB::ReaderWriter::WriteResult&nbsp;result&nbsp;=&nbsp;rw-&gt;writeNode(_node,<br>
_filename.toStdString());<br>
<br>
-&gt;&nbsp;ReaderWriterOSG2::writeNode(...)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;writeNode(&nbsp;node,&nbsp;fout,&nbsp;local_opt.get()&nbsp;);<br>
<br>
-&gt;&nbsp;ReaderWriterOSG2::writeNode(...)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os.writeObject(&nbsp;&amp;node&nbsp;);&nbsp;CATCH_EXCEPTION(os);<br>
<br>
-&gt;&nbsp;OutputStream::writeObject(...)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(newID)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writeObjectFields(obj);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
-&gt;&nbsp;OutputStream::writeObjectFields(...)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;ObjectWrapper*&nbsp;wrapper&nbsp;=<br>
Registry::instance()-&gt;getObjectWrapperManager()-&gt;findWrapper(&nbsp;name&nbsp;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!wrapper&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSG_WARN&nbsp;&lt;&lt;&nbsp;&quot;OutputStream::writeObject():&nbsp;Unsupported&nbsp;wrapper&nbsp;class<br>
&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;name&nbsp;&lt;&lt;&nbsp;std::endl;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
-&gt;&nbsp;OutputStream::writeObjectFields(...)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;ObjectWrapper*&nbsp;wrapper&nbsp;=<br>
Registry::instance()-&gt;getObjectWrapperManager()-&gt;findWrapper(&nbsp;name&nbsp;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!wrapper&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSG_WARN&nbsp;&lt;&lt;&nbsp;&quot;OutputStream::writeObject():&nbsp;Unsupported&nbsp;wrapper&nbsp;class<br>
&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;name&nbsp;&lt;&lt;&nbsp;std::endl;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
-&gt;&nbsp;ObjectWrapperManager::findWrapper(...)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pluginLib&nbsp;=<br>
osgDB::Registry::instance()-&gt;createLibraryNameForExtension(libName);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<br>
osgDB::Registry::instance()-&gt;loadLibrary(pluginLib)==osgDB::Registry::LOADED<br>
)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;findWrapper(name);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;<br>
<br>
The&nbsp;loadLibrary(...)&nbsp;method&nbsp;returns&nbsp;&quot;PREVIOUSLY_LOADED&quot;&nbsp;and&nbsp;so&nbsp;NULL&nbsp;is<br>
returned&nbsp;and&nbsp;nothing&nbsp;gets&nbsp;written.<br>
<br>
I&nbsp;think&nbsp;that&nbsp;should&nbsp;be&nbsp;different.&nbsp;Am&nbsp;I&nbsp;right?<br>
<br>
-&nbsp;Werner&nbsp;-<br>
<br>
<br>
<br>
_______________________________________________<br>
osg-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;_______________________________________________<br>
osg-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-signature&quot;&gt;--&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;b&gt;TE&lt;span&nbsp;style=&quot;color:red;&quot;&gt;X&lt;/span&gt;ION&nbsp;Software&nbsp;Solutions,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rotter&nbsp;Bruch&nbsp;26a,&nbsp;D-52068&nbsp;Aachen&lt;/b&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Phone:&nbsp;+49&nbsp;241&nbsp;475757-0&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fax:&nbsp;+49&nbsp;241&nbsp;475757-29&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Web:&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://texion.eu&quot;&gt;http://texion.eu&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eMail:&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:info@texion.eu&quot;&gt;info@texion.eu&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
