<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:tahoma,sans-serif;font-size:12.8px&quot;&gt;Riccardo,&lt;/span&gt;&lt;br&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;In&nbsp;my&nbsp;experience&nbsp;VBOs&nbsp;that&nbsp;are&nbsp;too&nbsp;large&nbsp;will&nbsp;reduce&nbsp;performance&nbsp;(on&nbsp;NVIDIA&nbsp;at&nbsp;least).&nbsp;So&nbsp;you&nbsp;need&nbsp;to&nbsp;cap&nbsp;the&nbsp;size&nbsp;you&nbsp;use&nbsp;for&nbsp;each&nbsp;draw&nbsp;call.&nbsp;OSG&#39;s&nbsp;MergeGeometryVisitor&nbsp;has&nbsp;a&nbsp;parameter&nbsp;for&nbsp;&quot;target&nbsp;number&nbsp;of&nbsp;vertices&quot;&nbsp;that&nbsp;defaults&nbsp;to&nbsp;10K&nbsp;per&nbsp;primitive&nbsp;set.&nbsp;On&nbsp;modern&nbsp;cards&nbsp;this&nbsp;can&nbsp;definitely&nbsp;be&nbsp;higher,&nbsp;but&nbsp;if&nbsp;you&nbsp;set&nbsp;it&nbsp;too&nbsp;high&nbsp;(in&nbsp;the&nbsp;millions&nbsp;for&nbsp;example)&nbsp;performance&nbsp;will&nbsp;fall&nbsp;off&nbsp;a&nbsp;cliff.&nbsp;Where&nbsp;exactly&nbsp;depends&nbsp;on&nbsp;the&nbsp;hardware&nbsp;and&nbsp;you&nbsp;will&nbsp;need&nbsp;to&nbsp;experiment&nbsp;to&nbsp;find&nbsp;a&nbsp;good&nbsp;value.&nbsp;Anyway,&nbsp;itÂ &lt;/span&gt;&lt;/font&gt;&lt;span&nbsp;style=&quot;font-size:12.8px;font-family:tahoma,sans-serif&quot;&gt;would&nbsp;be&nbsp;interesting&nbsp;to&nbsp;see&nbsp;whether&nbsp;something&nbsp;like&nbsp;glMultiDrawArrays&nbsp;would&nbsp;exhibit&nbsp;the&nbsp;same&nbsp;behavior.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;Hope&nbsp;this&nbsp;helps.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Glenn&nbsp;Waldron&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Dec&nbsp;2,&nbsp;2016&nbsp;at&nbsp;10:32&nbsp;AM,&nbsp;Riccardo&nbsp;Corsi&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:riccardo.corsi@kairos3d.it&quot;&nbsp;target=&quot;_blank&quot;&gt;riccardo.corsi@kairos3d.it&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;Hi&nbsp;all,&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;I&#39;m&nbsp;trying&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;best&nbsp;geometries&nbsp;and&nbsp;primitive&nbsp;sets&nbsp;layout&nbsp;on&nbsp;a&nbsp;model&nbsp;that&nbsp;I&#39;m&nbsp;using&nbsp;as&nbsp;performance&nbsp;benchmark.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;The&nbsp;model&nbsp;is&nbsp;quite&nbsp;heavy&nbsp;in&nbsp;terms&nbsp;of&nbsp;vertices&nbsp;and&nbsp;polygons,&nbsp;and&nbsp;everything&nbsp;is&nbsp;rendered&nbsp;at&nbsp;the&nbsp;moment&nbsp;with&nbsp;DrawArrays.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;In&nbsp;the&nbsp;attempt&nbsp;to&nbsp;reduce&nbsp;the&nbsp;draw&nbsp;calls,&nbsp;I&#39;ve&nbsp;recombined&nbsp;the&nbsp;primitive&nbsp;sets&nbsp;contained&nbsp;in&nbsp;every&nbsp;geometry&nbsp;into&nbsp;a&nbsp;single&nbsp;primitive&nbsp;set.&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;I&nbsp;expected&nbsp;draw/gpu&nbsp;time&nbsp;to&nbsp;improve,&nbsp;and&nbsp;I&#39;ve&nbsp;found&nbsp;the&nbsp;exact&nbsp;opposite&nbsp;-&nbsp;find&nbsp;attached&nbsp;the&nbsp;2&nbsp;screenshots&nbsp;with&nbsp;the&nbsp;stats&nbsp;(before&nbsp;and&nbsp;after&nbsp;primitives&nbsp;merge).&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;After&nbsp;merging&nbsp;the&nbsp;primitive&nbsp;sets&nbsp;I&#39;ve&nbsp;also&nbsp;tried&nbsp;to&nbsp;force&nbsp;VBO&nbsp;usage&nbsp;instead&nbsp;of&nbsp;display&nbsp;lists,&nbsp;which&nbsp;improve&nbsp;things&nbsp;slightly,&nbsp;but&nbsp;always&nbsp;far&nbsp;worse&nbsp;than&nbsp;before&nbsp;merging.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;Can&nbsp;anyone&nbsp;comment&nbsp;on&nbsp;this&nbsp;result?&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;Thank&nbsp;you,&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;Riccardo&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&gt;osg-users@lists.&lt;wbr&gt;openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.&lt;wbr&gt;org/listinfo.cgi/osg-users-&lt;wbr&gt;openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
