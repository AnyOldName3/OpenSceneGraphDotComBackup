<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;render&nbsp;to&nbsp;texture&nbsp;and&nbsp;read&nbsp;the&nbsp;results&nbsp;with&nbsp;an&nbsp;osg::Image.&nbsp;When&nbsp;I&nbsp;use&nbsp;standard&nbsp;internal&nbsp;formats&nbsp;like&nbsp;GL_RGB&nbsp;it&nbsp;works&nbsp;ok.&nbsp;The&nbsp;problem&nbsp;appears&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;for&nbsp;example&nbsp;use&nbsp;GL_FLOAT&nbsp;with&nbsp;GL_RGB16,&nbsp;etc.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;I&nbsp;get&nbsp;my&nbsp;image&nbsp;back&nbsp;the&nbsp;internal&nbsp;format&nbsp;is&nbsp;not&nbsp;what&nbsp;I&nbsp;want&nbsp;(the&nbsp;one&nbsp;that&nbsp;I&nbsp;set&nbsp;up&nbsp;in&nbsp;the&nbsp;texture)&nbsp;and&nbsp;I&nbsp;see&nbsp;errors&nbsp;like:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;error&nbsp;pixelFormat&nbsp;=&nbsp;805b&lt;br&gt;&lt;/div&gt;&lt;div&gt;ContextData::incrementContextIDUsageCount(0)&nbsp;to&nbsp;2&lt;/div&gt;&lt;div&gt;Warning:&nbsp;detected&nbsp;OpenGL&nbsp;error&nbsp;&#39;invalid&nbsp;value&#39;&nbsp;at&nbsp;after&nbsp;stateset.compileGLObjects&nbsp;in&nbsp;GLObjectsVisitor::apply(osg::StateSet&amp;&nbsp;stateset)&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;is&nbsp;my&nbsp;PBO&nbsp;setup&nbsp;code:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;osg::Camera::RenderTargetImplementation&nbsp;renderTargetImplementation&nbsp;= renderTargetImplementation&nbsp;=&nbsp;osg::Camera::PIXEL_BUFFER;&lt;br&gt;&lt;br&gt; &nbsp; &nbsp;_camera-&gt;setName(label);&lt;br&gt; &nbsp; &nbsp;//&nbsp;viewport&nbsp;set&nbsp;in&nbsp;configure()&nbsp;method&lt;br&gt; &nbsp; &nbsp;_camera-&gt;setClearColor(osg::Vec4(0.,&nbsp;1.,&nbsp;1.,&nbsp;1.));&lt;br&gt; &nbsp; &nbsp;_camera-&gt;setClearMask(GL_COLOR_BUFFER_BIT&nbsp;|&nbsp;GL_DEPTH_BUFFER_BIT);&lt;br&gt; &nbsp; &nbsp;_camera-&gt;setReferenceFrame(osg::Transform::ABSOLUTE_RF);&lt;br&gt; &nbsp; &nbsp;_camera-&gt;setRenderOrder(osg::Camera::POST_RENDER);&lt;br&gt; &nbsp; &nbsp;_camera-&gt;setRenderTargetImplementation(renderTargetImplementation);&lt;br&gt; &nbsp; &nbsp;_camera-&gt;setViewport(new&nbsp;osg::Viewport(0,0,viewport_size.x(),&nbsp;viewport_size.y()));&lt;br&gt; &nbsp; &nbsp;_camera-&gt;getOrCreateStateSet()-&gt;setAttribute(new&nbsp;osg::ClampColor(GL_FALSE,&nbsp;GL_FALSE,&nbsp;GL_FALSE),&nbsp;&lt;br&gt; &nbsp; &nbsp;osg::StateAttribute::ON&nbsp;|&nbsp;osg::StateAttribute::OVERRIDE&nbsp;|&nbsp;osg::StateAttribute::PROTECTED);&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//&nbsp;Render&nbsp;to&nbsp;texture&lt;br&gt; &nbsp; &nbsp;_texture&nbsp;=&nbsp;new&nbsp;osg::Texture2D();&lt;br&gt; &nbsp; &nbsp;_texture-&gt;setTextureSize(viewport_size.x(),&nbsp;viewport_size.y());&lt;br&gt; &nbsp; &nbsp;_texture-&gt;setInternalFormat(GL_RGB16);&lt;br&gt; &nbsp; &nbsp;_texture-&gt;setSourceType(GL_FLOAT);&lt;br&gt; &nbsp; &nbsp;_texture-&gt;setSourceFormat(GL_RGB);&nbsp;&lt;br&gt; &nbsp; &nbsp;_texture-&gt;setFilter(osg::Texture::MIN_FILTER,osg::Texture::NEAREST);&lt;br&gt; &nbsp; &nbsp;_texture-&gt;setFilter(osg::Texture::MAG_FILTER,osg::Texture::NEAREST);&lt;br&gt; &nbsp; &nbsp;_texture-&gt;setWrap(osg::Texture::WRAP_S,osg::Texture::CLAMP_TO_EDGE);&lt;br&gt; &nbsp; &nbsp;_texture-&gt;setWrap(osg::Texture::WRAP_T,osg::Texture::CLAMP_TO_EDGE);&lt;br&gt; &nbsp; &nbsp;_texture-&gt;setWrap(osg::Texture::WRAP_R,osg::Texture::CLAMP_TO_EDGE);&lt;br&gt;&lt;br&gt; &nbsp; &nbsp;//&nbsp;attach&nbsp;the&nbsp;texture&nbsp;and&nbsp;use&nbsp;it&nbsp;as&nbsp;the&nbsp;color&nbsp;buffer.&lt;br&gt; &nbsp; &nbsp;_camera-&gt;attach(osg::Camera::COLOR_BUFFER,&nbsp;_texture);&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;also&nbsp;having&nbsp;trouble&nbsp;with&nbsp;clamped&nbsp;values,&nbsp;when&nbsp;it&nbsp;does&nbsp;work,&nbsp;values&nbsp;are&nbsp;clamped&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,1]&nbsp;although&nbsp;I&nbsp;have&nbsp;disabled&nbsp;clamping.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Anyone&nbsp;knows&nbsp;how&nbsp;to&nbsp;setup&nbsp;a&nbsp;PBO&nbsp;to&nbsp;read&nbsp;unclamped&nbsp;values&nbsp;in&nbsp;non-standard&nbsp;formats&nbsp;(GL_RGBUI16,&nbsp;GL_RGB16F...)?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;this&nbsp;supported&nbsp;in&nbsp;OSG?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Omar.&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;style=&quot;color:#1a1a1a;font-family:Source&nbsp;Sans&nbsp;Pro,Arial,sans-serif!important&quot;&gt;&lt;table&gt;&lt;tbody&gt;&nbsp;<br>
&nbsp;&nbsp;&lt;/tbody&gt;&lt;/table&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
