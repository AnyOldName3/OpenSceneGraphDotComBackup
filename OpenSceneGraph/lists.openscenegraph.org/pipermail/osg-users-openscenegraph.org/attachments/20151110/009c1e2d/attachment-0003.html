<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Kouichi,&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;9&nbsp;November&nbsp;2015&nbsp;at&nbsp;17:35,&nbsp;Kouichi&nbsp;Yoshizawa&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:kouichi.yoshizawa23@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;kouichi.yoshizawa23@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;I&nbsp;see&nbsp;what&nbsp;you&nbsp;mean,&nbsp;but&nbsp;the&nbsp;problem&nbsp;is&nbsp;that&nbsp;I&#39;m&nbsp;already&nbsp;doing&nbsp;the&nbsp;above&nbsp;suggestions&nbsp;and&nbsp;my&nbsp;performance&nbsp;is&nbsp;still&nbsp;far&nbsp;from&nbsp;acceptable&nbsp;so&nbsp;something&nbsp;needs&nbsp;to&nbsp;be&nbsp;done.&nbsp;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Are&nbsp;you&nbsp;100%&nbsp;confident&nbsp;that&nbsp;you&nbsp;are&nbsp;using&nbsp;the&nbsp;most&nbsp;efficient&nbsp;scene&nbsp;graph&nbsp;you&nbsp;can&nbsp;create? &nbsp;I&#39;d&nbsp;be&nbsp;very&nbsp;surprised&nbsp;if&nbsp;this&nbsp;was&nbsp;the&nbsp;case.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However,&nbsp;as&nbsp;you&nbsp;have&nbsp;only&nbsp;ever&nbsp;talked&nbsp;about&nbsp;the&nbsp;chosen&nbsp;solution&nbsp;for&nbsp;the&nbsp;performance&nbsp;problem,&nbsp;and&nbsp;nothing&nbsp;about&nbsp;the&nbsp;actual&nbsp;nature&nbsp;of&nbsp;the&nbsp;scene&nbsp;graph,&nbsp;OS&nbsp;and&nbsp;hardware&nbsp;you&nbsp;are&nbsp;working&nbsp;with&nbsp;there&nbsp;is&nbsp;nothing&nbsp;others&nbsp;can&nbsp;do&nbsp;to&nbsp;help&nbsp;advice&nbsp;on&nbsp;how&nbsp;you&nbsp;might&nbsp;improve&nbsp;things.&lt;br&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Using&nbsp;a&nbsp;separate&nbsp;thread&nbsp;for&nbsp;GPU&nbsp;transfers&nbsp;will&nbsp;enable&nbsp;what&nbsp;Nvidia&nbsp;calls&nbsp;a&nbsp;&quot;copy&nbsp;engine&quot;&nbsp;that&nbsp;can&nbsp;transfer&nbsp;data&nbsp;in&nbsp;parallel&nbsp;with&nbsp;the&nbsp;rendering,&nbsp;something&nbsp;otherwise&nbsp;not&nbsp;possible.&nbsp;This&nbsp;could&nbsp;potentially&nbsp;provide&nbsp;a&nbsp;huge&nbsp;benefit&nbsp;for&nbsp;my&nbsp;application&nbsp;since&nbsp;it&nbsp;is&nbsp;heavy&nbsp;on&nbsp;both&nbsp;rendering&nbsp;and&nbsp;GPU&nbsp;transfers,&nbsp;so&nbsp;I&nbsp;will&nbsp;try&nbsp;to&nbsp;experiment&nbsp;with&nbsp;making&nbsp;it&nbsp;work.&nbsp;So&nbsp;far&nbsp;it&#39;s&nbsp;looking&nbsp;very&nbsp;promising.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Using&nbsp;a&nbsp;separate&nbsp;CPU&nbsp;thread&nbsp;and&nbsp;associated&nbsp;graphics&nbsp;context&nbsp;for&nbsp;uploading&nbsp;data&nbsp;to&nbsp;the&nbsp;GPU&nbsp;won&#39;t&nbsp;actually&nbsp;directly&nbsp;do&nbsp;this,&nbsp;it&#39;ll&nbsp;just&nbsp;provide&nbsp;data&nbsp;to&nbsp;the&nbsp;driver&nbsp;from&nbsp;two&nbsp;threads. &nbsp;The&nbsp;driver&nbsp;will&nbsp;still&nbsp;be&nbsp;doing&nbsp;what&nbsp;it&nbsp;does&nbsp;to&nbsp;manage&nbsp;all&nbsp;these&nbsp;resources&nbsp;and&nbsp;uploading&nbsp;when&nbsp;it&nbsp;can.  &nbsp;If&nbsp;the&nbsp;bottleneck&nbsp;is&nbsp;CPU&nbsp;pre-processing&nbsp;of&nbsp;the&nbsp;data&nbsp;then&nbsp;you&nbsp;&quot;might&quot;&nbsp;see&nbsp;an&nbsp;improvement. &nbsp;However,&nbsp;you&nbsp;might&nbsp;well&nbsp;see&nbsp;worse&nbsp;performance&nbsp;with&nbsp;the&nbsp;driver&nbsp;and&nbsp;hardware&nbsp;being&nbsp;more&nbsp;contended.&lt;br&gt;&lt;br&gt;Using&nbsp;GL&nbsp;buffer&nbsp;objects&nbsp;for&nbsp;data&nbsp;transfer&nbsp;helps&nbsp;the&nbsp;driver&nbsp;in&nbsp;this&nbsp;process&nbsp;and&nbsp;the&nbsp;OSG&nbsp;supports&nbsp;this,&nbsp;the&nbsp;driver&nbsp;can&nbsp;actual&nbsp;start&nbsp;doing&nbsp;async&nbsp;copies&nbsp;where&nbsp;supported&nbsp;even&nbsp;if&nbsp;you&nbsp;are&nbsp;dispatching&nbsp;the&nbsp;GL&nbsp;data/commands&nbsp;from&nbsp;your&nbsp;application&nbsp;single&nbsp;threaded.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Another&nbsp;massive&nbsp;factor&nbsp;in&nbsp;performance&nbsp;when&nbsp;you&nbsp;are&nbsp;pushing&nbsp;a&nbsp;lot&nbsp;of&nbsp;data&nbsp;at&nbsp;the&nbsp;GPU&nbsp;is&nbsp;overall&nbsp;management&nbsp;of&nbsp;GPU&nbsp;memory. &nbsp;The&nbsp;OS/dirver&nbsp;can&nbsp;really&nbsp;start&nbsp;managing&nbsp;things&nbsp;really&nbsp;badly&nbsp;when&nbsp;GPU&nbsp;memory&nbsp;starts&nbsp;getting&nbsp;full. &nbsp;Performance&nbsp;can&nbsp;suddenly&nbsp;drop&nbsp;massive,&nbsp;with&nbsp;big&nbsp;stalls&nbsp;when&nbsp;you&nbsp;start&nbsp;getting&nbsp;near&nbsp;the&nbsp;limits. &nbsp;Using&nbsp;techniques&nbsp;that&nbsp;minimize&nbsp;memory&nbsp;usage&nbsp;and&nbsp;well&nbsp;as&nbsp;memory&nbsp;transfer&nbsp;can&nbsp;be&nbsp;crucial&nbsp;to&nbsp;success. &nbsp;In&nbsp;OSG-3.4&nbsp;I&nbsp;introduced&nbsp;displacement&nbsp;mapping&nbsp;based&nbsp;terrain&nbsp;rendering&nbsp;in&nbsp;osgTerrain&nbsp;that&nbsp;shares&nbsp;geometry&nbsp;data&nbsp;between&nbsp;tiiles&nbsp;specifically&nbsp;to&nbsp;address&nbsp;this&nbsp;issue. &nbsp;While&nbsp;this&nbsp;particular&nbsp;implementation&nbsp;might&nbsp;not&nbsp;be&nbsp;relevant&nbsp;to&nbsp;you&nbsp;the&nbsp;lessons&nbsp;should&nbsp;be&nbsp;applicable. &nbsp;Modern&nbsp;OpenGL/GLSL&nbsp;opens&nbsp;the&nbsp;door&nbsp;to&nbsp;implementing&nbsp;scenes&nbsp;in&nbsp;different&nbsp;more&nbsp;memory&nbsp;efficient&nbsp;ways,&nbsp;it&nbsp;might&nbsp;involve&nbsp;higher&nbsp;GPU&nbsp;computational&nbsp;loads&nbsp;but&nbsp;by&nbsp;removing&nbsp;a&nbsp;bottleneck&nbsp;you&nbsp;can&nbsp;get&nbsp;far&nbsp;higher&nbsp;and&nbsp;more&nbsp;reliable&nbsp;performance.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;I&#39;d&nbsp;advice&nbsp;you&nbsp;look&nbsp;at&nbsp;scene&nbsp;graph&nbsp;itself&nbsp;for&nbsp;optimizations&nbsp;to&nbsp;get&nbsp;the&nbsp;performance&nbsp;you&nbsp;are&nbsp;after.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Robert.&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
