<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;Plamen,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;sounds&nbsp;like&nbsp;Qt&#39;s&nbsp;bad&nbsp;habit&nbsp;of&nbsp;changing&nbsp;OpenGL&nbsp;state&nbsp;for&nbsp;it&#39;s&nbsp;own&nbsp;purposes&nbsp;and&nbsp;not&nbsp;resetting&nbsp;that&nbsp;afterwards&nbsp;is&nbsp;the&nbsp;cause&nbsp;your&nbsp;problems. &nbsp;Unless&nbsp;you&nbsp;specifcally&nbsp;need&nbsp;Qt&nbsp;to&nbsp;create&nbsp;your&nbsp;graphics&nbsp;widow&nbsp;and&nbsp;UI&nbsp;I&nbsp;would&nbsp;recommend&nbsp;not &nbsp;using&nbsp;it,&nbsp;the&nbsp;built&nbsp;in&nbsp;windowing&nbsp;support&nbsp;that&nbsp;the&nbsp;OSG&nbsp;provides&nbsp;will&nbsp;be&nbsp;better&nbsp;suited&nbsp;for&nbsp;the&nbsp;purpose. &nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;you&nbsp;have&nbsp;to&nbsp;use&nbsp;Qt&nbsp;then&nbsp;you&#39;ll&nbsp;need&nbsp;to&nbsp;tell&nbsp;the&nbsp;OSG&nbsp;what&nbsp;state&nbsp;can&#39;t&nbsp;be&nbsp;trusted&nbsp;and&nbsp;needs&nbsp;to&nbsp;be&nbsp;reapplied.&nbsp;I&nbsp;would&nbsp;suggest&nbsp;putting&nbsp;the&nbsp;state&nbsp;dirty&nbsp;calls&nbsp;into&nbsp;the&nbsp;code&nbsp;prior&nbsp;to&nbsp;calling&nbsp;the&nbsp;OSG&#39;s&nbsp;frame, &nbsp;Where&nbsp;best&nbsp;to&nbsp;place&nbsp;this&nbsp;will&nbsp;depend&nbsp;upon&nbsp;how&nbsp;you&#39;ve&nbsp;integrate&nbsp;the&nbsp;OSG. &nbsp;Your&nbsp;own&nbsp;workaround&nbsp;will&nbsp;be&nbsp;doing&nbsp;a&nbsp;form&nbsp;of&nbsp;dirty&nbsp;and&nbsp;probably&nbsp;why&nbsp;it&nbsp;works. &nbsp;There&nbsp;are&nbsp;other&nbsp;methods&nbsp;for&nbsp;dirtying&nbsp;state&nbsp;in&nbsp;osg::State,&nbsp;just&nbsp;search&nbsp;for&nbsp;dirty&nbsp;in&nbsp;the&nbsp;State&nbsp;header.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Robert.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Mon,&nbsp;24&nbsp;Jun&nbsp;2019&nbsp;at&nbsp;11:39,&nbsp;Plamen&nbsp;Terziev&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:plspace@abv.bg&quot;&gt;plspace@abv.bg&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;Hi&nbsp;Robert,&lt;br&gt;<br>
&lt;br&gt;<br>
Sorry&nbsp;for&nbsp;the&nbsp;late&nbsp;reply&nbsp;and&nbsp;thank&nbsp;your&nbsp;for&nbsp;your&nbsp;answer.&lt;br&gt;<br>
&lt;br&gt;<br>
I&#39;ve&nbsp;checked&nbsp;the&nbsp;OSG&nbsp;source&nbsp;and&nbsp;I&nbsp;saw&nbsp;that&nbsp;OSG&nbsp;manages&nbsp;the&nbsp;OpenGL&nbsp;state&nbsp;itself&nbsp;and&nbsp;that&#39;s&nbsp;why&nbsp;if&nbsp;someone&nbsp;(in&nbsp;my&nbsp;case&nbsp;Qt)&nbsp;changes&nbsp;the&nbsp;state&nbsp;then&nbsp;OSG&nbsp;does&nbsp;not&nbsp;know&nbsp;that&nbsp;the&nbsp;state&nbsp;has&nbsp;changed.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;seems&nbsp;to&nbsp;not&nbsp;be&nbsp;a&nbsp;bug&nbsp;in&nbsp;OSG&nbsp;at&nbsp;all.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;I&nbsp;am&nbsp;doing&nbsp;is&nbsp;to&nbsp;call&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;each&nbsp;frame&nbsp;the&nbsp;following:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Code:&lt;br&gt;<br>
&lt;br&gt;<br>
auto&nbsp;state&nbsp;=&nbsp;m_osg-&gt;getCamera()-&gt;getGraphicsContext()-&gt;getState();&lt;br&gt;<br>
state-&gt;lazyDisablingOfVertexAttributes();&lt;br&gt;<br>
state-&gt;applyDisablingOfVertexAttributes();&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;the&nbsp;next&nbsp;frame&nbsp;OSG&nbsp;enables&nbsp;and&nbsp;binds&nbsp;the&nbsp;vertex&nbsp;attributes&nbsp;which&nbsp;fixes&nbsp;the&nbsp;issue.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;not&nbsp;sure&nbsp;my&nbsp;code&nbsp;for&nbsp;invalidating&nbsp;the&nbsp;state&nbsp;is&nbsp;correct.&nbsp;Is&nbsp;there&nbsp;any&nbsp;better&nbsp;way&nbsp;to&nbsp;do&nbsp;this?&lt;br&gt;<br>
&lt;br&gt;<br>
My&nbsp;end&nbsp;goal&nbsp;is&nbsp;to&nbsp;tell&nbsp;OSG&nbsp;that&nbsp;what&nbsp;the&nbsp;OpenGL&nbsp;state&nbsp;is&nbsp;different&nbsp;and&nbsp;to&nbsp;invalidate&nbsp;its&nbsp;state.&lt;br&gt;<br>
&lt;br&gt;<br>
Also&nbsp;I&#39;ve&nbsp;added&nbsp;Mapbox&nbsp;as&nbsp;a&nbsp;OSG&nbsp;drawable&nbsp;node&nbsp;and&nbsp;after&nbsp;Mapbox&nbsp;node&nbsp;renders&nbsp;then&nbsp;the&nbsp;next&nbsp;nodes&nbsp;do&nbsp;not&nbsp;render&nbsp;anymore.&nbsp;Seems&nbsp;that&nbsp;Mapbox&nbsp;is&nbsp;also&nbsp;changing&nbsp;some&nbsp;OpenGL&nbsp;state&nbsp;and&nbsp;OSG&nbsp;is&nbsp;not&nbsp;aware&nbsp;of&nbsp;this.&lt;br&gt;<br>
&lt;br&gt;<br>
Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;tell&nbsp;OSG&nbsp;to&nbsp;invalidate&nbsp;the&nbsp;state&nbsp;between&nbsp;2&nbsp;nodes&nbsp;rendering?&nbsp;I&nbsp;am&nbsp;aware&nbsp;for&nbsp;the&nbsp;performance&nbsp;hit&nbsp;here&nbsp;by&nbsp;calling&nbsp;extra&nbsp;gl&nbsp;calls&nbsp;but&nbsp;this&nbsp;will&nbsp;fix&nbsp;my&nbsp;issues.&lt;br&gt;<br>
&lt;br&gt;<br>
Also&nbsp;is&nbsp;it&nbsp;possible&nbsp;to&nbsp;opt&nbsp;out&nbsp;the&nbsp;entire&nbsp;OSG&nbsp;state&nbsp;management&nbsp;so&nbsp;each&nbsp;frame&nbsp;to&nbsp;really&nbsp;make&nbsp;the&nbsp;OpenGL&nbsp;calls?&lt;br&gt;<br>
&lt;br&gt;<br>
------------------&lt;br&gt;<br>
Read&nbsp;this&nbsp;topic&nbsp;online&nbsp;here:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://forum.openscenegraph.org/viewtopic.php?p=76322#76322&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://forum.openscenegraph.org/viewtopic.php?p=76322#76322&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
