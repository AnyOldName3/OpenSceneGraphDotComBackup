<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Björn,&lt;br&gt;&lt;br&gt;&lt;/div&gt;The&nbsp;driver&nbsp;will&nbsp;be&nbsp;queuing&nbsp;up&nbsp;multiple&nbsp;frames&nbsp;in&nbsp;the&nbsp;FIFO,&nbsp;something&nbsp;it&nbsp;does&nbsp;to&nbsp;help&nbsp;improve&nbsp;the&nbsp;framerate,&nbsp;but&nbsp;increases&nbsp;frame&nbsp;latency. &nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;We&nbsp;aren&#39;t&nbsp;powerless&nbsp;in&nbsp;this&nbsp;though,&nbsp;modern&nbsp;drivers&nbsp;and&nbsp;hardware&nbsp;support&nbsp;putting&nbsp;fences&nbsp;into&nbsp;the&nbsp;pipeline&nbsp;and&nbsp;waiting&nbsp;on&nbsp;these&nbsp;to&nbsp;be&nbsp;completed&nbsp;on&nbsp;the&nbsp;GPU. &nbsp;In&nbsp;the&nbsp;svn/trunk&nbsp;vesion&nbsp;of&nbsp;the&nbsp;OSG&nbsp;you&#39;ll&nbsp;find&nbsp;a&nbsp;swap&nbsp;buffers&nbsp;SyncSwapBuffersCallback&nbsp;implementation&nbsp;that&nbsp;does&nbsp;this&nbsp;for&nbsp;you. &nbsp;You&nbsp;can&nbsp;enable&nbsp;this&nbsp;via&nbsp;the&nbsp;env&nbsp;var&nbsp;OSG_SYNC_SWAP_BUFFERS=ON,&nbsp;or&nbsp;--sync&nbsp;on&nbsp;the&nbsp;command&nbsp;line&nbsp;for&nbsp;examples&nbsp;like&nbsp;osgviewer.&lt;br&gt;&lt;br&gt;&lt;/div&gt;Robert.&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;16&nbsp;April&nbsp;2015&nbsp;at&nbsp;13:59,&nbsp;Björn&nbsp;Blissing&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:bjorn.blissing@vti.se&quot;&nbsp;target=&quot;_blank&quot;&gt;bjorn.blissing@vti.se&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;made&nbsp;some&nbsp;experiments&nbsp;in&nbsp;regards&nbsp;to&nbsp;rendering&nbsp;latency&nbsp;in&nbsp;OpenSceneGraph.&nbsp;I&nbsp;have&nbsp;written&nbsp;a&nbsp;small&nbsp;test&nbsp;program&nbsp;which&nbsp;just&nbsp;shows&nbsp;one&nbsp;quad.&nbsp;During&nbsp;program&nbsp;execution&nbsp;the&nbsp;quad&nbsp;changes&nbsp;color&nbsp;from&nbsp;black&nbsp;to&nbsp;white&nbsp;20&nbsp;times.&nbsp;To&nbsp;my&nbsp;computer&nbsp;I&nbsp;have&nbsp;connected&nbsp;a&nbsp;light-to-voltage&nbsp;sensor&nbsp;which&nbsp;is&nbsp;attached&nbsp;to&nbsp;my&nbsp;monitor,&nbsp;the&nbsp;monitor&nbsp;is&nbsp;an&nbsp;Eizo&nbsp;LCD&nbsp;running&nbsp;in&nbsp;60Hz.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;setup&nbsp;allows&nbsp;me&nbsp;to&nbsp;log&nbsp;the&nbsp;time&nbsp;it&nbsp;takes&nbsp;for&nbsp;me&nbsp;to&nbsp;send&nbsp;a&nbsp;frame&nbsp;with&nbsp;the&nbsp;new&nbsp;quad&nbsp;color&nbsp;to&nbsp;when&nbsp;the&nbsp;light&nbsp;sensor&nbsp;picks&nbsp;up&nbsp;this&nbsp;change.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;results&nbsp;surprised&nbsp;me&nbsp;a&nbsp;bit:&lt;br&gt;<br>
&lt;br&gt;<br>
Running&nbsp;with&nbsp;VSync&nbsp;OFF:&nbsp;min&nbsp;=&nbsp;6ms,&nbsp;max&nbsp;=&nbsp;21ms,&nbsp;mean&nbsp;=&nbsp;14ms&lt;br&gt;<br>
Running&nbsp;with&nbsp;VSync&nbsp;ON:&nbsp;min&nbsp;=&nbsp;81ms,&nbsp;max&nbsp;=&nbsp;96&nbsp;ms,&nbsp;mean&nbsp;=&nbsp;91ms&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;enabling&nbsp;VSync&nbsp;on&nbsp;my&nbsp;Nvidia&nbsp;card&nbsp;gave&nbsp;a&nbsp;increased&nbsp;latency&nbsp;of&nbsp;75&nbsp;ms,&nbsp;almost&nbsp;5&nbsp;full&nbsp;screen&nbsp;refreshes.&lt;br&gt;<br>
&lt;br&gt;<br>
Then&nbsp;I&nbsp;remembered&nbsp;that&nbsp;Robert&nbsp;said&nbsp;something&nbsp;about&nbsp;running&nbsp;OSG&nbsp;single&nbsp;threaded&nbsp;would&nbsp;give&nbsp;the&nbsp;lowest&nbsp;latency.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;I&nbsp;set&nbsp;my&nbsp;application&nbsp;to&nbsp;run&nbsp;as&nbsp;single&nbsp;threaded:&lt;br&gt;<br>
&lt;br&gt;<br>
VSync&nbsp;ON,&nbsp;OSG&nbsp;single&nbsp;threaded&nbsp;mode:&nbsp;min&nbsp;=&nbsp;43ms,&nbsp;max&nbsp;= &nbsp;64ms,&nbsp;mean&nbsp;= &nbsp;57ms&lt;br&gt;<br>
&lt;br&gt;<br>
Still&nbsp;a&nbsp;bit&nbsp;high,&nbsp;almost&nbsp;3&nbsp;full&nbsp;screen&nbsp;refreshes.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;I&nbsp;poked&nbsp;around&nbsp;the&nbsp;NVidia&nbsp;settings&nbsp;with&nbsp;help&nbsp;of&nbsp;the&nbsp;Nvidia&nbsp;Inspector,&nbsp;which&nbsp;gives&nbsp;detailed&nbsp;control.&nbsp;The&nbsp;lowest&nbsp;latency&nbsp;I&nbsp;have&nbsp;been&nbsp;able&nbsp;to&nbsp;reach&nbsp;is&nbsp;with&nbsp;VSync&nbsp;enabled&nbsp;is&nbsp;the&nbsp;following&nbsp;setting&nbsp;combination:&lt;br&gt;<br>
&lt;br&gt;<br>
VSync&nbsp;=&nbsp;ON&lt;br&gt;<br>
Maximum&nbsp;prerendered&nbsp;frames&nbsp;=&nbsp;1&lt;br&gt;<br>
Frame&nbsp;rate&nbsp;limiter&nbsp;=&nbsp;60fps&lt;br&gt;<br>
Threaded&nbsp;optimization&nbsp;=&nbsp;Off&lt;br&gt;<br>
&lt;br&gt;<br>
With&nbsp;these&nbsp;settings&nbsp;I&nbsp;have&nbsp;recorded&nbsp;the&nbsp;following&nbsp;latencies:&lt;br&gt;<br>
&lt;br&gt;<br>
Custom&nbsp;settings:&nbsp;min&nbsp;=&nbsp;17ms,&nbsp;max&nbsp;= &nbsp;42ms,&nbsp;mean&nbsp;= &nbsp;30ms&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;mean&nbsp;difference&nbsp;between&nbsp;VSync&nbsp;OFF&nbsp;and&nbsp;this&nbsp;custom&nbsp;setting&nbsp;is&nbsp;16&nbsp;ms,&nbsp;i.e.&nbsp;about&nbsp;1&nbsp;screen&nbsp;refresh.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;guess&nbsp;it&nbsp;is&nbsp;hard&nbsp;to&nbsp;push&nbsp;the&nbsp;latency&nbsp;any&nbsp;lower.&nbsp;Or&nbsp;is&nbsp;there&nbsp;any&nbsp;other&nbsp;setting&nbsp;which&nbsp;could&nbsp;reduce&nbsp;the&nbsp;latency&nbsp;even&nbsp;further?&lt;br&gt;<br>
&lt;br&gt;<br>
Test&nbsp;have&nbsp;been&nbsp;run&nbsp;on&nbsp;a&nbsp;computer&nbsp;with:&nbsp;Windows&nbsp;7&nbsp;64bit&nbsp;+&nbsp;Nvidia&nbsp;GTX570&nbsp;with&nbsp;driver&nbsp;347.52&nbsp;+&nbsp;OSG&nbsp;3.2.1&lt;br&gt;<br>
&lt;br&gt;<br>
Best&nbsp;regards&lt;br&gt;<br>
Björn&lt;br&gt;<br>
&lt;br&gt;<br>
------------------&lt;br&gt;<br>
Read&nbsp;this&nbsp;topic&nbsp;online&nbsp;here:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://forum.openscenegraph.org/viewtopic.php?p=63433#63433&quot;&nbsp;target=&quot;_blank&quot;&gt;http://forum.openscenegraph.org/viewtopic.php?p=63433#63433&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
