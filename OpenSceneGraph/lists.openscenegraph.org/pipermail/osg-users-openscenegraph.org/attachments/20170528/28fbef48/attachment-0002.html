<tt>
Hi&nbsp;michael,&lt;br&gt;&nbsp;&nbsp;The&nbsp;osg&nbsp;format&nbsp;file&nbsp;can&nbsp;be&nbsp;loaded.&nbsp;The&nbsp;problem&nbsp;has&nbsp;to&nbsp;do&nbsp;with&nbsp;std::istream&nbsp;&gt;&gt;&nbsp;operator&nbsp;reading&nbsp;binary&nbsp;stream.&lt;br/&gt;&lt;br/&gt;------------------&nbsp;原始邮件&nbsp;------------------&lt;br/&gt;&lt;div&nbsp;style=&quot;font-size:&nbsp;12px;&nbsp;background:&nbsp;none&nbsp;repeat&nbsp;scroll&nbsp;0%&nbsp;rgb(239,&nbsp;239,&nbsp;239);&nbsp;padding:&nbsp;8px;&quot;&gt;&lt;div&nbsp;id=&quot;menu_sender&quot;&gt;&lt;b&gt;发件人:&lt;/b&gt;&nbsp;&quot;michael&nbsp;kapelko&quot;&nbsp;&lt;kornerr@gmail.com&gt;;&lt;/div&gt;&lt;div&gt;&lt;b&gt;发送时间:&lt;/b&gt;&nbsp;2017年5月27日(星期六)&nbsp;17:13&lt;/div&gt;&lt;div&gt;&lt;b&gt;收件人:&lt;/b&gt;&nbsp;&quot;OpenSceneGraph&nbsp;Users&quot;&nbsp;&lt;osg-users@lists.openscenegraph.org&gt;;&lt;/div&gt;&lt;div&gt;&lt;b&gt;主题:&lt;/b&gt;&nbsp;Re:&nbsp;[osg-users]&nbsp;A&nbsp;problem&nbsp;with&nbsp;regard&nbsp;to&nbsp;std:istream&nbsp;on&nbsp;Android&lt;/div&gt;&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;Hi.&lt;br&nbsp;&nbsp;/&gt;&lt;br&nbsp;&nbsp;/&gt;Are&nbsp;you&nbsp;sure&nbsp;/sdcard&nbsp;path&nbsp;is&nbsp;valid&nbsp;at&nbsp;all?&nbsp;Different&nbsp;Android&nbsp;versions&lt;br&nbsp;&nbsp;/&gt;use&nbsp;different&nbsp;sdcard&nbsp;paths.&nbsp;Use&nbsp;getExternalStorageDirectory():&lt;br&nbsp;&nbsp;/&gt;https://stackoverflow.com/a/21230946/3404710&lt;br&nbsp;&nbsp;/&gt;Note&nbsp;that&nbsp;you&nbsp;need&nbsp;a&nbsp;special&nbsp;permission&nbsp;to&nbsp;read&nbsp;from&nbsp;external&nbsp;storage,&nbsp;too.&lt;br&nbsp;&nbsp;/&gt;&lt;br&nbsp;&nbsp;/&gt;&lt;br&nbsp;&nbsp;/&gt;2017-05-26&nbsp;13:06&nbsp;GMT+07:00&nbsp;龚来恩&nbsp;&lt;8802661@qq.com&gt;:&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;Hi&nbsp;All,&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;make&nbsp;osgEarth&nbsp;run&nbsp;on&nbsp;Android&nbsp;(OSG&nbsp;3.2&nbsp;&amp;&nbsp;osgEarth&nbsp;2.3).&nbsp;Now&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;the&nbsp;earth&nbsp;can&nbsp;display&nbsp;on&nbsp;Android&nbsp;system.&nbsp;But&nbsp;I&nbsp;run&nbsp;into&nbsp;a&nbsp;problem&nbsp;with&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;regard&nbsp;to&nbsp;std:istream.&nbsp;I&nbsp;tried&nbsp;to&nbsp;load&nbsp;an&nbsp;osgb&nbsp;file&nbsp;by&nbsp;the&nbsp;following&nbsp;code&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;osg::ref_ptr&lt;osg::Node&gt;&nbsp;node&nbsp;=&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;osgDB::readNodeFile(&quot;/sdcard/WV/Models/tk.osgb&quot;);&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;the&nbsp;variable&nbsp;node's&nbsp;value&nbsp;is&nbsp;always&nbsp;be&nbsp;NULL.&nbsp;&nbsp;I&nbsp;step&nbsp;into&nbsp;this&nbsp;line&nbsp;and&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;traced&nbsp;down&nbsp;to&nbsp;file&nbsp;ReaderWriterOSG2.cpp&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;virtual&nbsp;ReadResult&nbsp;readNode(&nbsp;const&nbsp;std::string&amp;&nbsp;file,&nbsp;const&nbsp;Options*&nbsp;options&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;)&nbsp;const&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ReadResult&nbsp;result&nbsp;=&nbsp;ReadResult::FILE_LOADED;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string&nbsp;fileName&nbsp;=&nbsp;file;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::ios::openmode&nbsp;mode&nbsp;=&nbsp;std::ios::in;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options*&nbsp;local_opt&nbsp;=&nbsp;prepareReading(&nbsp;result,&nbsp;fileName,&nbsp;mode,&nbsp;options&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;);&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!result.success()&nbsp;)&nbsp;return&nbsp;result;&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osgDB::ifstream&nbsp;istream(&nbsp;fileName.c_str(),&nbsp;mode&nbsp;);&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;readNode(&nbsp;istream,&nbsp;local_opt&nbsp;);&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;virtual&nbsp;ReadResult&nbsp;readNode(&nbsp;std::istream&amp;&nbsp;fin,&nbsp;const&nbsp;Options*&nbsp;options&nbsp;)&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;const&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::ref_ptr&lt;InputIterator&gt;&nbsp;ii&nbsp;=&nbsp;readInputIterator(fin,&nbsp;options);&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!ii&nbsp;)&nbsp;return&nbsp;ReadResult::FILE_NOT_HANDLED;&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream&nbsp;is(&nbsp;options&nbsp;);&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;is.start(ii.get())!=InputStream::READ_SCENE&nbsp;)&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CATCH_EXCEPTION(is);&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;ReadResult::FILE_NOT_HANDLED;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is.decompress();&nbsp;CATCH_EXCEPTION(is);&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::Node*&nbsp;node&nbsp;=&nbsp;dynamic_cast&lt;osg::Node*&gt;(is.readObject());&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;CATCH_EXCEPTION(is);&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;node;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;the&nbsp;debugger&nbsp;couldn't&nbsp;step&nbsp;into&nbsp;the&nbsp;function&nbsp;readNode(&nbsp;std::istream&amp;&nbsp;fin,&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;const&nbsp;Options*&nbsp;options&nbsp;).&nbsp;But&nbsp;on&nbsp;windows&nbsp;it&nbsp;works.&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;Can&nbsp;anybody&nbsp;tell&nbsp;me&nbsp;how&nbsp;to&nbsp;solve&nbsp;this&nbsp;problem?&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;Dev&nbsp;Environment:&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Visual&nbsp;Studio&nbsp;2017&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Android&nbsp;7.0&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Android&nbsp;NDK64&nbsp;r13b&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arch&nbsp;arm64-v8a&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;Best&nbsp;regards.&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;Glen&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;_______________________________________________&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;osg-users&nbsp;mailing&nbsp;list&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;osg-users@lists.openscenegraph.org&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;_______________________________________________&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;osg-users&nbsp;mailing&nbsp;list&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;osg-users@lists.openscenegraph.org&lt;br&nbsp;&nbsp;/&gt;&gt;&nbsp;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;br&nbsp;&nbsp;/&gt;&gt;&lt;br&nbsp;&nbsp;/&gt;_______________________________________________&lt;br&nbsp;&nbsp;/&gt;osg-users&nbsp;mailing&nbsp;list&lt;br&nbsp;&nbsp;/&gt;osg-users@lists.openscenegraph.org&lt;br&nbsp;&nbsp;/&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;br&nbsp;&nbsp;/&gt;
</tt>
