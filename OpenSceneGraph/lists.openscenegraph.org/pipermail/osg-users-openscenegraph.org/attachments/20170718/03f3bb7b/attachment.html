<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;HI&nbsp;Gianni, &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;faster&nbsp;intersections&nbsp;it&nbsp;is&nbsp;far&nbsp;better&nbsp;to&nbsp;build&nbsp;the&nbsp;kdtree&nbsp;first.&nbsp;Also&nbsp;splitting&nbsp;your&nbsp;huge&nbsp;geometry&nbsp;in&nbsp;several&nbsp;could&nbsp;help&nbsp;to&nbsp;traverse&nbsp;the&nbsp;graph&nbsp;in&nbsp;case&nbsp;you&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;use&nbsp;kdtrees. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers. &lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2017-07-18&nbsp;12:17&nbsp;GMT+02:00&nbsp;Gianni&nbsp;Ambrosio&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:g.ambrosio+osg@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;g.ambrosio+osg@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hi&nbsp;All,&lt;br&gt;<br>
I&nbsp;built&nbsp;a&nbsp;test&nbsp;geometry&nbsp;with&nbsp;about&nbsp;9M&nbsp;triangles&nbsp;and&nbsp;27M&nbsp;vertices.&nbsp;The&nbsp;intent&nbsp;of&nbsp;my&nbsp;spike&nbsp;solution&nbsp;(attached)&nbsp;is&nbsp;to&nbsp;select&nbsp;a&nbsp;triangle&nbsp;with&nbsp;mouse&nbsp;to&nbsp;change&nbsp;its&nbsp;color.&nbsp;I&nbsp;realized&nbsp;that&nbsp;the&nbsp;bottleneck&nbsp;of&nbsp;that&nbsp;code&nbsp;is&nbsp;the&nbsp;line&nbsp;where&nbsp;the&nbsp;camera&nbsp;accepts&nbsp;the&nbsp;&quot;osgUtil::IntersectionVisitor&quot;&nbsp;(line&nbsp;51:&nbsp;camera-&gt;accept(iv)).&nbsp;That&nbsp;call&nbsp;takes&nbsp;most&nbsp;of&nbsp;the&nbsp;computation&nbsp;time.&lt;br&gt;<br>
Debugging&nbsp;the&nbsp;OSG&nbsp;code&nbsp;I&nbsp;fall&nbsp;into:&lt;br&gt;<br>
&lt;br&gt;<br>
void&nbsp;LineSegmentIntersector::&lt;wbr&gt;intersect(osgUtil::&lt;wbr&gt;IntersectionVisitor&amp;&nbsp;iv,&nbsp;osg::Drawable*&nbsp;drawable,&nbsp;const&nbsp;osg::Vec3d&amp;&nbsp;s,&nbsp;const&nbsp;osg::Vec3d&amp;&nbsp;e)&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;that&nbsp;code&nbsp;there&nbsp;are&nbsp;different&nbsp;methods&nbsp;to&nbsp;be&nbsp;used:&nbsp;KdTree,&nbsp;USE_DOUBLE_CALCULATIONS&nbsp;or&nbsp;USE_FLOAT_CALCULATIONS.&lt;br&gt;<br>
On&nbsp;the&nbsp;basis&nbsp;of&nbsp;your&nbsp;experience,&nbsp;is&nbsp;one&nbsp;of&nbsp;the&nbsp;previous&nbsp;method&nbsp;ideal&nbsp;to&nbsp;solve&nbsp;my&nbsp;performance&nbsp;issue&nbsp;or&nbsp;something&nbsp;else&nbsp;must&nbsp;be&nbsp;done?&lt;br&gt;<br>
&lt;br&gt;<br>
Best&nbsp;regards,&lt;br&gt;<br>
Gianni&lt;br&gt;<br>
&lt;br&gt;<br>
------------------&lt;br&gt;<br>
Read&nbsp;this&nbsp;topic&nbsp;online&nbsp;here:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://forum.openscenegraph.org/viewtopic.php?p=71281#71281&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://forum.openscenegraph.&lt;wbr&gt;org/viewtopic.php?p=71281#&lt;wbr&gt;71281&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&gt;osg-users@lists.&lt;wbr&gt;openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.&lt;wbr&gt;org/listinfo.cgi/osg-users-&lt;wbr&gt;openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Jordi&nbsp;Torres&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
