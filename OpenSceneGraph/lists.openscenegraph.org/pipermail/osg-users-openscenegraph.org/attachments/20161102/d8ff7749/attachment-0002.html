<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Community,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;optimize&nbsp;the&nbsp;rendering.&nbsp;Getting&nbsp;huge&nbsp;update&nbsp;numbers. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;story&nbsp;is&nbsp;this:&lt;/div&gt;&lt;div&gt;My&nbsp;scene&nbsp;has&nbsp;huge&nbsp;number&nbsp;of&nbsp;lights,&nbsp;some&nbsp;are&nbsp;static&nbsp;(streetlights)&nbsp;some&nbsp;dynamic&nbsp;(a&nbsp;car).&nbsp;The&nbsp;lighting&nbsp;engine&nbsp;needs&nbsp;the&nbsp;World&nbsp;matrix&nbsp;of&nbsp;a&nbsp;LightSource&nbsp;and&nbsp;the&nbsp;ViewMatrix&nbsp;(which&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;World&nbsp;inverse&nbsp;just&nbsp;with&nbsp;some&nbsp;extra&nbsp;rotation).&nbsp;In&nbsp;my&nbsp;code&nbsp;after&nbsp;the&nbsp;update&nbsp;before&nbsp;the&nbsp;rendering&nbsp;traversal&nbsp;I&nbsp;am&nbsp;updating&nbsp;these&nbsp;matrices&nbsp;each&nbsp;frame&nbsp;and&nbsp;I&nbsp;am&nbsp;about&nbsp;to&nbsp;place&nbsp;this&nbsp;code&nbsp;in&nbsp;my&nbsp;custom&nbsp;CullVisitor&nbsp;(which&nbsp;traverse&nbsp;the&nbsp;scene&nbsp;anyway&nbsp;but&nbsp;only&nbsp;the&nbsp;active&nbsp;children).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;is&nbsp;my&nbsp;approach&nbsp;at&nbsp;the&nbsp;moment:&nbsp;list&nbsp;of&nbsp;light&nbsp;entities&nbsp;and&nbsp;here&nbsp;is&nbsp;how&nbsp;I&nbsp;am&nbsp;computing&nbsp;these:&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://pastebin.com/0A64sc7Y&quot;&gt;http://pastebin.com/0A64sc7Y&lt;/a&gt;&lt;/div&gt;&lt;div&gt;Simply&nbsp;getting&nbsp;the&nbsp;NodePath&nbsp;and&nbsp;computing&nbsp;the&nbsp;world&nbsp;matrix&nbsp;from&nbsp;this&nbsp;node&nbsp;path.&nbsp;This&nbsp;seams&nbsp;to&nbsp;be&nbsp;costly &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;after&nbsp;wiser&nbsp;optimization,&nbsp;to&nbsp;place&nbsp;this&nbsp;in&nbsp;my&nbsp;CullVistor:&nbsp;Here&nbsp;is&nbsp;the&nbsp;snippet:&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://pastebin.com/6dQnih8N&quot;&gt;http://pastebin.com/6dQnih8N&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;These&nbsp;snippets&nbsp;are&nbsp;simple&nbsp;and&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;ask&nbsp;if&nbsp;this&nbsp;is&nbsp;more&nbsp;proper&nbsp;way,&nbsp;which&nbsp;it&nbsp;seams&nbsp;to&nbsp;me&nbsp;since&nbsp;I&nbsp;will&nbsp;gain&nbsp;more&nbsp;performance&nbsp;by&nbsp;updating&nbsp;only&nbsp;the&nbsp;culled&nbsp;and&nbsp;active&nbsp;nodes.&nbsp;Also&nbsp;the&nbsp;math&nbsp;in&nbsp;the&nbsp;cull&nbsp;visitor.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;a&nbsp;lot&nbsp;for&nbsp;any&nbsp;hints,&nbsp;ideas.&nbsp;As&nbsp;always&nbsp;:-) &lt;/div&gt;&lt;div&gt;&lt;br&gt;Cheers,&lt;/div&gt;&lt;div&gt;Nick&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;trajce&nbsp;nikolov&nbsp;nick&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
