<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Ted,&lt;br&gt;&lt;br&gt;&lt;/div&gt;With&nbsp;a&nbsp;quick&nbsp;scan&nbsp;of&nbsp;your&nbsp;post&nbsp;I&nbsp;can&#39;t&nbsp;spot&nbsp;a&nbsp;reason&nbsp;for&nbsp;the&nbsp;redendering&nbsp;order&nbsp;issue,&nbsp;in&nbsp;general&nbsp;I&nbsp;would&nbsp;expect&nbsp;that&nbsp;OSG-3.4&nbsp;will&nbsp;be&nbsp;functioning&nbsp;more&nbsp;correctly&nbsp;than&nbsp;OSG-2.8.x&nbsp;as&nbsp;there&nbsp;have&nbsp;been&nbsp;lots&nbsp;of&nbsp;improvements&nbsp;over&nbsp;the&nbsp;years,&nbsp;sometimes&nbsp;fixes&nbsp;actually&nbsp;mean&nbsp;that&nbsp;something&nbsp;that&nbsp;worked&nbsp;by&nbsp;fluke&nbsp;before&nbsp;no&nbsp;longer&nbsp;works&nbsp;as&nbsp;the&nbsp;OSG&nbsp;is&nbsp;actually&nbsp;doing&nbsp;what&nbsp;the&nbsp;settings&nbsp;are&nbsp;telling&nbsp;it&nbsp;to&nbsp;rather&nbsp;than&nbsp;ignoring&nbsp;them. &nbsp;So&nbsp;spotting&nbsp;the&nbsp;undefined&nbsp;elements&nbsp;may&nbsp;well&nbsp;be&nbsp;key.&lt;br&gt;&lt;br&gt;&lt;/div&gt;As&nbsp;a&nbsp;general&nbsp;note,&nbsp;osgViewer::CompositeViewer&nbsp;should&nbsp;have&nbsp;osgViewer::View&nbsp;attached&nbsp;to&nbsp;it&nbsp;NOT&nbsp;osgViewer::Viewer&nbsp;as&nbsp;you&nbsp;are&nbsp;doing&nbsp;-&nbsp;it&#39;s&nbsp;a&nbsp;composite&nbsp;of&nbsp;View&#39;s&nbsp;not&nbsp;composite&nbsp;of&nbsp;Viewer. &nbsp;If&nbsp;you&nbsp;look&nbsp;at&nbsp;all&nbsp;the&nbsp;OSG&nbsp;example&nbsp;they&nbsp;illustrate&nbsp;the&nbsp;correct&nbsp;usage. &nbsp;It&nbsp;might&nbsp;be&nbsp;that&nbsp;this&nbsp;helps&nbsp;address&nbsp;the&nbsp;problem&nbsp;you&nbsp;are&nbsp;seeing.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;it&nbsp;doesn&#39;t&nbsp;then&nbsp;modifying&nbsp;an&nbsp;existing&nbsp;OSG&nbsp;example&nbsp;to&nbsp;illustrate&nbsp;your&nbsp;usage&nbsp;case&nbsp;and&nbsp;share&nbsp;this&nbsp;as&nbsp;a&nbsp;complete&nbsp;example&nbsp;so&nbsp;that&nbsp;others&nbsp;can&nbsp;reproduce&nbsp;the&nbsp;problem&nbsp;first&nbsp;hand.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;Robert.&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;30&nbsp;November&nbsp;2015&nbsp;at&nbsp;16:39,&nbsp;ted&nbsp;morris&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:ted.morris@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ted.morris@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&gt;Greetings&nbsp;OSG&#39;ers.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;program&nbsp;which&nbsp;utilizes&nbsp;CompositeViewer&nbsp;to&nbsp;render&nbsp;a&nbsp;&quot;corner&nbsp;window&quot;&nbsp;view&nbsp;of&nbsp;my&nbsp;scene&nbsp;graph,&nbsp;within&nbsp;a&nbsp;bigger&nbsp;main&nbsp;window&nbsp;view.&nbsp;To&nbsp;achieve&nbsp;a&nbsp;boarder&nbsp;effect&nbsp;around&nbsp;the&nbsp;corner&nbsp;window&nbsp;viewport,&nbsp;a&nbsp;HUD&nbsp;overlay&nbsp;used&nbsp;to&nbsp;render&nbsp;a&nbsp;grey&nbsp;box&nbsp;underneath&nbsp;the&nbsp;2nd&nbsp;view&nbsp;corner&nbsp;window. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;worked&nbsp;without&nbsp;a&nbsp;hitch&nbsp; in&nbsp;an&nbsp;older&nbsp;version,&nbsp;2.8.5&nbsp;win32&nbsp;of&nbsp;OpenSceneGraph&nbsp;(build&nbsp;with&nbsp;VisualStudio).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;when&nbsp;I&nbsp;recompiled&nbsp;the&nbsp;program&nbsp;with&nbsp;a&nbsp;later&nbsp;built&nbsp;version&nbsp;(CMake.exe/VS&nbsp;2013),&nbsp;I&nbsp;get&nbsp;rather&nbsp;strange&nbsp;object&nbsp;rendering&nbsp;order&nbsp;problems&nbsp;with&nbsp;the&nbsp;objects&nbsp;in&nbsp;the&nbsp;same&nbsp;scene&nbsp;graph&nbsp;with&nbsp;the&nbsp;**2nd,&nbsp;corner&nbsp;window**&nbsp; of&nbsp;the&nbsp;osgCompositeViewer. &nbsp;The&nbsp;**first&nbsp;main&nbsp;window**&nbsp;renders&nbsp;perfectly&nbsp;fine.&nbsp;The&nbsp;essence&nbsp;of&nbsp;the&nbsp;code&nbsp;is&nbsp;below.&nbsp;A&nbsp;lot&nbsp;of&nbsp;extra&nbsp;code&nbsp; is&nbsp;used&nbsp;for&nbsp;determining&nbsp;the&nbsp;appropriate&nbsp;window&nbsp;and&nbsp;HUD&nbsp;boarder&nbsp;&#39;frame&#39;&nbsp;dimensions&nbsp;and&nbsp;camera&nbsp;view&nbsp;frustums,&nbsp;but&nbsp;barring&nbsp;that,&nbsp; it&nbsp;is&nbsp;pretty&nbsp;straight&nbsp;forward&nbsp;and&nbsp;not&nbsp;much&nbsp;to&nbsp;it,&nbsp;I&nbsp;think.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To&nbsp;simplify&nbsp;the&nbsp;code&nbsp;a&nbsp;little&nbsp;bit&nbsp;for&nbsp;brevity,&nbsp;I&nbsp;have&nbsp;the&nbsp;removed&nbsp;Trackball&nbsp;code&nbsp;because&nbsp;with&nbsp;much&nbsp;testing&nbsp;on&nbsp;various&nbsp;configurations&nbsp;this&nbsp;doesn&#39;t&nbsp;change&nbsp;the&nbsp;observed&nbsp;behavior&nbsp;anyway&nbsp;(nor&nbsp;does&nbsp;any&nbsp;lighting&nbsp;mode). &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;did&nbsp;try&nbsp;clone(osg::CopyOp::SHALLOW_COPY)&nbsp;of&nbsp;the&nbsp;entire&nbsp;scene&nbsp;graph&nbsp;model,&nbsp;and&nbsp;even&nbsp;re-creating&nbsp;parts&nbsp;ofit&nbsp;from&nbsp;scratch&nbsp;and&nbsp;the&nbsp;same&lt;/div&gt;&lt;div&gt;strange&nbsp;rendering&nbsp;order&nbsp;behavior&nbsp;resulted.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;Any&nbsp;advice&nbsp;or&nbsp;insights&nbsp;would&nbsp;be&nbsp;greatly&nbsp;appreciated,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;thanks&nbsp;all,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;ted&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;snip&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;.&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;.&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;.&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;//&nbsp;osgViewers&nbsp;decl&nbsp;on&nbsp;the&nbsp;heap&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::ref_ptr&lt;osgViewer::Viewer&gt;&nbsp; m_viewer;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;osg::ref_ptr&lt;osgViewer::Viewer&gt;&nbsp; m_OVERLAYviewer;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;osg::ref_ptr&lt;osgViewer::CompositeViewer&gt;&nbsp; m_dualviewer;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;osg::Camera&nbsp; *&nbsp;m_HUDcam;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;//&nbsp;view&nbsp;manipulators&nbsp;configured&nbsp;and&nbsp;constrained&nbsp;as&nbsp;appropriate...&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;//&nbsp;&lt;--&nbsp;code&nbsp;removed&nbsp;for&nbsp;brevity...&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;osgGA::NodeTrackerManipulator&nbsp; &nbsp;*&nbsp;m_Camera_followcar;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;osgGA::NodeTrackerManipulator::TrackerMode&nbsp; &nbsp;m_trackerMode;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;osgGA::NodeTrackerManipulator::RotationMode&nbsp; m_rotationMode;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;osgGA::TrackballManipulator&nbsp; *&nbsp;m_tbm;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;//&nbsp;NOTE:&nbsp;gw&nbsp;is&nbsp;a&nbsp;wxWidgets&nbsp;OpenGL&nbsp;context&nbsp;canvas&nbsp;set&nbsp;up&nbsp;earlier...&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_viewer-&gt;getCamera()-&gt;setGraphicsContext(gw);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_viewer-&gt;getCamera()-&gt;setClearColor(osg::Vec4(153./0xff,&nbsp;216./0xff,&nbsp;238./0xff,&nbsp;1.0));&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;//&nbsp;use&nbsp;CullMask&nbsp;to&nbsp;hide&nbsp;rendering&nbsp;of&nbsp;specific&nbsp;nodes&nbsp;in&nbsp;the&nbsp;scene&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;m_viewer-&gt;getCamera()-&gt;setCullMask(0x04); &lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_viewer-&gt;getCamera()-&gt;setComputeNearFarMode(osg::CullSettings::DO_NOT_COMPUTE_NEAR_FAR);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;//&nbsp;create&nbsp;a&nbsp;camera&nbsp;to&nbsp;set&nbsp;up&nbsp;the&nbsp;projection&nbsp;and&nbsp;model&nbsp;view&nbsp;matrices,&nbsp;and&nbsp;the&nbsp;subgraph&nbsp;to&nbsp;drawn&nbsp;in&nbsp;the&nbsp;HUD&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;osg::Camera*&nbsp;camera&nbsp;=&nbsp;new&nbsp;osg::Camera;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;//&nbsp;set&nbsp;the&nbsp;projection&nbsp;matrix&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;//camera-&gt;setProjectionMatrix(osg::Matrix::ortho2D(0,1280,0,1024));&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_width_fraction_of_mainW&nbsp; =&nbsp;0.225;&nbsp; //&nbsp;0.25;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;m_height_fraction_of_mainW&nbsp;=&nbsp;0.275;&nbsp;//(1.0/3.0);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;//&nbsp;ll&nbsp;=&gt;&nbsp;&quot;lower&nbsp;left&quot;,&nbsp;ur&nbsp;=&gt;&nbsp;&quot;upper&nbsp;right&quot;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;int&nbsp;xll&nbsp;=&nbsp;-(int)(m_width_fraction_of_mainW&nbsp; *&nbsp;m_viewersize.GetX())/2;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;int&nbsp;yll&nbsp;=&nbsp;-(int)(m_height_fraction_of_mainW&nbsp;*&nbsp;m_viewersize.GetY())/2;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;int&nbsp;yur&nbsp;=&nbsp;-yll;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;double&nbsp;left&nbsp;=&nbsp;(double)xll/(double)(yur-yll);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;double&nbsp;right&nbsp;=&nbsp;-left;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;double&nbsp;bottom&nbsp;=&nbsp;-0.5;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;double&nbsp;top&nbsp;=&nbsp;0.5;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;double&nbsp;zfar&nbsp;=&nbsp;13000.0;&nbsp;//&nbsp;make&nbsp;arbitrarily&nbsp;huge&nbsp;...&nbsp;but&nbsp;not&nbsp;too&nbsp;big&nbsp;so&nbsp;for&nbsp;things&nbsp;like&nbsp;a&nbsp;skydome&nbsp;won&#39;t&nbsp;get&nbsp;clipped&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;double&nbsp;znear&nbsp;=&nbsp;4.5;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;//&nbsp;scale&nbsp;everything&nbsp;so&nbsp;clipping&nbsp;plane&nbsp;is&nbsp;about&nbsp;0.25&nbsp;meters&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;double&nbsp;scale_fac&nbsp;=&nbsp;0.5/znear;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;znear&nbsp; *=&nbsp;scale_fac;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;left&nbsp; &nbsp;*=&nbsp;scale_fac;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;right&nbsp; *=&nbsp;scale_fac;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;top&nbsp; &nbsp; *=&nbsp;scale_fac;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;bottom&nbsp;*=&nbsp;scale_fac;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;camera-&gt;setClearMask(GL_COLOR_BUFFER_BIT&nbsp;|&nbsp;GL_DEPTH_BUFFER_BIT);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;//&nbsp;draw&nbsp;subgraph&nbsp;after&nbsp;main&nbsp;camera&nbsp;view.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;//&nbsp;we&nbsp;don&#39;t&nbsp;want&nbsp;the&nbsp;camera&nbsp;to&nbsp;grab&nbsp;event&nbsp;focus&nbsp;from&nbsp;the&nbsp;viewers&nbsp;main&nbsp;camera(s).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;//camera-&gt;setAllowEventFocus(true);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;camera-&gt;setAllowEventFocus(false);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;double&nbsp;cornerX0&nbsp;=&nbsp;1.0&nbsp;-&nbsp;m_width_fraction_of_mainW;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;double&nbsp;cornerY0&nbsp;=&nbsp;1.0&nbsp;-&nbsp;m_height_fraction_of_mainW;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;camera-&gt;setViewport( &lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(int)(&nbsp;cornerX0&nbsp;*&nbsp;m_viewersize.GetX()+5&nbsp;),&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(int)(&nbsp;cornerY0&nbsp;*&nbsp;m_viewersize.GetY()+5&nbsp;),&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&nbsp;(int)(&nbsp;m_width_fraction_of_mainW&nbsp;*&nbsp; m_viewersize.GetX()-5&nbsp;),&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&nbsp;(int)(&nbsp;m_height_fraction_of_mainW&nbsp;*&nbsp;m_viewersize.GetY()-5&nbsp;) &lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;zfar&nbsp;=&nbsp;10000;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;camera-&gt;setProjectionMatrixAsFrustum(left,right,&nbsp;bottom,&nbsp;top,&nbsp;znear,&nbsp;zfar);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;camera-&gt;setComputeNearFarMode(osg::CullSettings::DO_NOT_COMPUTE_NEAR_FAR);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;camera-&gt;setGraphicsContext(gw);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;camera-&gt;setCullMask(0x02);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;camera-&gt;setRenderOrder(osg::Camera::POST_RENDER,1);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;//&nbsp;=false:&nbsp;we&nbsp;don&#39;t&nbsp;want&nbsp;the&nbsp;camera&nbsp;to&nbsp;grab&nbsp;event&nbsp;focus&nbsp;from&nbsp;the&nbsp;viewers&nbsp;main&nbsp;camera(s).&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;camera-&gt;setAllowEventFocus(true);&nbsp;//(false);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;m_OVERLAYviewer-&gt;setCamera(camera);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_OVERLAYviewer-&gt;getCamera()-&gt;setGraphicsContext(gw);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;//&nbsp;&lt;!--&nbsp;basic&nbsp;NodeTracker&nbsp;manipulator&nbsp;code&nbsp;removed&nbsp;for&nbsp;brevety...&nbsp;--&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_Camera_followcar&nbsp;=&nbsp;new&nbsp;osgGA::NodeTrackerManipulator;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;.&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;.&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;.&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;//&nbsp;set&nbsp;up&nbsp;the&nbsp;scene&nbsp;for&nbsp;the&nbsp;camera&nbsp;and&nbsp;camera&nbsp;view&nbsp;using&nbsp;the&nbsp;loaded&nbsp;scene&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;//&nbsp;model&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;m_OVERLAYviewer-&gt;setSceneData(themodel);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;//&nbsp;try&nbsp;HUD&nbsp;slave&nbsp;cam&nbsp;for&nbsp;drawing&nbsp;a&nbsp;boarder&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_HUDcam&nbsp;=&nbsp;new&nbsp;osg::Camera;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;//HUDcam-&gt;setProjectionMatrixAsOrtho(0.5*xll,0.5*xur,0.5*yll,&nbsp;0.5*yur,&nbsp;-1000.0,1000.0);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_HUDcam-&gt;setProjectionMatrix(&nbsp;osg::Matrix::ortho2D(0,&nbsp;m_viewersize.GetX(),0,&nbsp;m_viewersize.GetY()));&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;//&nbsp;don&#39;t&nbsp;let&nbsp;other&nbsp;cam&nbsp;influence&nbsp;this&nbsp;camera&#39;s&nbsp;transform&nbsp;view&nbsp;matrix&nbsp; &nbsp; &lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;m_HUDcam-&gt;setReferenceFrame(osg::Transform::ABSOLUTE_RF);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp;  &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;//&nbsp;only&nbsp;clear&nbsp;the&nbsp;depth&nbsp;buffer&nbsp;for&nbsp;HUD,&nbsp;so&nbsp;other&nbsp;pixels&nbsp;behind&nbsp;it&nbsp;don&#39;t&nbsp;get&nbsp;erased.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;m_HUDcam-&gt;setClearMask(GL_DEPTH_BUFFER_BIT);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;//&nbsp;draw&nbsp;subgraph&nbsp;after&nbsp;main&nbsp;camera&nbsp;view.&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;m_HUDcam-&gt;setRenderOrder(osg::Camera::POST_RENDER,0);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_HUDcam-&gt;setAllowEventFocus(false);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;//&nbsp;create&nbsp;the&nbsp;frame&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;osg::MatrixTransform&nbsp;*&nbsp;matrixtransfm&nbsp;=&nbsp;new&nbsp;osg::MatrixTransform;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;matrixtransfm-&gt;setMatrix(osg::Matrix::identity());&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;//&nbsp;create&nbsp;the&nbsp;Geode&nbsp;(Geometry&nbsp;Node)&nbsp;to&nbsp;contain&nbsp;all&nbsp;our&nbsp;osg::Geometry&nbsp;objects.&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;osg::Geode*&nbsp;geode&nbsp;=&nbsp;new&nbsp;osg::Geode();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;osg::StateSet*&nbsp;stateset&nbsp;=&nbsp;geode-&gt;getOrCreateStateSet();&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;stateset-&gt;setMode(GL_LIGHTING,osg::StateAttribute::OFF);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;matrixtransfm-&gt;addChild(geode);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;osg::ref_ptr&lt;osg::Vec4Array&gt;&nbsp;shared_colors&nbsp;=&nbsp;new&nbsp;osg::Vec4Array;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;shared_colors-&gt;push_back(osg::Vec4(0.75f,0.75f,0.75f,1.0f));&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;//&nbsp;same&nbsp;trick&nbsp;for&nbsp;shared&nbsp;normal.&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;osg::ref_ptr&lt;osg::Vec3Array&gt;&nbsp;shared_normals&nbsp;=&nbsp;new&nbsp;osg::Vec3Array;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;shared_normals-&gt;push_back(osg::Vec3(0.0f,-1.0f,0.0f));&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;//&nbsp;create&nbsp;POLYGON&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;create&nbsp;Geometry&nbsp;object&nbsp;to&nbsp;store&nbsp;all&nbsp;the&nbsp;vertices&nbsp;and&nbsp;lines&nbsp;primitive.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;osg::Geometry*&nbsp;polyGeom&nbsp;=&nbsp;new&nbsp;osg::Geometry();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp;  &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;this&nbsp;time&nbsp;we&#39;ll&nbsp;a&nbsp;C&nbsp;arrays&nbsp;to&nbsp;initialize&nbsp;the&nbsp;vertices.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;note,&nbsp;anticlockwise&nbsp;ordering.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;note&nbsp;II,&nbsp;OpenGL&nbsp;polygons&nbsp;must&nbsp;be&nbsp;convex&nbsp;plan&nbsp;polygons,&nbsp;otherwise &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;undefined&nbsp;results&nbsp;will&nbsp;occur. &nbsp;If&nbsp;you&nbsp;have&nbsp;concave&nbsp;polygons&nbsp;or&nbsp;ones&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;that&nbsp;cross&nbsp;over&nbsp;themselves&nbsp;then&nbsp;use&nbsp;the&nbsp;osgUtil::Tessellator&nbsp;to&nbsp;fix&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;the&nbsp;polygons&nbsp;into&nbsp;a&nbsp;set&nbsp;of&nbsp;valid&nbsp;polygons.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;double&nbsp;xll&nbsp;=&nbsp; -2.0;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;double&nbsp;yll&nbsp;=&nbsp; -2.0;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;double&nbsp;xlr&nbsp;=&nbsp; m_width_fraction_of_mainW&nbsp; *&nbsp;m_viewersize.GetX()+2;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;double&nbsp;yur&nbsp;=&nbsp; m_height_fraction_of_mainW&nbsp;*&nbsp;m_viewersize.GetY()+2;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;osg::Vec3&nbsp;myCoords[]&nbsp;=&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;{&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::Vec3(&nbsp;xll,yll,&nbsp;0),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::Vec3(&nbsp;xlr,&nbsp;yll,&nbsp;0),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::Vec3(&nbsp;xlr,&nbsp;yur,&nbsp;0),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::Vec3(xll,&nbsp;yur,&nbsp;0)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;};&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_HUDxaxis&nbsp;=&nbsp;xlr&nbsp;-&nbsp;xll;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_HUDyaxis&nbsp;=&nbsp;yur&nbsp;-&nbsp;yll;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;int&nbsp;numCoords&nbsp;=&nbsp;sizeof(myCoords)/sizeof(osg::Vec3);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp;  &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;osg::Vec3Array*&nbsp;vertices&nbsp;=&nbsp;new&nbsp;osg::Vec3Array(numCoords,myCoords);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;pass&nbsp;the&nbsp;created&nbsp;vertex&nbsp;array&nbsp;to&nbsp;the&nbsp;points&nbsp;geometry&nbsp;object.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;polyGeom-&gt;setVertexArray(vertices);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp;  &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;use&nbsp;the&nbsp;shared&nbsp;color&nbsp;array.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;polyGeom-&gt;setColorArray(shared_colors.get());&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;polyGeom-&gt;setColorBinding(osg::Geometry::BIND_OVERALL);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp;  &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;use&nbsp;the&nbsp;shared&nbsp;normal&nbsp;array.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;polyGeom-&gt;setNormalArray(shared_normals.get());&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;polyGeom-&gt;setNormalBinding(osg::Geometry::BIND_OVERALL);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;This&nbsp;time&nbsp;we&nbsp;simply&nbsp;use&nbsp;primitive,&nbsp;and&nbsp;hardwire&nbsp;the&nbsp;number&nbsp;of&nbsp;coords&nbsp;to&nbsp;use &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;since&nbsp;we&nbsp;know&nbsp;up&nbsp;front,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;polyGeom-&gt;addPrimitiveSet(new&nbsp;osg::DrawArrays(osg::PrimitiveSet::POLYGON,0,numCoords));&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;add&nbsp;the&nbsp;points&nbsp;geometry&nbsp;to&nbsp;the&nbsp;geode.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;geode-&gt;addDrawable(polyGeom);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;}&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;matrixtransfm-&gt;setMatrix(osg::Matrix::translate(-200.0,-200.0,0.0));&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;m_HUDcam-&gt;addChild(matrixtransfm);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_HUDcam-&gt;setViewport(&nbsp; 0&nbsp;,0,&nbsp;m_viewersize.GetX(),&nbsp;m_viewersize.GetY());&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_HUDcam-&gt;setGraphicsContext(gw);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_viewer-&gt;addSlave(m_HUDcam,&nbsp;false);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;//&nbsp;&lt;!--&nbsp;basic&nbsp;trackball&nbsp;manipulator&nbsp;code&nbsp;removed&nbsp;for&nbsp;brevety...&nbsp;--&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_tbm&nbsp;=&nbsp;new&nbsp;osgGA::TrackballManipulator;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;.&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;.&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;//&nbsp;take&nbsp;the&nbsp;loaded&nbsp;scene&nbsp;graph,&nbsp;&quot;themodel&quot;&nbsp;and&nbsp;associate&nbsp;with&nbsp;the&nbsp;&#39;main&nbsp;window&#39;&nbsp;osgViewer&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_viewer-&gt;setSceneData(themodel);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_viewer-&gt;getCamera()-&gt;setViewport(0,0,m_viewersize.GetWidth(),m_viewersize.GetHeight());&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;m_viewer-&gt;addEventHandler(new&nbsp;osgViewer::StatsHandler);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;m_viewer-&gt;setThreadingModel(osgViewer::Viewer::SingleThreaded);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt; &nbsp; &nbsp;double&nbsp;zfocal&nbsp;=&nbsp;1.5;&nbsp;//&nbsp;w.r.t&nbsp;normalized&nbsp;screen&nbsp;coords&nbsp;were&nbsp;min/max&nbsp;vertical=&nbsp;-0.5/+0.5&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;this-&gt;AdjustPerspective(zfocal);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;int&nbsp;width&nbsp;=&nbsp;m_viewersize.GetWidth();&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_dualviewer&nbsp;=&nbsp;new&nbsp;osgViewer::CompositeViewer;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_dualviewer-&gt;addView(m_viewer);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;m_dualviewer-&gt;addView(m_OVERLAYviewer);&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;snip&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
