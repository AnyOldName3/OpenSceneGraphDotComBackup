<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&gt;<br>
&lt;div&gt;Hi,&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;I&nbsp;have&nbsp;an&nbsp;application&nbsp;that&nbsp;takes&nbsp;a&nbsp;snapshot&nbsp;of&nbsp;the&nbsp;scene&nbsp;using&nbsp;setPostDrawCallback(capture),&nbsp;which&nbsp;gets&nbsp;the&nbsp;image&nbsp;and&nbsp;writes&nbsp;it&nbsp;to&nbsp;a&nbsp;file&nbsp;but&nbsp;on&nbsp;completion&nbsp;setting&nbsp;setPostDrawCallback(NULL)&nbsp;crashes&nbsp;on&nbsp;the&nbsp;next&nbsp;expose.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;pre&gt;#4&nbsp;&nbsp;0x00007f681bf08520&nbsp;in&nbsp;&lt;signal&nbsp;handler&nbsp;called&gt;&nbsp;()&nbsp;at&nbsp;/lib/x86_64-linux-gnu/libc.so.6&lt;/pre&gt;<br>
&lt;pre&gt;#5&nbsp;&nbsp;0x00007f681db87260&nbsp;in&nbsp;osgUtil::RenderStage::draw(osg::RenderInfo&amp;,&nbsp;osgUtil::RenderLeaf*&amp;)&nbsp;()&nbsp;at&nbsp;/usr/local/lib/libosgUtil.so.161&lt;/pre&gt;<br>
&lt;pre&gt;#6&nbsp;&nbsp;0x00007f681db92f2c&nbsp;in&nbsp;osgUtil::SceneView::draw()&nbsp;()&nbsp;at&nbsp;/usr/local/lib/libosgUtil.so.161&lt;/pre&gt;<br>
&lt;pre&gt;#7&nbsp;&nbsp;0x00007f681d69b6b6&nbsp;in&nbsp;osgViewer::Renderer::cull_draw()&nbsp;()&nbsp;at&nbsp;/usr/local/lib/libosgViewer.so.161&lt;/pre&gt;<br>
&lt;pre&gt;#8&nbsp;&nbsp;0x00007f681edaa479&nbsp;in&nbsp;osg::GraphicsContext::runOperations()&nbsp;()&nbsp;at&nbsp;/usr/local/lib/libosg.so.161&lt;/pre&gt;<br>
&lt;pre&gt;#9&nbsp;&nbsp;0x00007f681d6d5bfd&nbsp;in&nbsp;osgViewer::ViewerBase::renderingTraversals()&nbsp;()&nbsp;at&nbsp;/usr/local/lib/libosgViewer.so.161&lt;/pre&gt;<br>
&lt;pre&gt;#10&nbsp;0x00007f6835a03b37&nbsp;in&nbsp;OSGGTKDrawingArea::_expose_event(_GtkGLArea*,&nbsp;_GdkGLContext*)&nbsp;(this=0x5575767c6450,&nbsp;area=0x557576c4c2e0,&nbsp;context=0x557576c50580)&nbsp;at&nbsp;osggtkdrawingarea.cpp:83&lt;/pre&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;Even&nbsp;if&nbsp;I&nbsp;do&nbsp;nothing&nbsp;in&nbsp;the&nbsp;capture&nbsp;callback&nbsp;it&nbsp;still&nbsp;crashes.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;I've&nbsp;looked&nbsp;through&nbsp;the&nbsp;OSG&nbsp;examples&nbsp;but&nbsp;nothing&nbsp;sets&nbsp;the&nbsp;postdraw&nbsp;or&nbsp;finaldraw&nbsp;callbacks&nbsp;to&nbsp;NULL,&nbsp;both&nbsp;produce&nbsp;the&nbsp;same&nbsp;crash.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;This&nbsp;code&nbsp;has&nbsp;remained&nbsp;unchanged&nbsp;for&nbsp;10&nbsp;years&nbsp;but&nbsp;wasn't&nbsp;being&nbsp;used&nbsp;so&nbsp;the&nbsp;crash&nbsp;only&nbsp;came&nbsp;to&nbsp;light&nbsp;recently.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;I'm&nbsp;using&nbsp;OSG&nbsp;I&nbsp;built&nbsp;from&nbsp;source&nbsp;but&nbsp;I&nbsp;also&nbsp;tried&nbsp;it&nbsp;with&nbsp;libopenscenegraph161/jammy&nbsp;on&nbsp;Ubuntu&nbsp;and&nbsp;it&nbsp;still&nbsp;crashes&nbsp;-&nbsp;but&nbsp;strangely&nbsp;doesn't&nbsp;render&nbsp;an&nbsp;image&nbsp;but&nbsp;that's&nbsp;a&nbsp;problem&nbsp;for&nbsp;another&nbsp;day.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;pre&gt;ldd&nbsp;./qd3d/nyb/.libs/nyb-2108.1.1&nbsp;|&nbsp;grep&nbsp;osg&lt;/pre&gt;<br>
&lt;pre&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libosg.so.161&nbsp;=&gt;&nbsp;/usr/local/lib/libosg.so.161&nbsp;(0x00007faab9200000)&lt;/pre&gt;<br>
&lt;pre&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libosgDB.so.161&nbsp;=&gt;&nbsp;/usr/local/lib/libosgDB.so.161&nbsp;(0x00007faab8e00000)&lt;/pre&gt;<br>
&lt;pre&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libosgGA.so.161&nbsp;=&gt;&nbsp;/usr/local/lib/libosgGA.so.161&nbsp;(0x00007faab8a00000)&lt;/pre&gt;<br>
&lt;pre&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libosgText.so.161&nbsp;=&gt;&nbsp;/usr/local/lib/libosgText.so.161&nbsp;(0x00007faab8600000)&lt;/pre&gt;<br>
&lt;pre&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libosgUtil.so.161&nbsp;=&gt;&nbsp;/usr/local/lib/libosgUtil.so.161&nbsp;(0x00007faab8000000)&lt;/pre&gt;<br>
&lt;pre&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libosgViewer.so.161&nbsp;=&gt;&nbsp;/usr/local/lib/libosgViewer.so.161&nbsp;(0x00007faab7c00000)&lt;/pre&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;Any&nbsp;ideas?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;Cheers,&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
