<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;Ivar,&lt;/div&gt;&lt;div&gt;Your&nbsp;call&nbsp;to&nbsp;Camera::attach&nbsp;is&nbsp;wrong,&nbsp;requesting&nbsp;anything&nbsp;other&nbsp;than&nbsp;0&nbsp;for&nbsp;multisampleSamples&nbsp;will&nbsp;cause&nbsp;the&nbsp;setup&nbsp;to&nbsp;fail.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;backgroundCamera-&gt;attach(osg::Camera::COLOR_BUFFER,&nbsp;tex.get(),&nbsp;0,&nbsp;0,&nbsp;false,&nbsp;0,&nbsp;0);&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;sceneCamera-&gt;attach(osg::Camera::COLOR_BUFFER,&nbsp;tex.get(),&nbsp;0,&nbsp;0,&nbsp;false,&nbsp;0,&nbsp;0);&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Laurens.&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Tue,&nbsp;Nov&nbsp;13,&nbsp;2018&nbsp;at&nbsp;4:41&nbsp;PM&nbsp;ivar&nbsp;out&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ivarout@gmail.com&quot;&gt;ivarout@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
I&#39;m&nbsp;having&nbsp;trouble&nbsp;properly&nbsp;rendering&nbsp;a&nbsp;couple&nbsp;of&nbsp;cameras&nbsp;to&nbsp;an&nbsp;FBO.&nbsp;I&nbsp;have&nbsp;two&nbsp;PRE_RENDER&nbsp;cameras&nbsp;that&nbsp;use&nbsp;a&nbsp;FBO&nbsp;and&nbsp;render&nbsp;to&nbsp;a&nbsp;texture.&nbsp;The&nbsp;color&nbsp;buffer&nbsp;seems&nbsp;to&nbsp;be&nbsp;reset&nbsp;before&nbsp;rendering&nbsp;the&nbsp;second&nbsp;camera&nbsp;though.&nbsp;This&nbsp;is&nbsp;my&nbsp;code:&lt;br&gt;<br>
&lt;br&gt;<br>
Code:&lt;br&gt;<br>
&lt;br&gt;<br>
osg::Group*&nbsp;root&nbsp;=&nbsp;new&nbsp;osg::Group;&lt;br&gt;<br>
&lt;br&gt;<br>
osg::Camera*&nbsp;backgroundCamera&nbsp;=&nbsp;new&nbsp;osg::Camera;&lt;br&gt;<br>
osg::Camera*&nbsp;sceneCamera&nbsp;=&nbsp;new&nbsp;osg::Camera;&lt;br&gt;<br>
osg::Camera*&nbsp;finalCamera&nbsp;=&nbsp;new&nbsp;osg::Camera;&lt;br&gt;<br>
&lt;br&gt;<br>
root-&gt;addChild(backgroundCamera);&lt;br&gt;<br>
root-&gt;addChild(sceneCamera);&lt;br&gt;<br>
root-&gt;addChild(finalCamera);&lt;br&gt;<br>
&lt;br&gt;<br>
//-----------------------------------------&lt;br&gt;<br>
//&nbsp;create&nbsp;texture&nbsp;to&nbsp;render&nbsp;to&nbsp;&lt;br&gt;<br>
//-----------------------------------------&lt;br&gt;<br>
osg::ref_ptr&lt;osg::Texture2D&gt;&nbsp;tex&nbsp;=&nbsp;new&nbsp;osg:&lt;br&gt;<br>
tex-&gt;setSourceType(GL_FLOAT);&lt;br&gt;<br>
tex-&gt;setSourceFormat(GL_RGBA);&lt;br&gt;<br>
tex-&gt;setInternalFormat(GL_RGBA);&lt;br&gt;<br>
tex-&gt;setTextureSize(512,&nbsp;512);&lt;br&gt;<br>
&lt;br&gt;<br>
//-------------------------------------------------------------------&lt;br&gt;<br>
//&nbsp;add&nbsp;geometry&nbsp;to&nbsp;background&nbsp;camera&lt;br&gt;<br>
//-------------------------------------------------------------------&lt;br&gt;<br>
osg::Geometry*&nbsp;background&nbsp;=&nbsp;osg::createTexturedQuadGeometry(osg::Vec3(),&nbsp;osg::Vec3(0,&nbsp;1.0f,&nbsp;0),&nbsp;osg::Vec3(1.0f,&nbsp;0,&nbsp;0));&lt;br&gt;<br>
osg::ref_ptr&lt;osg::Vec4Array&gt;&nbsp;colors&nbsp;=&nbsp;new&nbsp;osg::Vec4Array;&lt;br&gt;<br>
colors-&gt;push_back(osg::Vec4(1.0,&nbsp;1.0,&nbsp;1.0,&nbsp;1.0));&lt;br&gt;<br>
colors-&gt;push_back(osg::Vec4(1.0,&nbsp;1.0,&nbsp;1.0,&nbsp;1.0));&lt;br&gt;<br>
colors-&gt;push_back(osg::Vec4(0,&nbsp;0,&nbsp;0,&nbsp;1.0f));&lt;br&gt;<br>
colors-&gt;push_back(osg::Vec4(0,&nbsp;0,&nbsp;0,&nbsp;1.0));&lt;br&gt;<br>
background-&gt;setColorArray(colors.get());&lt;br&gt;<br>
background-&gt;setColorBinding(osg::Geometry::BIND_PER_VERTEX);&lt;br&gt;<br>
osg::Geode*&nbsp;geode&nbsp;=&nbsp;new&nbsp;osg::Geode;&lt;br&gt;<br>
geode-&gt;addChild(background);&lt;br&gt;<br>
backgroundCamera-&gt;addChild(geode);&lt;br&gt;<br>
&lt;br&gt;<br>
backgroundCamera-&gt;setRenderTargetImplementation(osg::Camera::FRAME_BUFFER_OBJECT);&lt;br&gt;<br>
backgroundCamera-&gt;setViewport(0,&nbsp;0,&nbsp;tex-&gt;getTextureWidth(),&nbsp;tex-&gt;getTextureHeight());&lt;br&gt;<br>
backgroundCamera-&gt;attach(osg::Camera::COLOR_BUFFER,&nbsp;tex.get(),&nbsp;0,&nbsp;0,&nbsp;true,&nbsp;512,&nbsp;512);&lt;br&gt;<br>
backgroundCamera-&gt;setRenderOrder(osg::Camera::PRE_RENDER,&nbsp;0);&lt;br&gt;<br>
backgroundCamera-&gt;setReferenceFrame(osg::Transform::ABSOLUTE_RF);&lt;br&gt;<br>
backgroundCamera-&gt;setProjectionMatrixAsOrtho2D(0.0f,&nbsp;1.0f,&nbsp;0.0f,&nbsp;1.0f);&lt;br&gt;<br>
backgroundCamera-&gt;getOrCreateStateSet()-&gt;setMode(GL_LIGHTING,&nbsp;FALSE);&lt;br&gt;<br>
backgroundCamera-&gt;setClearMask(GL_DEPTH_BUFFER_BIT&nbsp;|&nbsp;GL_COLOR_BUFFER_BIT);&lt;br&gt;<br>
backgroundCamera-&gt;setClearColor(osg::Vec4(0,&nbsp;0,&nbsp;0,&nbsp;1));&lt;br&gt;<br>
&lt;br&gt;<br>
//-------------------------------------------------------------------&lt;br&gt;<br>
//&nbsp;CREATE&nbsp;Camera&nbsp;to&nbsp;display&nbsp;scene&lt;br&gt;<br>
//-------------------------------------------------------------------&lt;br&gt;<br>
sceneCamera-&gt;setRenderOrder(osg::Camera::PRE_RENDER,&nbsp;1);&lt;br&gt;<br>
osg::Node*&nbsp;node&nbsp;=&nbsp;osgDB::readNodeFile(&quot;C:\\Software\\OpenSceneGraph-3.6.0\\Models\\cessna.osg&quot;);&lt;br&gt;<br>
sceneCamera-&gt;addChild(node);&lt;br&gt;<br>
sceneCamera-&gt;setViewMatrixAsLookAt(osg::Vec3(100,&nbsp;0,&nbsp;0),&nbsp;osg::Vec3(),&nbsp;osg::Vec3(0,&nbsp;0,&nbsp;1));&lt;br&gt;<br>
sceneCamera-&gt;setClearMask(GL_DEPTH_BUFFER_BIT);&nbsp;//don&#39;t&nbsp;clear&nbsp;color&nbsp;buffer&nbsp;please&lt;br&gt;<br>
sceneCamera-&gt;setRenderTargetImplementation(osg::Camera::FRAME_BUFFER_OBJECT);&lt;br&gt;<br>
sceneCamera-&gt;attach(osg::Camera::COLOR_BUFFER,&nbsp;tex.get(),&nbsp;0,&nbsp;0,&nbsp;true,&nbsp;512,&nbsp;512);&lt;br&gt;<br>
sceneCamera-&gt;setViewport(0,&nbsp;0,&nbsp;tex-&gt;getTextureWidth(),&nbsp;tex-&gt;getTextureHeight());&lt;br&gt;<br>
&lt;br&gt;<br>
//-------------------------------------------------------------------&lt;br&gt;<br>
//&nbsp;CREATE&nbsp;Camera&nbsp;to&nbsp;display&nbsp;texture&lt;br&gt;<br>
//-------------------------------------------------------------------&lt;br&gt;<br>
finalCamera-&gt;setReferenceFrame(osg::Transform::ABSOLUTE_RF);&lt;br&gt;<br>
finalCamera-&gt;setProjectionMatrix(osg::Matrix::ortho2D(0,&nbsp;1.0f,&nbsp;0,&nbsp;1.0f));&lt;br&gt;<br>
osg::Geometry*&nbsp;geom&nbsp;=&nbsp;osg::createTexturedQuadGeometry(osg::Vec3(),&nbsp;osg::Vec3(1.0f,&nbsp;0.0f,&nbsp;0.0f),&nbsp;osg::Vec3(0.0f,&nbsp;1.0f,&nbsp;0.0f));&lt;br&gt;<br>
osg::ref_ptr&lt;osg::Geode&gt;&nbsp;quad&nbsp;=&nbsp;new&nbsp;osg::Geode;&lt;br&gt;<br>
quad-&gt;addDrawable(geom);&lt;br&gt;<br>
finalCamera-&gt;addChild(quad.get());&lt;br&gt;<br>
&lt;br&gt;<br>
//&nbsp;add&nbsp;shaders&nbsp;that&nbsp;draw&nbsp;the&nbsp;texture&nbsp;on&nbsp;the&nbsp;quad&lt;br&gt;<br>
osg::ref_ptr&lt;osg::Program&gt;&nbsp;program&nbsp;=&nbsp;new&nbsp;osg::Program;&lt;br&gt;<br>
program-&gt;addShader(osgDB::readShaderFile(&quot;shader.frag&quot;));&lt;br&gt;<br>
program-&gt;addShader(osgDB::readShaderFile(&quot;shader.vert&quot;));&lt;br&gt;<br>
osg::StateSet*&nbsp;stateset&nbsp;=&nbsp;finalCamera-&gt;getOrCreateStateSet();&lt;br&gt;<br>
stateset-&gt;setTextureAttributeAndModes(0,&nbsp;tex.get());&lt;br&gt;<br>
stateset-&gt;setAttributeAndModes(program.get());&lt;br&gt;<br>
stateset-&gt;addUniform(new&nbsp;osg::Uniform(&quot;myTexture&quot;,&nbsp;0));&lt;br&gt;<br>
&lt;br&gt;<br>
osgViewer::Viewer&nbsp;viewer;&lt;br&gt;<br>
viewer.setSceneData(root);&lt;br&gt;<br>
return&nbsp;viewer.run();&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Either&nbsp;the&nbsp;background&nbsp;or&nbsp;scene&nbsp;camera&nbsp;can&nbsp;correctly&nbsp;be&nbsp;rendered&nbsp;to&nbsp;the&nbsp;FBO&nbsp;(by&nbsp;commenting&nbsp;the&nbsp;other&nbsp;out)&nbsp;but&nbsp;not&nbsp;both&nbsp;at&nbsp;the&nbsp;same&nbsp;time.&nbsp;Does&nbsp;anyone&nbsp;understand&nbsp;why&nbsp;this&nbsp;doesn&#39;t&nbsp;work?&nbsp;When&nbsp;I&nbsp;render&nbsp;to&nbsp;FRAME_BUFFER&nbsp;it&nbsp;works&nbsp;perfectly&nbsp;fine,&nbsp;but&nbsp;I&nbsp;figured&nbsp;since&nbsp;I&nbsp;don&#39;t&nbsp;want&nbsp;the&nbsp;texture&nbsp;rendered&nbsp;on&nbsp;screen&nbsp;an&nbsp;FBO&nbsp;would&nbsp;be&nbsp;a&nbsp;more&nbsp;efficient&nbsp;option&nbsp;perhaps?&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks!&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
ivar&lt;br&gt;<br>
&lt;br&gt;<br>
------------------&lt;br&gt;<br>
Read&nbsp;this&nbsp;topic&nbsp;online&nbsp;here:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://forum.openscenegraph.org/viewtopic.php?p=75191#75191&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://forum.openscenegraph.org/viewtopic.php?p=75191#75191&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
