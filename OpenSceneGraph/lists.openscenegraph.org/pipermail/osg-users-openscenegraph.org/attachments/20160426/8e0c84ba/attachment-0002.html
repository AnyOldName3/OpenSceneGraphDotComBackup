<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hey&nbsp;all,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;running&nbsp;into&nbsp;a&nbsp;segmentation&nbsp;violation&nbsp;when&nbsp;I&nbsp;attempt&nbsp;to&nbsp;use&nbsp;osgVolume::MultipassTechnique&nbsp;more&nbsp;or&nbsp;less&nbsp;as&nbsp;a&nbsp;drop&nbsp;in&nbsp;replacement&nbsp;for&nbsp;RayTracedTechnique&nbsp;using&nbsp;OSG&nbsp;3.4.&nbsp;My&nbsp;use&nbsp;of&nbsp;RayTracedTechnique&nbsp;works&nbsp;and&nbsp;renders&nbsp;fine.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;is&nbsp;an&nbsp;partial&nbsp;code&nbsp;listing&nbsp;demonstrating&nbsp;my&nbsp;use&nbsp;of&nbsp;MultipassTechnique:&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp;void&nbsp;setVolumeProperties(osg::ref_ptr&lt;osgVolume::Volume&gt;&nbsp;volume,osg::ref_ptr&lt;osgVolume::VolumeTile&gt;&nbsp;tile,&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::ref_ptr&lt;osgVolume::ImageLayer&gt;&nbsp;layer,&nbsp;VolumePropertyManager&nbsp;&amp;volumeProperties,&nbsp;osg::ref_ptr&lt;osgVolume::VolumeScene&gt;&nbsp;volumeScene)&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp;{&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;FixedFunctionTechnique&nbsp;turns&nbsp;on&nbsp;GL_LIGHTING,&nbsp;which&nbsp;breaks&nbsp;the&nbsp;color&nbsp;rendering.&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;osg::StateSet*&nbsp;stateset&nbsp;=&nbsp;volume-&gt;getOrCreateStateSet();&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(volumeProperties.volumeTechnique&nbsp;==&nbsp;VolumeTechnique::RayTraced){&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::ref_ptr&lt;osgVolume::RayTracedTechnique&gt;&nbsp;rayTraced&nbsp;=&nbsp;new&nbsp;osgVolume::RayTracedTechnique();&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tile-&gt;setVolumeTechnique(rayTraced.get());&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::ref_ptr&lt;osg::FrontFace&gt;&nbsp;frontFace(new&nbsp;osg::FrontFace(osg::FrontFace::CLOCKWISE));&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stateset-&gt;setAttribute(frontFace.get(),&nbsp;osg::StateAttribute::PROTECTED);&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;layer-&gt;addProperty(new&nbsp;osgVolume::SampleDensityWhenMovingProperty(volumeProperties.sampleDensityWhenMoving));&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;layer-&gt;addProperty(new&nbsp;osgVolume::SampleDensityProperty(volumeProperties.sampleDensity));&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;}&nbsp;else&nbsp;if&nbsp;(volumeProperties.volumeTechnique&nbsp;==&nbsp;VolumeTechnique::Multipass)&nbsp;{&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::ref_ptr&lt;osgVolume::MultipassTechnique&gt;&nbsp;multipass&nbsp;=&nbsp;new&nbsp;osgVolume::MultipassTechnique();&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tile-&gt;setVolumeTechnique(multipass.get());&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;volumeScene-&gt;addChild(volume.get());&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;volume-&gt;getOrCreateStateSet();&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;layer-&gt;addProperty(new&nbsp;osgVolume::SampleRatioProperty(1.0f));&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;layer-&gt;addProperty(new&nbsp;osgVolume::SampleRatioWhenMovingProperty(0.5f));&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;}&nbsp;else&nbsp;if&nbsp;(volumeProperties.volumeTechnique&nbsp;==&nbsp;VolumeTechnique::FixedFunction)&nbsp;{&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tile-&gt;setVolumeTechnique(new&nbsp;osgVolume::FixedFunctionTechnique());&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stateset-&gt;setMode(GL_LIGHTING,osg::StateAttribute::OFF&nbsp;|&nbsp;osg::StateAttribute::OVERRIDE);&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;}&nbsp;else&nbsp;{&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;throw&nbsp;hg::PropertyException(&quot;VolumeTechnique&quot;);&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;layer-&gt;addProperty(new&nbsp;osgVolume::TransferFunctionProperty(volumeProperties.transferFunction.get()));&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;layer-&gt;addProperty(new&nbsp;osgVolume::AlphaFuncProperty(volumeProperties.alphaFunc));&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(volumeProperties.useLighting)&nbsp;layer-&gt;addProperty(new&nbsp;osgVolume::LightingProperty);&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(volumeProperties.useIsosurface)&nbsp;layer-&gt;addProperty(new&nbsp;osgVolume::IsoSurfaceProperty(volumeProperties.alphaFunc));&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(volumeProperties.useMaximumIntensityProjection)&nbsp;layer-&gt;addProperty(new&nbsp;osgVolume::MaximumIntensityProjectionProperty());&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp;}&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;following&nbsp;function&nbsp;returns&nbsp;the&nbsp;Node&nbsp;*&nbsp;that&nbsp;will&nbsp;be&nbsp;passed&nbsp;to&nbsp;the&nbsp;viewer.&nbsp;I&nbsp;either&nbsp;return&nbsp;a&nbsp;osgVolume::Volume&nbsp;*&nbsp;or&nbsp;osgVolume::VolumeScene&nbsp;*&nbsp;object&nbsp;depending&nbsp;on&nbsp;whether&nbsp;I&#39;m&nbsp;using&nbsp;multipass&nbsp;rendering&nbsp;as&nbsp;my&nbsp;Node&nbsp;*. &lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp;osg::Node*&nbsp;BP_createPeerHelper(Volume&amp;&nbsp;v,&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hg::SceneClient&amp;&nbsp;client,&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const&nbsp;gui_objects::Cookie&amp;&nbsp;owner,&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hg::UpdateState&amp;&nbsp;us)&nbsp;{&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;osg::ref_ptr&lt;osgVolume::Volume&gt;&nbsp;volume&nbsp;=&nbsp;new&nbsp;osgVolume::Volume;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;osg::ref_ptr&lt;osgVolume::VolumeScene&gt;&nbsp;volumeScene&nbsp;=&nbsp;new&nbsp;osgVolume::VolumeScene;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;const&nbsp;mxArray*&nbsp;data&nbsp;=&nbsp;v.getData();&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;VolumePropertyManager&nbsp;volumeProperties(v,us);&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(data&nbsp;!=&nbsp;NULL&nbsp;&amp;&amp;&nbsp;mxGetNumberOfDimensions(data)&nbsp;==&nbsp;3&nbsp;&amp;&amp;&nbsp;mxGetClassID(data)&nbsp;==&nbsp;mxUINT8_CLASS)&nbsp;{&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::ref_ptr&lt;osgVolume::VolumeTile&gt;&nbsp;tile&nbsp;=&nbsp;new&nbsp;osgVolume::VolumeTile;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;volume-&gt;addChild(tile.get());&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;If&nbsp;we&nbsp;are&nbsp;using&nbsp;FixedFunctionTechnique,&nbsp;we&nbsp;need&nbsp;to&nbsp;apply&nbsp;the&nbsp;transfer&nbsp;function&nbsp;to&nbsp;get&nbsp;a&nbsp;new&nbsp;allocated&nbsp;RGBA&nbsp;memory&nbsp;on&nbsp;the&nbsp;CPU&nbsp;to&nbsp;pass&nbsp;to&nbsp;OSG.&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;Otherwise,&nbsp;we&nbsp;can&nbsp;pass&nbsp;the&nbsp;intensity&nbsp;data&nbsp;directly&nbsp;to&nbsp;the&nbsp;card.&nbsp;GPU&nbsp;shaders&nbsp;does&nbsp;the&nbsp;RGBA&nbsp;directly.&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::ref_ptr&lt;osg::Image&gt;&nbsp;intensityImage&nbsp;=&nbsp;createTexture3D(data);&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::ref_ptr&lt;osg::Image&gt;&nbsp;image_3d&nbsp;=&nbsp;(volumeProperties.volumeTechnique&nbsp;==&nbsp;VolumeTechnique::FixedFunction)&nbsp;?&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osgVolume::applyTransferFunction(intensityImage.get(),volumeProperties.transferFunction.get())&nbsp;:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;intensityImage.release();&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::ref_ptr&lt;osgVolume::ImageLayer&gt;&nbsp;layer&nbsp;=&nbsp;new&nbsp;osgVolume::ImageLayer(image_3d);&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tile-&gt;setLayer(layer.get());&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;setVolumeProperties(volume,tile,layer,volumeProperties,volumeScene);&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;Our&nbsp;original&nbsp;implementation&nbsp;positioned&nbsp;the&nbsp;bbox&nbsp;[-0.5,0.5]&nbsp;in&nbsp;each&nbsp;dimension.&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;FixedFunctionTechnique&nbsp;applies&nbsp;the&nbsp;locator&nbsp;matrix&nbsp;to&nbsp;the&nbsp;a&nbsp;unit&nbsp;cube&nbsp;[0&nbsp;1]&nbsp;in&nbsp;each&nbsp;dimension.&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;To&nbsp;get&nbsp;the&nbsp;equivalent&nbsp;spatial&nbsp;referencing,&nbsp;apply&nbsp;a&nbsp;translation&nbsp;of&nbsp;-0.5&nbsp;to&nbsp;each&nbsp;dimension.&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::ref_ptr&lt;osg::RefMatrix&gt;&nbsp;matrix&nbsp;=&nbsp;new&nbsp;osg::RefMatrix();&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;matrix-&gt;makeTranslate(-0.5,-0.5,-0.5);&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tile-&gt;setLocator(new&nbsp;osgVolume::Locator(*matrix));&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;else&nbsp;{&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;throw&nbsp;hg::PropertyException(&quot;Data&quot;);&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;std::cout&nbsp;&lt;&lt;&nbsp;&quot;volumeScene&nbsp;pointer:&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;volumeScene.get()&nbsp;&lt;&lt;&nbsp;std::endl;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(volumeProperties.volumeTechnique&nbsp;==&nbsp;VolumeTechnique::Multipass)&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;volumeScene.release();&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp;else&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;volume.release();&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp; &nbsp;  &lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt; &nbsp; &nbsp;}&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;I&nbsp;execute&nbsp;my&nbsp;code&nbsp;that&nbsp;previously&nbsp;worked&nbsp;with&nbsp;RayTracedTechnique,&nbsp;I&nbsp;receive&nbsp;the&nbsp;following&nbsp;stack&nbsp;trace&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;Stack&nbsp;Trace&nbsp;(from&nbsp;fault):&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[ &nbsp;0]&nbsp;0x0000000104879d04&nbsp;fl::diag::stacktrace_base::capture(fl::diag::thread_context&nbsp;const&amp;,&nbsp;unsigned&nbsp;long)&nbsp;at&nbsp;stacktrace.cpp:175&nbsp;(in&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libmwfl.dylib)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[ &nbsp;1]&nbsp;0x000000010487cf9a&nbsp;void&nbsp;(anonymous&nbsp;namespace)::terminate_impl::log&lt;char&nbsp;const*&gt;(char&nbsp;const*&nbsp;const&amp;,&nbsp;fl::diag::thread_context&nbsp;const&amp;,&nbsp;char&nbsp;const*,&nbsp;int,&nbsp;char&nbsp;const*,&nbsp;bool)&nbsp;at&nbsp;terminate.cpp:238&nbsp;(in&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libmwfl.dylib)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[ &nbsp;2]&nbsp;0x000000010487ca09&nbsp;fl::diag::terminate_log(char&nbsp;const*,&nbsp;__darwin_ucontext&nbsp;const*)&nbsp;at&nbsp;lock_types.hpp:362&nbsp;(in&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libmwfl.dylib)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[ &nbsp;3]&nbsp;0x00000001081cf0a8&nbsp;(anonymous&nbsp;namespace)::crash_context::generate_crash_report_(std::__1::basic_ostream&lt;char,&nbsp;std::__1::char_traits&lt;char&gt;&nbsp;&gt;&amp;)&nbsp;const&nbsp;at&nbsp;sighndl.cpp:1149&nbsp;(in&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libmwmcr.dylib)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[ &nbsp;4]&nbsp;0x00000001081cea00&nbsp;(anonymous&nbsp;namespace)::crash_context::ctor_()&nbsp;at&nbsp;sighndl.cpp:1025&nbsp;(in&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libmwmcr.dylib)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[ &nbsp;5]&nbsp;0x00000001081cd62a&nbsp;mnFatalSignalHandler&nbsp;at&nbsp;sighndl.cpp:729&nbsp;(in&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libmwmcr.dylib)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[ &nbsp;6]&nbsp;0x00007fff90c31f1a&nbsp;_sigtramp+00000026&nbsp;at&nbsp;/usr/lib/system/libsystem_platform.dylib+20250&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[ &nbsp;7]&nbsp;0x0000000000000005&nbsp;[unknown&nbsp;function]&nbsp;at&nbsp;[unknown&nbsp;module]&nbsp;(no&nbsp;module&nbsp;specified)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[ &nbsp;8]&nbsp;0x00000001204c4e56&nbsp;osgVolume::MultipassTechnique::traverse(osg::NodeVisitor&amp;)+00000086&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosgVolume.130.dylib+106070&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[ &nbsp;9]&nbsp;0x00000001204dcbf6&nbsp;osgVolume::VolumeTile::traverse(osg::NodeVisitor&amp;)+00000438&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosgVolume.130.dylib+203766&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;10]&nbsp;0x00000001204d7c0b&nbsp;osgVolume::VolumeScene::traverse(osg::NodeVisitor&amp;)+00008827&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosgVolume.130.dylib+183307&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;11]&nbsp;0x0000000143a8daf2&nbsp;osgUtil::CullVisitor::apply(osg::Group&amp;)+00000642&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosgUtil.130.dylib+39666&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;12]&nbsp;0x00000001204d8a79&nbsp;osgVolume::VolumeScene::accept(osg::NodeVisitor&amp;)+00000121&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosgVolume.130.dylib+187001&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;13]&nbsp;0x00000001438749ef&nbsp;osg::Group::traverse(osg::NodeVisitor&amp;)+00000047&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosg.130.dylib+522735&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;14]&nbsp;0x0000000143a8dbf0&nbsp;osgUtil::CullVisitor::apply(osg::Transform&amp;)+00000240&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosgUtil.130.dylib+39920&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;15]&nbsp;0x00000001438b9499&nbsp;osg::MatrixTransform::accept(osg::NodeVisitor&amp;)+00000121&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosg.130.dylib+803993&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;16]&nbsp;0x00000001438749ef&nbsp;osg::Group::traverse(osg::NodeVisitor&amp;)+00000047&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosg.130.dylib+522735&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;17]&nbsp;0x0000000143a8daf2&nbsp;osgUtil::CullVisitor::apply(osg::Group&amp;)+00000642&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosgUtil.130.dylib+39666&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;18]&nbsp;0x0000000143876049&nbsp;osg::Group::accept(osg::NodeVisitor&amp;)+00000121&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosg.130.dylib+528457&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;19]&nbsp;0x00000001438749ef&nbsp;osg::Group::traverse(osg::NodeVisitor&amp;)+00000047&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosg.130.dylib+522735&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;20]&nbsp;0x0000000143a8f29d&nbsp;osgUtil::CullVisitor::apply(osg::Camera&amp;)+00003021&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosgUtil.130.dylib+45725&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;21]&nbsp;0x000000014381c209&nbsp;osg::Camera::accept(osg::NodeVisitor&amp;)+00000121&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosg.130.dylib+160265&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;22]&nbsp;0x00000001438749ef&nbsp;osg::Group::traverse(osg::NodeVisitor&amp;)+00000047&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosg.130.dylib+522735&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;23]&nbsp;0x0000000143a8daf2&nbsp;osgUtil::CullVisitor::apply(osg::Group&amp;)+00000642&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosgUtil.130.dylib+39666&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;24]&nbsp;0x0000000143876049&nbsp;osg::Group::accept(osg::NodeVisitor&amp;)+00000121&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosg.130.dylib+528457&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;25]&nbsp;0x00000001438749ef&nbsp;osg::Group::traverse(osg::NodeVisitor&amp;)+00000047&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosg.130.dylib+522735&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;26]&nbsp;0x0000000143b486bb&nbsp;osgUtil::SceneView::cullStage(osg::Matrixd&nbsp;const&amp;,&nbsp;osg::Matrixd&nbsp;const&amp;,&nbsp;osgUtil::CullVisitor*,&nbsp;osgUtil::StateGraph*,&nbsp;osgUtil::RenderStage*,&nbsp;osg::Viewport*)+00002875&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosgUtil.130.dylib+804539&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;27]&nbsp;0x0000000143b47117&nbsp;osgUtil::SceneView::cull()+00001399&nbsp;at&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libosgUtil.130.dylib+798999&nbsp;(no&nbsp;debugging&nbsp;symbols&nbsp;found)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;28]&nbsp;0x00000001372607da&nbsp;SceneRendererImpl::renderScene(hg::openscenegraph::RenderTimes&amp;,&nbsp;hg::openscenegraph::RenderCounts&amp;,&nbsp;osgUtil::SceneView*,&nbsp;unsigned&nbsp;int)&nbsp;at&nbsp;osgSceneServer.cpp:1448&nbsp;(in&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libmwosgserver.dylib)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;29]&nbsp;0x000000013725922e&nbsp;hg::openscenegraph::OsgSceneServer::cullAndDraw(int,&nbsp;bool,&nbsp;double,&nbsp;double)&nbsp;at&nbsp;osgSceneServer.cpp:1809&nbsp;(in&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libmwosgserver.dylib)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;30]&nbsp;0x000000011f298082&nbsp;UIJ_call_OpenGLPaintFcn(gui_objects::scene_server::SceneServerProxy*,&nbsp;int,&nbsp;bool,&nbsp;double,&nbsp;double)&nbsp;at&nbsp;SceneServerPeerEvents.cpp:56&nbsp;(in&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libuij.dylib)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;&lt;b&gt;[&nbsp;31]&nbsp;0x000000011e589414&nbsp;Java_com_mathworks_hg_peer_JavaSceneServerPeer_doDisplay&nbsp;at&nbsp;Scene.cpp:129&nbsp;(in&nbsp;/mathworks/devel/sbs/28/ataylor.Bmlhg_task1.j377265/matlab/bin/maci64/libnativehg.dylib)&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;was&nbsp;wondering&nbsp;if&nbsp;either&nbsp;from&nbsp;the&nbsp;stack&nbsp;trace&nbsp;or&nbsp;my&nbsp;code&nbsp;segments&nbsp;if&nbsp;there&nbsp;is&nbsp;an&nbsp;obvious&nbsp;culprit&nbsp;in&nbsp;terms&nbsp;of&nbsp;my&nbsp;use&nbsp;of&nbsp;MultipassTechnique.&nbsp;I&nbsp;feel&nbsp;like&nbsp;my&nbsp;use&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the&nbsp;pattern&nbsp;established&nbsp;in&nbsp;the&nbsp;shipping&nbsp;example,&nbsp;but&nbsp;I&#39;m&nbsp;a&nbsp;bit&nbsp;stuck&nbsp;at&nbsp;the&nbsp;moment&nbsp;as&nbsp;far&nbsp;as&nbsp;next&nbsp;directions&nbsp;to&nbsp;debug&nbsp;my&nbsp;problem...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;as&nbsp;always&nbsp;for&nbsp;any&nbsp;help,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Alex&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
