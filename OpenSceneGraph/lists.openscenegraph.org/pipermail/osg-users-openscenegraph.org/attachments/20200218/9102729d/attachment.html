<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hello&nbsp;everyone,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;not&nbsp;experienced&nbsp;at&nbsp;osg&nbsp;and&nbsp;want&nbsp;to&nbsp;post&nbsp;my&nbsp;question&nbsp;here&nbsp;(please&nbsp;bear&nbsp;me&nbsp;if&nbsp;my&nbsp;question&nbsp;is&nbsp;stupid). &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;is&nbsp;the&nbsp;backround&nbsp;of&nbsp;my&nbsp;question:&lt;/div&gt;&lt;div&gt;I&nbsp;get&nbsp;400&nbsp;~&nbsp;800&nbsp;incoming&nbsp;points&nbsp;of&nbsp;simulated&nbsp;road&nbsp;marks&nbsp;by&nbsp;one&nbsp;programm&nbsp;every&nbsp;20&nbsp;~&nbsp;30&nbsp;ms.&nbsp;My&nbsp;Programm&nbsp;is&nbsp;fed&nbsp;by&nbsp;these&nbsp;points&nbsp;continuously&nbsp;on&nbsp;the&nbsp;main&nbsp;thread.&nbsp;My&nbsp;goal&nbsp;is&nbsp;to&nbsp;visualise&nbsp;them&nbsp;by&nbsp;connecting&nbsp;them&nbsp;into&nbsp;lines:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;After&nbsp;reading&nbsp;many&nbsp;releated&nbsp;posts&nbsp;on&nbsp;this&nbsp;forum,&nbsp;I&nbsp;got&nbsp;some&nbsp;ideas&nbsp;and&nbsp;implemented&nbsp;them:&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;this&nbsp;is&nbsp;basic&nbsp;setup:&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;osg::ref_ptr&lt;osg::Geode&gt;&nbsp;road_mark_geode;&nbsp;//&nbsp;hold&nbsp;the&nbsp;vertices&nbsp;inside&nbsp;my&nbsp;program&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;...&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;osg::ref_ptr&lt;osg::Geometry&gt;&nbsp;geom(new&nbsp;osg::Geometry());&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp; &nbsp;geom-&gt;setUseVertexBufferObjects(true);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;geom-&gt;setUseDisplayList(false);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;geom-&gt;setUpdateCallback(new&nbsp;DynamicRoadMarkCallback);&nbsp;// &nbsp;I&nbsp;customized&nbsp;a osg::Drawable::UpdateCallback&nbsp;to&nbsp;run&nbsp;vertices-&gt;dirty(),&nbsp;to&nbsp;update&nbsp;inside&nbsp;road&nbsp;mark&nbsp;vertices &lt;/div&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;osg::Vec3Array*&nbsp;vertices(new&nbsp;osg::Vec3Array());&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;geom-&gt;setVertexArray(vertices);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;geom-&gt;addPrimitiveSet(new&nbsp;osg::DrawArrays(GL_LINE_STRIP,&nbsp;0,&nbsp;DEFAULT_VERTEX_SIZE));&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;road_mark_geode-&gt;addDrawable(geom.get());&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Given&nbsp;that&nbsp;data&nbsp;reception&nbsp;is&nbsp;on&nbsp;main&nbsp;thread,&nbsp;i&nbsp;did&nbsp;this&nbsp;(points_in&nbsp;is&nbsp;incoming&nbsp;data&nbsp;from&nbsp;another&nbsp;program):&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Loop&nbsp;on&nbsp;main&nbsp;thread:&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;receive&nbsp;points&nbsp;and&nbsp;store&nbsp;them&nbsp;-&gt;&nbsp;call&nbsp;function&nbsp;&quot;&lt;i&gt;update_pos_of_vertices&lt;/i&gt; &quot;&nbsp;to&nbsp;set&nbsp;the&nbsp;pos&nbsp;(x,&nbsp;y,&nbsp;z)&nbsp;for&nbsp;vertices&nbsp;by&nbsp;new&nbsp;points.&lt;/div&gt;&lt;div&gt; &nbsp; &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;Blow&nbsp;is&nbsp;the&nbsp;interested&nbsp;code&nbsp;snippet:&lt;/div&gt;&lt;div&gt; &nbsp; &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;getdata(points_in,&nbsp;points_save);&nbsp;//&nbsp;save&nbsp;incoming&nbsp;data&nbsp;into&nbsp;&quot;&lt;i&gt;points_save&quot;&lt;/i&gt;&nbsp;of&nbsp;my&nbsp;own&nbsp;data&nbsp;type&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;update_pos_of_vertices&nbsp;(points_save)&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;osg::Geometry*&nbsp;geo_drawable&nbsp;=&nbsp;static_cast&lt;osg::Geometry*&gt;(road_mark_geode-&gt;getDrawable(0));&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;geo_drawable-&gt;setDataVariance(osg::Object::DYNAMIC);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;osg::DrawArrays*&nbsp;drawArrays&nbsp;=&nbsp;static_cast&lt;osg::DrawArrays*&gt;(geo_drawable-&gt;getPrimitiveSet(0));&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;osg::Vec3Array*&nbsp;vertices&nbsp;=&nbsp;static_cast&lt;osg::Vec3Array*&gt;(geo_drawable-&gt;getVertexArray());&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;int&nbsp;num_vertices&nbsp;=&nbsp;points_save.size();&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;drawArrays-&gt;setCount(num_vertices);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;vertices-&gt;resize(num_vertices);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;for&nbsp;(...&nbsp;)&nbsp;{ &lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;vertices-&gt;at(i).set(points_save[i]);&nbsp;//&nbsp;set&nbsp;new&nbsp;pos&nbsp;of&nbsp;each&nbsp;vertex&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&lt;/span&gt;}&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;program&nbsp;ran&nbsp;and&nbsp;i&nbsp;got&nbsp;visualized&nbsp;lines&nbsp;which&nbsp;are&nbsp;linked&nbsp;by&nbsp;points&nbsp;(see&nbsp;pic&nbsp;in&nbsp;attachment).&nbsp;But&nbsp;my&nbsp;program&nbsp;becomes&nbsp;very&nbsp;slow:&nbsp;average&nbsp;time&nbsp;for&nbsp;one&nbsp;single&nbsp;loop&nbsp;is&nbsp;50ms.&nbsp;So&nbsp;my&nbsp;question&nbsp;is:&lt;/div&gt;&lt;div&gt;How&nbsp;can&nbsp;I&nbsp;improve&nbsp;the&nbsp;performance?&lt;/div&gt;&lt;div&gt;Did&nbsp;I&nbsp;do&nbsp;anything&nbsp;wrong&nbsp;regarding&nbsp;the&nbsp;my&nbsp;implementation&nbsp;above?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Look &nbsp;forward&nbsp;to&nbsp;any&nbsp;help,&nbsp;tips&nbsp;and&nbsp;remarks!&lt;/div&gt;&lt;div&gt;Thank&nbsp;you&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yuan&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;  &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;  &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
<br>
&lt;p&gt;&lt;/p&gt;<br>
<br>
--&nbsp;&lt;br&nbsp;/&gt;<br>
You&nbsp;received&nbsp;this&nbsp;message&nbsp;because&nbsp;you&nbsp;are&nbsp;subscribed&nbsp;to&nbsp;the&nbsp;Google&nbsp;Groups&nbsp;&quot;OpenSceneGraph&nbsp;Users&quot;&nbsp;group.&lt;br&nbsp;/&gt;<br>
To&nbsp;unsubscribe&nbsp;from&nbsp;this&nbsp;group&nbsp;and&nbsp;stop&nbsp;receiving&nbsp;emails&nbsp;from&nbsp;it,&nbsp;send&nbsp;an&nbsp;email&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;mailto:osg-users+unsubscribe@googlegroups.com&quot;&gt;osg-users+unsubscribe@googlegroups.com&lt;/a&gt;.&lt;br&nbsp;/&gt;<br>
To&nbsp;view&nbsp;this&nbsp;discussion&nbsp;on&nbsp;the&nbsp;web&nbsp;visit&nbsp;&lt;a&nbsp;href=&quot;https://groups.google.com/d/msgid/osg-users/5a56fb13-4d17-41dd-a7c5-62ec49a3d421%40googlegroups.com?utm_medium=email&amp;utm_source=footer&quot;&gt;https://groups.google.com/d/msgid/osg-users/5a56fb13-4d17-41dd-a7c5-62ec49a3d421%40googlegroups.com&lt;/a&gt;.&lt;br&nbsp;/&gt;<br>

</tt>
