<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi&nbsp;all!&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;still&nbsp;working&nbsp;on&nbsp;my&nbsp;shadow&nbsp;technique&nbsp;for&nbsp;OpenGL&nbsp;3&nbsp;shaders.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;only&nbsp;partially&nbsp;manage&nbsp;setting&nbsp;the&nbsp;matrix&nbsp;for&nbsp;the&nbsp;light&nbsp;camera<br>
&nbsp;&nbsp;&nbsp;&nbsp;creating&nbsp;the&nbsp;shadowMap.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;What&nbsp;I&nbsp;do:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   &nbsp;osg&lt;/span&gt;::&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;Vec3&lt;/span&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;lightPositionVS&lt;span&nbsp;style=&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;=&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;&nbsp;color:#800000;&quot;&gt;mainCamera&lt;/span&gt;-&gt;getViewMatrix()&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;*&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;&nbsp;color:#800000;&quot;&gt;lightPosition&lt;/span&gt;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;style=&quot;-qt-paragraph-type:empty;&nbsp;margin-top:0px;&nbsp;margin-bottom:0px;&nbsp;margin-left:0px;&nbsp;margin-right:0px;&nbsp;-qt-block-indent:0;&nbsp;text-indent:0px;&quot;&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;style=&quot;&nbsp;margin-top:0px;&nbsp;margin-bottom:0px;&nbsp;margin-left:0px;&nbsp;margin-right:0px;&nbsp;-qt-block-indent:0;&nbsp;text-indent:0px;&quot;&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;osg&lt;/span&gt;::&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;Vec3&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;eye;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;style=&quot;&nbsp;margin-top:0px;&nbsp;margin-bottom:0px;&nbsp;margin-left:0px;&nbsp;margin-right:0px;&nbsp;-qt-block-indent:0;&nbsp;text-indent:0px;&quot;&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;osg&lt;/span&gt;::&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;Vec3&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;center;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;style=&quot;&nbsp;margin-top:0px;&nbsp;margin-bottom:0px;&nbsp;margin-left:0px;&nbsp;margin-right:0px;&nbsp;-qt-block-indent:0;&nbsp;text-indent:0px;&quot;&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;osg&lt;/span&gt;::&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;Vec3&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;up;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;   &nbsp;   &nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:#800000;&quot;&gt;mainCamera&lt;/span&gt;-&gt;getViewMatrixAsLookAt(eye,&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;center,&lt;span&nbsp;style=&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;up,&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;&nbsp;color:#800000;&quot;&gt;view&lt;/span&gt;-&gt;getDistance());<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;style=&quot;&nbsp;margin-top:0px;&nbsp;margin-bottom:0px;&nbsp;margin-left:0px;&nbsp;margin-right:0px;&nbsp;-qt-block-indent:0;&nbsp;text-indent:0px;&quot;&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#800000;&quot;&gt;shadowDepthCamera&lt;/span&gt;-&gt;setViewMatrixAsLookAt(center,&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;center+lightPositionVS,&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;up);&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;style=&quot;-qt-paragraph-type:empty;&nbsp;margin-top:0px;&nbsp;margin-bottom:0px;&nbsp;margin-left:0px;&nbsp;margin-right:0px;&nbsp;-qt-block-indent:0;&nbsp;text-indent:0px;&quot;&gt;<br>
That&nbsp;works&nbsp;quite&nbsp;fine&nbsp;except&nbsp;it&nbsp;doesn't&nbsp;honor&nbsp;the&nbsp;manipulations&nbsp;which&nbsp;are&nbsp;<br>
usually&nbsp;done&nbsp;by&nbsp;the&nbsp;model&nbsp;matrix&nbsp;(scaling&nbsp;/&nbsp;translation).<br>
So&nbsp;I&nbsp;guess&nbsp;I&nbsp;should&nbsp;do&nbsp;something&nbsp;like&nbsp;that:<br>
&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;   &nbsp;   &nbsp;osg&lt;/span&gt;::&lt;span&nbsp;style=&quot;&nbsp;color:#800080;&quot;&gt;Vec3&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;lightPositionVS&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;=&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#800000;&quot;&gt;???-&gt;getModelMatrix()&nbsp;*&nbsp;mainCamera&lt;/span&gt;-&gt;getViewMatrix()&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;*&lt;span&nbsp;style=&quot;&nbsp;color:#c0c0c0;&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;&nbsp;color:#800000;&quot;&gt;lightPosition&lt;/span&gt;;<br>
<br>
I&nbsp;have&nbsp;references&nbsp;to&nbsp;the&nbsp;view&nbsp;and&nbsp;to&nbsp;the&nbsp;mainCamera.<br>
I&nbsp;found&nbsp;out&nbsp;that&nbsp;the&nbsp;model&nbsp;matrix&nbsp;is&nbsp;held&nbsp;by&nbsp;the&nbsp;cameraManipulator.<br>
Unfortunately&nbsp;I&nbsp;couldn't&nbsp;find&nbsp;and&nbsp;way&nbsp;to&nbsp;get&nbsp;the&nbsp;manipulator&nbsp;from&nbsp;the&nbsp;references&nbsp;I&nbsp;have.<br>
Any&nbsp;other&nbsp;things&nbsp;I&nbsp;have&nbsp;to&nbsp;care&nbsp;about?<br>
<br>
Or&nbsp;is&nbsp;there&nbsp;any&nbsp;other&nbsp;approach&nbsp;in&nbsp;setting&nbsp;up&nbsp;the&nbsp;shadowDepthCamera?<br>
<br>
Any&nbsp;idea?<br>
<br>
Thanks<br>
<br>
-&nbsp;Werner&nbsp;-&nbsp;<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
