<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Sebastian,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;the&nbsp;code&nbsp;will&nbsp;be&nbsp;welcome.&nbsp;I&nbsp;was&nbsp;expecting&nbsp;that&nbsp;the&nbsp;proper&nbsp;way&nbsp;is&nbsp;to&nbsp;go&nbsp;through&nbsp;Eulers&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;a&nbsp;lot!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Feb&nbsp;1,&nbsp;2017&nbsp;at&nbsp;9:48&nbsp;AM,&nbsp;Sebastian&nbsp;Messerschmidt&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:sebastian.messerschmidt@gmx.de&quot;&nbsp;target=&quot;_blank&quot;&gt;sebastian.messerschmidt@gmx.de&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hi&nbsp;Trajce,&lt;br&gt;<br>
&lt;br&gt;<br>
Did&nbsp;I&nbsp;miss&nbsp;the&nbsp;question&nbsp;:-)&nbsp;If&nbsp;it&nbsp;is&nbsp;working:&nbsp;fine.&nbsp;:-)&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;general&nbsp;you&nbsp;are&nbsp;extracting&nbsp;the&nbsp;heading&nbsp;I&nbsp;guess&nbsp;(with&nbsp;the&nbsp;modelOrientation)&nbsp;and&nbsp;put&nbsp;it&nbsp;on&nbsp;top&nbsp;the&nbsp;tilted&nbsp;normal,&nbsp;which&nbsp;will&nbsp;put&nbsp;you&nbsp;on&nbsp;in&nbsp;this&nbsp;pose.&nbsp;The&nbsp;problem&nbsp;might&nbsp;be,&nbsp;that&nbsp;you&nbsp;introduce&nbsp;unwanted&nbsp;roll&nbsp;with&nbsp;this.&nbsp;I&nbsp;can&nbsp;give&nbsp;you&nbsp;some&nbsp;code&nbsp;(not&nbsp;based&nbsp;on&nbsp;OSG,&nbsp;but&nbsp;you&#39;ll&nbsp;get&nbsp;the&nbsp;idea)&nbsp;adapting&nbsp;a&nbsp;EulerAngle&nbsp;pose&nbsp;to&nbsp;a&nbsp;terrain&nbsp;normal&nbsp;using&nbsp;a&nbsp;local&nbsp;tangent&nbsp;plane.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers&lt;br&gt;<br>
Sebastian&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
Hi&nbsp;community,&lt;br&gt;<br>
&lt;br&gt;<br>
this&nbsp;is&nbsp;sort&nbsp;of&nbsp;easy&nbsp;math&nbsp;question&nbsp;(btw,&nbsp;I&nbsp;missed&nbsp;that&nbsp;part&nbsp;in&nbsp;my&lt;br&gt;<br>
classes&nbsp;;-)&nbsp;)&nbsp;I&nbsp;want&nbsp;to&nbsp;check&nbsp;it&nbsp;with&nbsp;you.&lt;br&gt;<br>
&lt;br&gt;<br>
It&nbsp;is&nbsp;about&nbsp;node&nbsp;following&nbsp;terrain.&nbsp;my&nbsp;node&nbsp;is&nbsp;MatrixTransform&nbsp;and&nbsp;I&lt;br&gt;<br>
have&nbsp;to&nbsp;set&nbsp;it&nbsp;in&nbsp;world&nbsp;coordinates.&nbsp;The&nbsp;node&nbsp;has&nbsp;it&#39;s&nbsp;own&nbsp;rotation&nbsp;and&lt;br&gt;<br>
I&nbsp;just&nbsp;need&nbsp;to&nbsp;take&nbsp;the&nbsp;terrain&nbsp;normal&nbsp;into&nbsp;account.&nbsp;Here&nbsp;is&nbsp;the&lt;br&gt;<br>
pseudocode&nbsp;that&nbsp;produces&nbsp;some&nbsp;acceptable&nbsp;results&nbsp;(not&nbsp;sure&nbsp;if&nbsp;they&nbsp;are&lt;br&gt;<br>
correct&nbsp;though,&nbsp;thus&nbsp;asking&nbsp;you&nbsp;for&nbsp;hints)&lt;br&gt;<br>
&lt;br&gt;<br>
Vec3&nbsp;terrainNormal;&lt;br&gt;<br>
&lt;br&gt;<br>
Quat&nbsp;terrainOrientation;&lt;br&gt;<br>
terrainOrientation.makeRotate(&lt;wbr&gt;Vec3(0,0,1),&nbsp;terrainNormal);&lt;br&gt;<br>
&lt;br&gt;<br>
Quat&nbsp;modelOrientation;&lt;br&gt;<br>
modelOrientation.makeRotate(Ve&lt;wbr&gt;c3(0,1,0),&nbsp;whatever);&lt;br&gt;<br>
&lt;br&gt;<br>
Quat&nbsp;q;&lt;br&gt;<br>
q&nbsp;=&nbsp;terrainOrientation&nbsp;*&nbsp;modelOrientation;&nbsp;//&nbsp;not&nbsp;sure&nbsp;about&nbsp;this&lt;br&gt;<br>
&lt;br&gt;<br>
MatrixTransform&nbsp;mxt&nbsp;=&nbsp;...&lt;br&gt;<br>
mxt-&gt;setMatrix(Matrixd:;rotate&lt;wbr&gt;(q)&nbsp;*&nbsp;...);&lt;br&gt;<br>
&lt;br&gt;<br>
Any&nbsp;hints?&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;a&nbsp;bunch&nbsp;as&nbsp;always!&lt;br&gt;<br>
Nick&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
trajce&nbsp;nikolov&nbsp;nick&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;osg-users@lists.openscenegraph&lt;wbr&gt;.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.or&lt;wbr&gt;g/listinfo.cgi/osg-users-opens&lt;wbr&gt;cenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;osg-users@lists.openscenegraph&lt;wbr&gt;.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.or&lt;wbr&gt;g/listinfo.cgi/osg-users-opens&lt;wbr&gt;cenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;trajce&nbsp;nikolov&nbsp;nick&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
