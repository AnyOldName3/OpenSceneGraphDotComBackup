<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Shayne,&lt;br&gt;&lt;br&gt;&lt;/div&gt;Using&nbsp;a&nbsp;paged&nbsp;database&nbsp;for&nbsp;LOS&nbsp;queries&nbsp;introduces&nbsp;the&nbsp;complication&nbsp;that&nbsp;if&nbsp;you&nbsp;need&nbsp;the&nbsp;highest&nbsp;resolution&nbsp;tiles&nbsp;then&nbsp;you&nbsp;need&nbsp;to&nbsp;iteratively&nbsp;retrieve&nbsp;them&nbsp;from&nbsp;lowest&nbsp;to&nbsp;highest&nbsp;res&nbsp;tile. &nbsp;The&nbsp;osgSim::LineOfSight&nbsp;class&nbsp;has&nbsp;this&nbsp;support&nbsp;built&nbsp;in,&nbsp;but&nbsp;it&nbsp;so&nbsp;slow&nbsp;when&nbsp;the&nbsp;tiles&nbsp;aren&#39;t&nbsp;yet&nbsp;loaded. &nbsp;There&nbsp;really&nbsp;isn&#39;t&nbsp;any&nbsp;way&nbsp;around&nbsp;this.&lt;br&gt;&lt;br&gt;&lt;/div&gt;The&nbsp;crux&nbsp;of&nbsp;the&nbsp;problem&nbsp;is&nbsp;that&nbsp;VPB&nbsp;generates&nbsp;paged&nbsp;databases&nbsp;for&nbsp;rendering&nbsp;purposes,&nbsp;it&#39;s&nbsp;all&nbsp;geared&nbsp;towards&nbsp;getting&nbsp;a&nbsp;solid&nbsp;60Hz. &nbsp;Hierarchical&nbsp;paged&nbsp;databases&nbsp;aren&#39;t&nbsp;ideal&nbsp;for&nbsp;serious&nbsp;intersection&nbsp;testing. &nbsp;The&nbsp;OSG&nbsp;can&nbsp;provide&nbsp;tools&nbsp;like&nbsp;LineOfSight&nbsp;that&nbsp;workaround&nbsp;some&nbsp;of&nbsp;the&nbsp;issues&nbsp;but&nbsp;it&nbsp;can&#39;t&nbsp;resolve&nbsp;the&nbsp;fundamental&nbsp;problem&nbsp;that&nbsp;the&nbsp;hierarchy&nbsp;of&nbsp;LOD&nbsp;levels&nbsp;has&nbsp;to&nbsp;be&nbsp;traversed&nbsp;to&nbsp;get&nbsp;to&nbsp;the&nbsp;highest&nbsp;res&nbsp;tile.&lt;br&gt;&lt;br&gt;&lt;/div&gt;As&nbsp;for&nbsp;a&nbsp;discrepancy&nbsp;between&nbsp;the&nbsp;original&nbsp;height&nbsp;field&nbsp;and&nbsp;the&nbsp;VPB&nbsp;generated&nbsp;database&nbsp;this&nbsp;can&nbsp;come&nbsp;about&nbsp;for&nbsp;a&nbsp;couple&nbsp;of&nbsp;reasons,&nbsp;first&nbsp;your&nbsp;settings,&nbsp;if&nbsp;you&nbsp;don&#39;t&nbsp;build&nbsp;a&nbsp;deep&nbsp;enough&nbsp;database&nbsp;then&nbsp;the&nbsp;high&nbsp;res&nbsp;tiles&nbsp;won&#39;t&nbsp;have&nbsp;a&nbsp;resolution&nbsp;high&nbsp;enough&nbsp;to&nbsp;map&nbsp;the&nbsp;original&nbsp;height&nbsp;fields,&nbsp;secondly&nbsp;the&nbsp;source&nbsp;height&nbsp;fields&nbsp;are&nbsp;unlikely&nbsp;to&nbsp;align&nbsp;perfect&nbsp;to&nbsp;the&nbsp;generated&nbsp;tiles&nbsp;(these&nbsp;are&nbsp;aligned&nbsp;according&nbsp;to&nbsp;a&nbsp;geocentric&nbsp;division&nbsp;not&nbsp;a&nbsp;local&nbsp;projection.) &nbsp;When&nbsp;you&nbsp;don&#39;t&nbsp;get&nbsp;perfect&nbsp;alignment&nbsp;sampling&nbsp;will&nbsp;lead&nbsp;smoothing&nbsp;out&nbsp;of&nbsp;the&nbsp;data&nbsp;and&nbsp;a&nbsp;discrepency&nbsp;developing. &nbsp;In&nbsp;flat&nbsp;areas&nbsp;this&nbsp;discrepency&nbsp;should&nbsp;be&nbsp;small,&nbsp;but&nbsp;in&nbsp;rapidly&nbsp;changing&nbsp;heightfields&nbsp;the&nbsp;potential&nbsp;for&nbsp;bigger&nbsp;discrepencies&nbsp;is&nbsp;higher.&lt;br&gt;&lt;br&gt;&lt;/div&gt;Over-sampling&nbsp;the&nbsp;generated&nbsp;database&nbsp;would&nbsp;help&nbsp;minimize&nbsp;the&nbsp;discrepancies. &nbsp;However,&nbsp;you&nbsp;can&#39;t&nbsp;fully&nbsp;avoid&nbsp;discrepancies&nbsp;when&nbsp;the&nbsp;source&nbsp;data&nbsp;and&nbsp;the&nbsp;generated&nbsp;data&nbsp;aren&#39;t&nbsp;in&nbsp;the&nbsp;same&nbsp;coordinate&nbsp;frame&nbsp;and&nbsp;have&nbsp;exactly&nbsp;matching&nbsp;resolution.&lt;br&gt;&lt;br&gt;&lt;/div&gt;If&nbsp;you&nbsp;need&nbsp;to&nbsp;do&nbsp;intersection&nbsp;tests&nbsp;against&nbsp;the&nbsp;source&nbsp;data&nbsp;then&nbsp;this&nbsp;is&nbsp;probably&nbsp;what&nbsp;you&nbsp;should&nbsp;do. &nbsp;So&nbsp;rather&nbsp;than&nbsp;the&nbsp;try&nbsp;to&nbsp;co-opt&nbsp;a&nbsp;paged&nbsp;database&nbsp;fine&nbsp;tuned&nbsp;for&nbsp;rendering&nbsp;you&nbsp;consider&nbsp;building&nbsp;an&nbsp;parallel&nbsp;database&nbsp;and&nbsp;intersection&nbsp;scheme&nbsp;just&nbsp;for&nbsp;doing&nbsp;your&nbsp;intersections.&nbsp;I.e.&nbsp;if&nbsp;you&nbsp;have&nbsp;a&nbsp;square&nbsp;peg&nbsp;and&nbsp;it&nbsp;has&nbsp;to&nbsp;be&nbsp;a&nbsp;square&nbsp;peg&nbsp;then&nbsp;build&nbsp;a&nbsp;square&nbsp;hole&nbsp;to&nbsp;start&nbsp;with&nbsp;rather&nbsp;than&nbsp;try&nbsp;and&nbsp;force&nbsp;it&nbsp;into&nbsp;a&nbsp;pre-pared&nbsp;round&nbsp;hole.&lt;br&gt;&lt;br&gt;&lt;/div&gt;Doing&nbsp;this&nbsp;is&nbsp;non-trivial,&nbsp;but&nbsp;should&nbsp;be&nbsp;significantly&nbsp;less&nbsp;work&nbsp;than&nbsp;building&nbsp;a&nbsp;scheme&nbsp;for&nbsp;rendering&nbsp;purposes.&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;Robert.&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;13&nbsp;August&nbsp;2015&nbsp;at&nbsp;20:29,&nbsp;Shayne&nbsp;Tueller&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:shayne.tueller@hill.af.mil&quot;&nbsp;target=&quot;_blank&quot;&gt;shayne.tueller@hill.af.mil&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Robert,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;appreciate&nbsp;the&nbsp;detailed&nbsp;response&nbsp;and&nbsp;correction.&nbsp;My&nbsp;databases&nbsp;are&nbsp;always&nbsp;geocentric&nbsp;round&nbsp;earth&nbsp;built&nbsp;from&nbsp;source&nbsp;DTED&nbsp;or&nbsp;GeoTiff&nbsp;data.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;guess&nbsp;my&nbsp;problems&nbsp;are&nbsp;two-fold&nbsp;which&nbsp;are&nbsp;performance&nbsp;and&nbsp;correlation.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;was&nbsp;hoping&nbsp;that&nbsp;the&nbsp;general&nbsp;implementation&nbsp;in&nbsp;OSG&nbsp;would&nbsp;get&nbsp;me&nbsp;there&nbsp;on&nbsp;both&nbsp;counts&nbsp;but&nbsp;it&nbsp;is&nbsp;apparent&nbsp;that&nbsp;I&nbsp;will&nbsp;most&nbsp;likely&nbsp;need&nbsp;to&nbsp;roll&nbsp;my&nbsp;own&nbsp;stuff&nbsp;to&nbsp;get&nbsp;the&nbsp;performance&nbsp;and&nbsp;correlation&nbsp;to&nbsp;where&nbsp;I&nbsp;need&nbsp;it&nbsp;to&nbsp;be.&lt;br&gt;<br>
&lt;br&gt;<br>
I&#39;m&nbsp;hoping&nbsp;to&nbsp;still&nbsp;use&nbsp;the&nbsp;some&nbsp;of&nbsp;the&nbsp;OSG&nbsp;infrastructure&nbsp;(e.g.&nbsp;the&nbsp;database&nbsp;pager)&nbsp;since&nbsp;I&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;develop&nbsp;something&nbsp;from&nbsp;scratch&nbsp;entirely.&lt;br&gt;<br>
&lt;br&gt;<br>
At&nbsp;this&nbsp;point,&nbsp;correlation&nbsp;seems&nbsp;to&nbsp;be&nbsp;a&nbsp;much&nbsp;larger&nbsp;problem&nbsp;than&nbsp;performance&nbsp;at&nbsp;this&nbsp;point.&nbsp;I&nbsp;was&nbsp;hoping&nbsp;that&nbsp;when&nbsp;I&nbsp;query&nbsp;for&nbsp;terrain&nbsp;height&nbsp;at&nbsp;a&nbsp;given&nbsp;lat,lon,&nbsp;the&nbsp;OSG&nbsp;would&nbsp;page&nbsp;in&nbsp;the&nbsp;highest&nbsp;LOD&nbsp;which&nbsp;would&nbsp;match&nbsp;closely&nbsp;the&nbsp;height&nbsp;of&nbsp;the&nbsp;source&nbsp;data.&nbsp;Unfortunately&nbsp;this&nbsp;is&nbsp;NOT&nbsp;the&nbsp;case.&nbsp;In&nbsp;most&nbsp;instances,&nbsp;I&nbsp;see&nbsp;height&nbsp;deltas&nbsp;of&nbsp;30-50&nbsp;feet&nbsp;between&nbsp;what&nbsp;OSG&nbsp;returns&nbsp;and&nbsp;what&nbsp;the&nbsp;actual&nbsp;source&nbsp;data&nbsp;reports&nbsp;for&nbsp;height!&nbsp;I&nbsp;understand&nbsp;the&nbsp;interpolation&nbsp;schemes &nbsp;between&nbsp;elevation&nbsp;data&nbsp;will&nbsp;introduce&nbsp;differences&nbsp;but&nbsp;I&nbsp;wouldn&#39;t&nbsp;expect&nbsp;that&nbsp;much.&lt;br&gt;<br>
&lt;br&gt;<br>
Do&nbsp;you&nbsp;know&nbsp;any&nbsp;way&nbsp;to&nbsp;resolve&nbsp;this&nbsp;problem?&nbsp;Is&nbsp;the&nbsp;highest&nbsp;LOD&nbsp;of&nbsp;an&nbsp;osgTerrain::TerrainTile&nbsp;that&nbsp;much&nbsp;different&nbsp;from&nbsp;the&nbsp;source&nbsp;elevation&nbsp;data&nbsp;for&nbsp;its&nbsp;elevation&nbsp;values?&nbsp;It&nbsp;would&nbsp;appear&nbsp;that&nbsp;it&nbsp;is&nbsp;which&nbsp;is&nbsp;a&nbsp;major&nbsp;problem.&nbsp;I&nbsp;suppose&nbsp;I&nbsp;could&nbsp;try&nbsp;and&nbsp;build&nbsp;a&nbsp;height&nbsp;field&nbsp;database&nbsp;from&nbsp;source&nbsp;data&nbsp;in&nbsp;VPB&nbsp;but&nbsp;I&nbsp;haven&#39;t&nbsp;been&nbsp;able&nbsp;to&nbsp;get&nbsp;that&nbsp;to&nbsp;work.&nbsp;Further,&nbsp;can&nbsp;a&nbsp;height&nbsp;field&nbsp;be&nbsp;built&nbsp;as&nbsp;a&nbsp;paged&nbsp;LOD&nbsp;database&nbsp;or&nbsp;is&nbsp;it&nbsp;just&nbsp;flat?&nbsp;How&#39;s&nbsp;the&nbsp;performance&nbsp;for&nbsp;a&nbsp;height&nbsp;field&nbsp;database?&nbsp;Not&nbsp;too&nbsp;good&nbsp;compared&nbsp;with&nbsp;an&nbsp;osgTerrain&nbsp;database&nbsp;would&nbsp;be&nbsp;my&nbsp;guess...&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;you&nbsp;could&nbsp;answer&nbsp;these&nbsp;questions&nbsp;or&nbsp;provide&nbsp;feedback&nbsp;on&nbsp;the&nbsp;correlation&nbsp;issue,&nbsp;that&nbsp;would&nbsp;be&nbsp;great.&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks,&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;Shayne&lt;br&gt;<br>
&lt;br&gt;<br>
------------------&lt;br&gt;<br>
Read&nbsp;this&nbsp;topic&nbsp;online&nbsp;here:&lt;br&gt;<br>
&lt;/span&gt;&lt;a&nbsp;href=&quot;http://forum.openscenegraph.org/viewtopic.php?p=64760#64760&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://forum.openscenegraph.org/viewtopic.php?p=64760#64760&lt;/a&gt;&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
