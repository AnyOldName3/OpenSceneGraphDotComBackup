<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;everyone,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;problem&nbsp;regardint&nbsp;integer&nbsp;textures.&nbsp;The&nbsp;setup&nbsp;is&nbsp;as&nbsp;follows:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;A&nbsp;rtt&nbsp;camera&nbsp;uses&nbsp;custom&nbsp;fragment&nbsp;shaders&nbsp;to&nbsp;push&nbsp;data&nbsp;into&nbsp;3&nbsp;textures:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;COLOR_BUFFER0:&nbsp;color&nbsp;buffer&lt;/div&gt;&lt;div&gt;COLOR_BUFFER1:&nbsp;rgb&nbsp;uint&nbsp;id&nbsp;buffer&lt;/div&gt;&lt;div&gt;DEPTH_BUFFER:&nbsp;depth&nbsp;buffer&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;data&nbsp;inside&nbsp;those&nbsp;buffers&nbsp;is&nbsp;correct.&nbsp;However,&nbsp;I&nbsp;need&nbsp;the&nbsp;id&nbsp;buffer&nbsp;on&nbsp;the&nbsp;cpu,&nbsp;and&nbsp;can&#39;t&nbsp;get&nbsp;it&nbsp;to&nbsp;work.&nbsp;I&nbsp;create&nbsp;the&nbsp;id&nbsp;buffer&nbsp;as&nbsp;follows:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;osg::ref_ptr&lt;osg::Texture2D&gt;&nbsp;TextureManager::create2DIdTexture()&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;osg::ref_ptr&lt;osg::Texture2D&gt;&nbsp;idTex&nbsp;=&nbsp;new&nbsp;osg::Texture2D();&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;idTex-&gt;setTextureSize(1,&nbsp;1);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;idTex-&gt;setInternalFormat(GL_RGB32UI_EXT);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;idTex-&gt;setSourceFormat(GL_RGBA_INTEGER_EXT);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;idTex-&gt;setSourceType(GL_UNSIGNED_INT);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;idTex-&gt;setWrap(osg::Texture::WRAP_S,&nbsp;osg::Texture::CLAMP);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;idTex-&gt;setWrap(osg::Texture::WRAP_T,&nbsp;osg::Texture::CLAMP);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;idTex-&gt;setBorderWidth(0);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;idTex-&gt;setFilter(osg::Texture::MIN_FILTER,&nbsp;osg::Texture::NEAREST);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;idTex-&gt;setFilter(osg::Texture::MAG_FILTER,&nbsp;osg::Texture::NEAREST);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;return&nbsp;idTex;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;I&nbsp;have&nbsp;tried&nbsp;setting&nbsp;an&nbsp;image&nbsp;for&nbsp;the&nbsp;id&nbsp;buffer&nbsp;and&nbsp;attaching&nbsp;that&nbsp;one&nbsp;to&nbsp;the&nbsp;camera&nbsp;instead&nbsp;of&nbsp;the&nbsp;texture&nbsp;as&nbsp;in&nbsp;the&nbsp;osgprerender&nbsp;example,&nbsp;which&nbsp;results&nbsp;in&nbsp;opengl&nbsp;errors&nbsp;once&nbsp;I&nbsp;attach&nbsp;it&nbsp;to&nbsp;the&nbsp;camera.&nbsp;Image&nbsp;creation:&lt;/li&gt;&lt;/ul&gt;m_idBuffer&nbsp;=&nbsp;TextureManager::get2DTexture(RttBufferType::Id);&lt;/div&gt;&lt;div&gt;osg::Image&nbsp;*img&nbsp;=&nbsp;new&nbsp;osg::Image();&lt;br&gt;&lt;/div&gt;&lt;div&gt;img-&gt;allocateImage(m_idBuffer-&gt;getTextureWidth(),&nbsp;m_idBuffer-&gt;getTextureHeight(),&nbsp;1,&nbsp;GL_RGB32UI_EXT,&nbsp;GL_UNSIGNED_INT);&lt;/div&gt;&lt;div&gt;m_idBuffer-&gt;setImage(img);&lt;br&gt;&lt;ul&gt;&lt;li&gt;Using&nbsp;a&nbsp;camera&nbsp;callback&nbsp;to&nbsp;read&nbsp;the&nbsp;image&nbsp;data,&nbsp;I&nbsp;also&nbsp;get&nbsp;opengl&nbsp;erros.&nbsp;To&nbsp;ensure&nbsp;that&nbsp;the&nbsp;correct&nbsp;texture&nbsp;is&nbsp;bound&nbsp;in&nbsp;the&nbsp;callback,&nbsp;I&nbsp;have&nbsp;deactivated&nbsp;the&nbsp;other&nbsp;two&nbsp;during&nbsp;my&nbsp;tests.&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;void&nbsp;ReadBufferCallback::operator()&nbsp;(osg::RenderInfo&amp;&nbsp;renderInfo)&nbsp;const&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;osg::Image&nbsp;*img&nbsp;=&nbsp;new&nbsp;osg::Image;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;img-&gt;readPixels(0,&nbsp;0,&nbsp;1000,&nbsp;1000,&nbsp;GL_RGB_INTEGER_EXT,&nbsp;GL_UNSIGNED_INT);&lt;br&gt;&lt;/div&gt;&lt;div&gt;}&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;I&nbsp;have&nbsp;tested&nbsp;doing&nbsp;the&nbsp;same&nbsp;with&nbsp;the&nbsp;color&nbsp;buffer,&nbsp;reading&nbsp;it&nbsp;back&nbsp;to&nbsp;the&nbsp;cpu&nbsp;works&nbsp;just&nbsp;fine&nbsp;with&nbsp;the&nbsp;method&nbsp;of&nbsp;osgprerender&nbsp;(attaching&nbsp;the&nbsp;image&nbsp;to&nbsp;the&nbsp;rtt&nbsp;camera&nbsp;instead&nbsp;of&nbsp;the&nbsp;texture).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Does&nbsp;someone&nbsp;know&nbsp;why&nbsp;I&nbsp;am&nbsp;getting&nbsp;these&nbsp;errors?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Marianne&lt;/div&gt;&lt;/div&gt;<br>

</tt>
