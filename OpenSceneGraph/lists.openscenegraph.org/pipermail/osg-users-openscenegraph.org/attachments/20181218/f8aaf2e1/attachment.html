<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Robert,&nbsp;yes&nbsp;I&#39;m&nbsp;working&nbsp;on&nbsp;a&nbsp;standalone&nbsp;test&nbsp;program&nbsp;now.&nbsp;Multithreaded&nbsp;crashes&nbsp;are&nbsp;often&nbsp;hard&nbsp;to&nbsp;reproduce&nbsp;in&nbsp;a&nbsp;vacuum,&nbsp;but&nbsp;as&nbsp;soon&nbsp;as&nbsp;I&nbsp;have&nbsp;something&nbsp;I&#39;ll&nbsp;post&nbsp;here.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;running&nbsp;on&nbsp;Win10,&nbsp;Nvidia&nbsp;GTX&nbsp;980&nbsp;(latest&nbsp;drivers),&nbsp;Visual&nbsp;Studio&nbsp;2013,&nbsp;OpenSceneGraph-3.6&nbsp;branch.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Ravi&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Tue,&nbsp;Dec&nbsp;18,&nbsp;2018&nbsp;at&nbsp;4:24&nbsp;AM&nbsp;Robert&nbsp;Osfield&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:robert.osfield@gmail.com&quot;&gt;robert.osfield@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;Ravi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;guess&nbsp;is&nbsp;that&nbsp;the&nbsp;new&nbsp;text&nbsp;implementation&nbsp;isn&#39;t&nbsp;the&nbsp;cause&nbsp;of&nbsp;the&nbsp;crash,&nbsp;only&nbsp;it&#39;s&nbsp;the&nbsp;straw&nbsp;that&nbsp;broke&nbsp;the&nbsp;camels&nbsp;back,&nbsp;and&nbsp;actually&nbsp;there&nbsp;is&nbsp;an&nbsp;underlying&nbsp;limitation&nbsp;with&nbsp;the&nbsp;OSG&nbsp;w..r.t&nbsp;you&nbsp;specific&nbsp;usage&nbsp;case.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Could&nbsp;you&nbsp;create&nbsp;a&nbsp;small&nbsp;test&nbsp;program&nbsp;that&nbsp;reproduces&nbsp;the&nbsp;crash. &nbsp;Details&nbsp;on&nbsp;your&nbsp;OS/dev&nbsp;tools/hardware&nbsp;will&nbsp;be&nbsp;useful&nbsp;too.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers.&lt;br&gt;&lt;/div&gt;&lt;div&gt;Robert.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Tue,&nbsp;18&nbsp;Dec&nbsp;2018&nbsp;at&nbsp;08:50,&nbsp;Ravi&nbsp;Mathur&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ravidavi@utexas.edu&quot;&nbsp;target=&quot;_blank&quot;&gt;ravidavi@utexas.edu&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hello&nbsp;all,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;seeing&nbsp;a&nbsp;crash&nbsp;on&nbsp;the&nbsp;OpenSceneGraph-3.6&nbsp;branch&nbsp;that&nbsp;occurs&nbsp;when&nbsp;I&nbsp;have&nbsp;two&nbsp;CompositeViewers&nbsp;that&nbsp;contain&nbsp;Text&nbsp;objects&nbsp;in&nbsp;their&nbsp;scenes.&nbsp;My&nbsp;simplified&nbsp;scenario&nbsp;is&nbsp;this:&lt;/div&gt;&lt;div&gt;-&nbsp;2&nbsp;CompositeViewers,&nbsp;each&nbsp;in&nbsp;singlethreaded&nbsp;mode,&nbsp;but&nbsp;being&nbsp;run&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;in&nbsp;separate&nbsp;threads&nbsp;(via&nbsp;OpenThreads::Thread&nbsp;wrappers)&lt;/div&gt;&lt;div&gt;-&nbsp;The&nbsp;viewers&nbsp;do&nbsp;not&nbsp;share&nbsp;scenes&nbsp;or&nbsp;contexts,&nbsp;and&nbsp;each&nbsp;has&nbsp;a&nbsp;single&nbsp;Text&nbsp;object&nbsp;as&nbsp;its&nbsp;scene&lt;/div&gt;&lt;div&gt;-&nbsp;Each&nbsp;viewer&nbsp;is&nbsp;destroyed&nbsp;immediately&nbsp;after&nbsp;its&nbsp;run()&nbsp;loop&nbsp;returns&nbsp;(needed&nbsp;for&nbsp;my&nbsp;application)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Both&nbsp;viewers&nbsp;animate&nbsp;just&nbsp;fine&nbsp;in&nbsp;their&nbsp;own&nbsp;windows.&nbsp;The&nbsp;crash&nbsp;happens&nbsp;if&nbsp;one&nbsp;viewer&nbsp;is&nbsp;being&nbsp;destroyed&nbsp;while&nbsp;the&nbsp;other&nbsp;is&nbsp;actively&nbsp;rendering.&nbsp;Note&nbsp;that&nbsp;it&nbsp;only&nbsp;seems&nbsp;to&nbsp;crash&nbsp;if&nbsp;there&nbsp;are&nbsp;Text&nbsp;objects&nbsp;in&nbsp;each&nbsp;scene,&nbsp;and&nbsp;did&nbsp;not&nbsp;crash&nbsp;with&nbsp;the&nbsp;old&nbsp;(pre-3.6)&nbsp;Text&nbsp;implementation. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;this&nbsp;usage&nbsp;model&nbsp;ok&nbsp;in&nbsp;the&nbsp;first&nbsp;place?&nbsp;Robert,&nbsp;I&nbsp;read&nbsp;your&nbsp;post&nbsp;&lt;a&nbsp;href=&quot;http://forum.openscenegraph.org/viewtopic.php?t=16844&quot;&nbsp;target=&quot;_blank&quot;&gt;in&nbsp;this&nbsp;recent&nbsp;thread&lt;/a&gt; in&nbsp;which&nbsp;you&nbsp;advise&nbsp;against&nbsp;manually&nbsp;destroying&nbsp;viewers.&nbsp;Should&nbsp;I&nbsp;assume&nbsp;that&nbsp;I&nbsp;was&nbsp;just&nbsp;lucky&nbsp;in&nbsp;getting&nbsp;away&nbsp;with&nbsp;this&nbsp;until&nbsp;now?&nbsp;The&nbsp;new&nbsp;Text&nbsp;implementation&nbsp;seems&nbsp;to&nbsp;be&nbsp;the&nbsp;only&nbsp;thing&nbsp;that&nbsp;triggers&nbsp;the&nbsp;crash.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;case&nbsp;anybody&nbsp;is&nbsp;interested,&nbsp;the&nbsp;crash&nbsp;happens&nbsp;due&nbsp;to&nbsp;this&nbsp;sequence&nbsp;of&nbsp;calls:&lt;/div&gt;&lt;div&gt;-&nbsp;~CompositeViewer()&nbsp;calls&nbsp;GraphicsContext::close(),&nbsp;which&nbsp;deletes&nbsp;its&nbsp;State&lt;/div&gt;&lt;div&gt;-&nbsp;~CompositeViewer()&nbsp;then&nbsp;destroys&nbsp;its&nbsp;osgViewer::View,&nbsp;which&nbsp;in&nbsp;turn&nbsp;destroys&nbsp;its&nbsp;Camera&lt;/div&gt;&lt;div&gt;-&nbsp;~Camera()&nbsp;eventually&nbsp;calls&nbsp;osgText::releaseGLObjects()&nbsp;with&nbsp;a&nbsp;null&nbsp;State.&lt;/div&gt;&lt;div&gt;-&nbsp;osgText::releaseGLObjects(null)&nbsp;deletes&nbsp;text-related&nbsp;objects&nbsp;(Programs)&nbsp;on&nbsp;ALL&nbsp;contexts&lt;/div&gt;&lt;div&gt;-&nbsp;The&nbsp;other&nbsp;CompositeViewer,&nbsp;which&nbsp;is&nbsp;actively&nbsp;rendering&nbsp;its&nbsp;Text&nbsp;on&nbsp;another&nbsp;context,&nbsp;crashes&nbsp;with&nbsp;an&nbsp;access&nbsp;violation&nbsp;since&nbsp;its&nbsp;Text-related&nbsp;Programs&nbsp;were&nbsp;just&nbsp;deleted.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;Ravi&lt;/div&gt;&lt;/div&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
