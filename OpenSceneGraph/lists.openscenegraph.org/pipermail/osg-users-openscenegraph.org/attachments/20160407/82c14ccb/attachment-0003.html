<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;the&nbsp;osg::ref_ptr&lt;&gt;&nbsp;could&nbsp;be&nbsp;wrapped&nbsp;into&nbsp;a&nbsp;smart&nbsp;pointer,&nbsp;right?&nbsp;But&nbsp;what&#39;s&nbsp;the&nbsp;point&nbsp;;)&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2016-04-07&nbsp;10:33&nbsp;GMT+02:00&nbsp;Sebastian&nbsp;Messerschmidt&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:sebastian.messerschmidt@gmx.de&quot;&nbsp;target=&quot;_blank&quot;&gt;sebastian.messerschmidt@gmx.de&lt;/a&gt;&gt;&lt;/span&gt;:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hi&nbsp;Vincent,&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hello&lt;br&gt;<br>
&lt;br&gt;<br>
I&#39;m&nbsp;trying&nbsp;to&nbsp;use&nbsp;osg:Vec3Array&nbsp;with&nbsp;a&nbsp;c++11&nbsp;smart&nbsp;pointer&nbsp;instead&nbsp;of&nbsp;osg&nbsp;smart&nbsp;pointer.&nbsp;I&nbsp;aim&nbsp;to&nbsp;join&nbsp;two&nbsp;APIs:&nbsp;osg&nbsp;and&nbsp;another&nbsp;one&nbsp;using&nbsp;C++11&nbsp;smart&nbsp;pointer.&nbsp;Apparently,&nbsp;this&nbsp;is&nbsp;a&nbsp;destructor&nbsp;problem:&nbsp;~TemplateArray&lt;&gt;()&nbsp;is&nbsp;private,&nbsp;so&nbsp;an&nbsp;explicit&nbsp;delete&nbsp;doesn&#39;t&nbsp;work.&nbsp;I&nbsp;have&nbsp;test&nbsp;many&nbsp;cases&nbsp;to&nbsp;understand&nbsp;the&nbsp;problem.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Code:&lt;br&gt;<br>
osg::Vec3Array&nbsp;*&nbsp;test&nbsp;=&nbsp;new&nbsp;osg::Vec3Array();&lt;br&gt;<br>
delete&nbsp;test;&nbsp;//&nbsp;error&nbsp;here&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Code:&lt;br&gt;<br>
std::shared_ptr&lt;osg::Vec3Array&gt;&nbsp;test2(new&nbsp;osg::Vec3Array());&nbsp;//&nbsp;error&nbsp;due&nbsp;to&nbsp;pointer&nbsp;releasing&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Code:&lt;br&gt;<br>
osg::Vec3Array&nbsp;test;&nbsp;//&nbsp;not&nbsp;work&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Code:&lt;br&gt;<br>
osg::ref_ptr&lt;osg::Vec3Array&gt;&nbsp;test3&nbsp;=&nbsp;new&nbsp;osg::Vec3Array();&nbsp;//&nbsp;this&nbsp;work&nbsp;fine.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;there&nbsp;are&nbsp;few&nbsp;solutions&nbsp;to&nbsp;use&nbsp;the&nbsp;Vec3Array:&nbsp;use&nbsp;osg&nbsp;smart&nbsp;pointer.&nbsp;What&nbsp;is&nbsp;the&nbsp;reason&nbsp;the&nbsp;destructor&nbsp;is&nbsp;protected&nbsp;even&nbsp;through&nbsp;the&nbsp;method&nbsp;is&nbsp;empty?&nbsp;Maybe&nbsp;to&nbsp;force&nbsp;developers&nbsp;to&nbsp;use&nbsp;smart&nbsp;pointers&nbsp;but&nbsp;I&#39;m&nbsp;constrained&nbsp;to&nbsp;use&nbsp;c++11&nbsp;smart&nbsp;pointer&nbsp;due&nbsp;to&nbsp;the&nbsp;second&nbsp;api.&nbsp;I&nbsp;think&nbsp;the&nbsp;only&nbsp;way,&nbsp;is&nbsp;to&nbsp;create&nbsp;a&nbsp;C++11&nbsp;smart&nbsp;pointer&nbsp;templated&nbsp;by&nbsp;osg&nbsp;smart&nbsp;pointer&nbsp;or&nbsp;a&nbsp;class&nbsp;which&nbsp;contains&nbsp;the&nbsp;osg&nbsp;smart&nbsp;pointer.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/span&gt;<br>
First&nbsp;of&nbsp;all,&nbsp;the&nbsp;osg&nbsp;will&nbsp;manage&nbsp;the&nbsp;array&nbsp;fine&nbsp;when&nbsp;you&nbsp;keep&nbsp;it&nbsp;in&nbsp;a&nbsp;drawable,&nbsp;so&nbsp;there&nbsp;should&nbsp;no&nbsp;need&nbsp;to&nbsp;use&nbsp;your&nbsp;own&nbsp;management.&nbsp;If&nbsp;you&nbsp;need&nbsp;to&nbsp;hold&nbsp;it&nbsp;outside,&nbsp;simply&nbsp;use&nbsp;the&nbsp;ref_ptr.&nbsp;the&nbsp;ref_ptr&nbsp;is&nbsp;basically&nbsp;an&nbsp;smart-pointer&nbsp;for&nbsp;osg::Object&nbsp;derived&nbsp;objects.&lt;br&gt;<br>
The&nbsp;reason&nbsp;the&nbsp;destructor&nbsp;is&nbsp;private&nbsp;is&nbsp;to&nbsp;prevent&nbsp;stack-instances&nbsp;of&nbsp;the&nbsp;type&nbsp;and&nbsp;to&nbsp;disallow&nbsp;use&nbsp;patterns&nbsp;like&nbsp;yours.&lt;br&gt;<br>
If&nbsp;i&nbsp;remember&nbsp;correctly&nbsp;there&nbsp;was&nbsp;some&nbsp;guide&nbsp;on&nbsp;this&nbsp;in&nbsp;the&nbsp;wiki/trac.&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Do&nbsp;you&nbsp;have&nbsp;an&nbsp;idea&nbsp;to&nbsp;use&nbsp;C+11&nbsp;smart&nbsp;pointer&nbsp;instead&nbsp;of&nbsp;osg&nbsp;one?&lt;br&gt;<br>
&lt;br&gt;&lt;/span&gt;<br>
Simply&nbsp;don&#39;t.&nbsp;It&nbsp;would&nbsp;not&nbsp;solve&nbsp;a&nbsp;single&nbsp;problem&nbsp;and&nbsp;would&nbsp;create&nbsp;pitfalls.&lt;br&gt;<br>
Use&nbsp;the&nbsp;osg::ref_ptr&nbsp;if&nbsp;you&nbsp;need&nbsp;to&nbsp;keep&nbsp;an&nbsp;object&nbsp;(it&nbsp;acts&nbsp;as&nbsp;a&nbsp;&quot;shared&nbsp;ptr&quot;).&nbsp;If&nbsp;you&nbsp;need&nbsp;a&nbsp;week&nbsp;smart&nbsp;ptr&nbsp;you&nbsp;can&nbsp;use&nbsp;observer&nbsp;pointer.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Sebastian&lt;/font&gt;&lt;/span&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
Thank&nbsp;you!&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
Vincent&lt;br&gt;<br>
&lt;br&gt;<br>
------------------&lt;br&gt;<br>
Read&nbsp;this&nbsp;topic&nbsp;online&nbsp;here:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://forum.openscenegraph.org/viewtopic.php?p=66760#66760&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://forum.openscenegraph.org/viewtopic.php?p=66760#66760&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
