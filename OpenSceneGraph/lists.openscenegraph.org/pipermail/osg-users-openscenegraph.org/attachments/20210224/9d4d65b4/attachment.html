<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;James, &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Its&nbsp;not&nbsp;direct&nbsp;answer&nbsp;to&nbsp;your&nbsp;questions&nbsp;but&nbsp;a&nbsp;code&nbsp;snippet&nbsp;overloading&nbsp;Program&nbsp;which&nbsp;I&nbsp;used&nbsp;to&nbsp;change&nbsp;shader&nbsp;variant&nbsp;depending&nbsp;on&nbsp;compilation/link&nbsp;result&nbsp;(from&nbsp;most&nbsp;advanced&nbsp;to&nbsp;more&nbsp;basic&nbsp;fallbacks). &nbsp;This&nbsp;approach&nbsp;was&nbsp;quite&nbsp;simple&nbsp;I&nbsp;tested&nbsp;Program&nbsp;compilation&nbsp;result&nbsp;including&nbsp;compilation/link&nbsp;log&nbsp;obtained&nbsp;from&nbsp;PCP(PerContextProgram&nbsp;?)&nbsp;by&nbsp;simply&nbsp;checking&nbsp;if&nbsp;my&nbsp;Program&nbsp;was&nbsp;really&nbsp;applied&nbsp;after&nbsp;Program::apply()&nbsp;and&nbsp;if&nbsp;not&nbsp;adopted&nbsp;fallback&nbsp;to&nbsp;less&nbsp;demanding&nbsp;shaders.&nbsp;Not&nbsp;sure&nbsp;if&nbsp;this&nbsp;will&nbsp;solve&nbsp;your&nbsp;problem&nbsp;but&nbsp;perhaps&nbsp;will&nbsp;be&nbsp;a&nbsp;step&nbsp;forward&nbsp;to&nbsp;proper&nbsp;solution.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;class&nbsp;MyProgram:&nbsp;public&nbsp;osg::Program&lt;br&gt;{&lt;br&gt;public:&lt;br&gt; &nbsp; &nbsp;MyProgram(&nbsp;):&nbsp;_shaderVariant(&nbsp;DefaultShaderVariant&nbsp;)&lt;br&gt; &nbsp; &nbsp;{&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;osg::Shader&nbsp;*&nbsp;vertShader&nbsp;=&nbsp;osgDB::readShaderFile(&nbsp;osg::Shader::VERTEX,&nbsp;&quot;MyVertexShader.glsl&quot;&nbsp;);&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;osg::Shader&nbsp;*&nbsp;fragShader&nbsp;=&nbsp;osgDB::readShaderFile(&nbsp;osg::Shader::FRAGMENT,&nbsp;&quot;MyFragmentShader.glsl&quot;&nbsp;);&lt;br&gt;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;addShader(&nbsp;vertShader&nbsp;);&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;addShader(&nbsp;fragShader&nbsp;);&nbsp; &nbsp; &nbsp; &nbsp; &lt;br&gt;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;notified.resize(&nbsp;DefaultShaderVariant&nbsp;+&nbsp;1&nbsp;);&lt;br&gt; &nbsp; &nbsp;}&lt;br&gt;&lt;br&gt; &nbsp; &nbsp;void&nbsp;setDigitDefine(&nbsp;std::string&nbsp;MACRO,&nbsp;int&nbsp;DIGIT&nbsp;)&nbsp;const&lt;br&gt; &nbsp; &nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// &nbsp;For&nbsp;brevity&nbsp;code&nbsp;removed&nbsp;but&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// &nbsp;this&nbsp;function&nbsp;simply&nbsp;checks&nbsp;shader&nbsp;sources&nbsp;and &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// &nbsp; finds&nbsp;all&nbsp;ocurences&nbsp;of &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;#define&nbsp;MACRO&nbsp;DEFAULT_DIGIT &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// &nbsp;and&nbsp;replaces&nbsp;them &nbsp;to &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;#define&nbsp;MACRO&nbsp;DIGIT &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;to&nbsp;select&nbsp;shader&nbsp;codepath&nbsp;dependant&nbsp;on&nbsp;macro&nbsp;value&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;}&lt;br&gt;&lt;br&gt; &nbsp; &nbsp;void&nbsp;apply(&nbsp;osg::State&amp;&nbsp;state&nbsp;)&nbsp;const&lt;br&gt; &nbsp; &nbsp;{&nbsp; &nbsp; &nbsp; &nbsp; &lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;while(&nbsp;_shaderVariant&nbsp;&gt;&nbsp;0&nbsp;)&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;{&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;osg::Program::apply(&nbsp;state&nbsp;);&lt;br&gt;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;Break&nbsp;if&nbsp;program&nbsp;was&nbsp;applied&nbsp;ie&nbsp;its&nbsp;not&nbsp;null&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if(&nbsp;state.getLastAppliedProgramObject()&nbsp;!=&nbsp;NULL&nbsp;)&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if(&nbsp;!notified[0]&nbsp;)&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;std::cout&lt;&lt;&nbsp;&quot;INFO:&nbsp;MyProgram&nbsp;-&nbsp;GLSL&nbsp;Compilation&nbsp;Succeeded.&quot;&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;std::cout&lt;&lt;&nbsp;&quot;&nbsp; Shader&nbsp;variant:&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;_shaderVariant&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;std::cout&lt;&lt;&nbsp;&quot;&nbsp; GL&nbsp;Vendor:&nbsp; &nbsp; &nbsp; &quot;&nbsp;&lt;&lt;&nbsp;glGetString(GL_VENDOR)&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;std::cout&lt;&lt;&nbsp;&quot;&nbsp; GL&nbsp;Renderer:&nbsp; &nbsp; &quot;&nbsp;&lt;&lt;&nbsp;glGetString(GL_RENDERER)&nbsp;&lt;&lt;&nbsp;std::endl;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;std::cout&lt;&lt;&nbsp;&quot;&nbsp; GL&nbsp;Version:&nbsp; &nbsp; &nbsp;&quot;&nbsp;&lt;&lt;&nbsp;glGetString(GL_VERSION)&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;notified[0]&nbsp;=&nbsp;true;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;break;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if(&nbsp;!notified[_shaderVariant]&nbsp;)&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;std::string&nbsp;infoLog;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;getPCP(&nbsp;state&nbsp;)-&gt;getInfoLog(&nbsp;infoLog&nbsp;);&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;std::cout&lt;&lt;&nbsp;&quot;ERROR:&nbsp;MyProgram&nbsp;-&nbsp;GLSL&nbsp;Compilation&nbsp;Failed.&quot;&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;std::cout&lt;&lt;&nbsp;&quot;&nbsp; Shader&nbsp;variant:&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;_shaderVariant&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;std::cout&lt;&lt;&nbsp;&quot;&nbsp; GL&nbsp;Vendor:&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;glGetString(GL_VENDOR)&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;std::cout&lt;&lt;&nbsp;&quot;&nbsp; GL&nbsp;Renderer:&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;glGetString(GL_RENDERER)&nbsp;&lt;&lt;&nbsp;std::endl;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;std::cout&lt;&lt;&nbsp;&quot;&nbsp; GL&nbsp;Version:&nbsp;&quot;&nbsp;&lt;&lt;&nbsp;glGetString(GL_VERSION)&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;std::cout&lt;&lt;&nbsp;infoLog&nbsp;&lt;&lt;&nbsp;std::endl;&lt;br&gt;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;notified[_shaderVariant]&nbsp;=&nbsp;true;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;Switch&nbsp;to&nbsp;fallback&nbsp;variants&nbsp;if&nbsp;program&nbsp;link&nbsp;failed&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;setDigitDefine(&nbsp;&quot;SHADER_VARIANT&quot;,&nbsp;--_shaderVariant&nbsp;);&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;br&gt; &nbsp; &nbsp;}&lt;br&gt;&lt;br&gt;protected:&lt;br&gt; &nbsp; &nbsp;mutable&nbsp;int&nbsp;_shaderVariant;&lt;br&gt; &nbsp; &nbsp;static&nbsp;const&nbsp;int&nbsp;DefaultShaderVariant&nbsp;=&nbsp;2;&lt;br&gt; &nbsp; &nbsp;mutable&nbsp;std::vector&lt;&nbsp;bool&nbsp;&gt;&nbsp;notified;&lt;br&gt;};&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;br&gt;&lt;/div&gt;&lt;div&gt;Wojtek&nbsp;Lewandowski&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;śr.,&nbsp;24&nbsp;lut&nbsp;2021&nbsp;o&nbsp;10:30 James&nbsp;Turner&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:zakalawe@mac.com&quot;&gt;zakalawe@mac.com&lt;/a&gt;&gt;&nbsp;napisał(a):&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;Hello,&lt;br&gt;<br>
&lt;br&gt;<br>
I’m&nbsp;trying&nbsp;to&nbsp;extract&nbsp;shader&nbsp;compile&nbsp;and&nbsp;link&nbsp;info&nbsp;logs&nbsp;at&nbsp;runtime,&nbsp;so&nbsp;I&nbsp;can&nbsp;log+report&nbsp;them.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;note&nbsp;osg::Program::getGlProgramInfoLog&nbsp;exists,&nbsp;obviously&nbsp;it&nbsp;takes&nbsp;a&nbsp;context&nbsp;ID&nbsp;since&nbsp;the&nbsp;PerContextProgram&nbsp;is&nbsp;what&nbsp;has&nbsp;the&nbsp;actual&nbsp;errors.&lt;br&gt;<br>
&lt;br&gt;<br>
Two&nbsp;things&nbsp;I&nbsp;need&nbsp;help&nbsp;with:&lt;br&gt;<br>
&lt;br&gt;<br>
1)&nbsp;does&nbsp;the&nbsp;program&nbsp;log&nbsp;also&nbsp;contain&nbsp;shader&nbsp;compile&nbsp;errors,&nbsp;or&nbsp;is&nbsp;this&nbsp;only&nbsp;the&nbsp;link&nbsp;log?&nbsp;I&nbsp;don’t&nbsp;see&nbsp;a&nbsp;corresponding&nbsp;APi&nbsp;on&nbsp;osg::Shader,&nbsp;is&nbsp;why&nbsp;I&nbsp;ask&lt;br&gt;<br>
&lt;br&gt;<br>
2)&nbsp;*when*&nbsp;can&nbsp;I&nbsp;call&nbsp;the&nbsp;log&nbsp;functions&nbsp;and&nbsp;expect&nbsp;to&nbsp;get&nbsp;valid&nbsp;results?&nbsp;Given&nbsp;the&nbsp;OSg&nbsp;drawing&nbsp;model,&nbsp;obviously&nbsp;the&nbsp;log&nbsp;won’t&nbsp;be&nbsp;available&nbsp;immediately.&nbsp;Do&nbsp;I&nbsp;need&nbsp;to&nbsp;use&nbsp;a&nbsp;DrawCallback&nbsp;to&nbsp;check&nbsp;the&nbsp;log&nbsp;after&nbsp;the&nbsp;first&nbsp;time&nbsp;the&nbsp;Program&nbsp;has&nbsp;been&nbsp;used?&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;looked&nbsp;for&nbsp;examples&nbsp;of&nbsp;using&nbsp;getGlProgramInfoLog&nbsp;but&nbsp;unfortunately&nbsp;couldn&#39;t&nbsp;find&nbsp;any,&nbsp;maybe&nbsp;pointing&nbsp;me&nbsp;at&nbsp;one&nbsp;would&nbsp;answer&nbsp;both&nbsp;of&nbsp;these&nbsp;points.&lt;br&gt;<br>
&lt;br&gt;<br>
Kind&nbsp;regards,&lt;br&gt;<br>
James&nbsp;Turner&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;osg-users@lists.openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
