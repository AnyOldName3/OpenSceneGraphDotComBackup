<tt>
&lt;div&gt;Hi&nbsp;Steve,&lt;span&nbsp;style=&quot;background-color:&nbsp;rgb(239,&nbsp;239,&nbsp;239);&nbsp;font-size:&nbsp;12px;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;meet&nbsp;the&nbsp;similar&nbsp;question&nbsp;yesterday,how&nbsp;about&nbsp;use&nbsp;osg::texture::apply&nbsp;method&nbsp;with&nbsp;a&nbsp;new&nbsp;state&nbsp;under&nbsp;a&nbsp;new&nbsp;GraphicContext.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;this&nbsp;is&nbsp;the&nbsp;source&nbsp;of&nbsp;my&nbsp;idea.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;osg3.6.3&nbsp;osgConv&nbsp;application.&lt;/div&gt;&lt;div&gt;osgConv.cpp&nbsp;line&nbsp;152&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;void&nbsp;compress()&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MyGraphicsContext&nbsp;context;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!context.valid())&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::notify(osg::NOTICE)&lt;&lt;&quot;Error:&nbsp;Unable&nbsp;to&nbsp;create&nbsp;graphis&nbsp;context,&nbsp;problem&nbsp;with&nbsp;running&nbsp;osgViewer-&quot;&lt;&lt;osgViewerGetVersion()&lt;&lt;&quot;,&nbsp;cannot&nbsp;run&nbsp;compression.&quot;&lt;&lt;std::endl;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::ref_ptr&lt;osg::State&gt;&nbsp;state&nbsp;=&nbsp;new&nbsp;osg::State;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state-&gt;initializeExtensionProcs();&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(TextureSet::iterator&nbsp;itr=_textureSet.begin();&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itr!=_textureSet.end();&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++itr)&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::Texture*&nbsp;texture&nbsp;=&nbsp;const_cast&lt;osg::Texture*&gt;(itr-&gt;get());&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::Texture2D*&nbsp;texture2D&nbsp;=&nbsp;dynamic_cast&lt;osg::Texture2D*&gt;(texture);&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::Texture3D*&nbsp;texture3D&nbsp;=&nbsp;dynamic_cast&lt;osg::Texture3D*&gt;(texture);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;osg::ref_ptr&lt;osg::Image&gt;&nbsp;image&nbsp;=&nbsp;texture2D&nbsp;?&nbsp;texture2D-&gt;getImage()&nbsp;:&nbsp;(texture3D&nbsp;?&nbsp;texture3D-&gt;getImage()&nbsp;:&nbsp;0);&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(image.valid()&nbsp;&amp;&amp;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(image-&gt;getPixelFormat()==GL_RGB&nbsp;||&nbsp;image-&gt;getPixelFormat()==GL_RGBA)&nbsp;&amp;&amp;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(image-&gt;s()&gt;=32&nbsp;&amp;&amp;&nbsp;image-&gt;t()&gt;=32))&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture-&gt;setInternalFormatMode(_internalFormatMode);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;need&nbsp;to&nbsp;disable&nbsp;the&nbsp;unref&nbsp;after&nbsp;apply,&nbsp;otherwise&nbsp;the&nbsp;image&nbsp;could&nbsp;go&nbsp;out&nbsp;of&nbsp;scope.&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;unrefImageDataAfterApply&nbsp;=&nbsp;texture-&gt;getUnRefImageDataAfterApply();&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture-&gt;setUnRefImageDataAfterApply(false);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;get&nbsp;OpenGL&nbsp;driver&nbsp;to&nbsp;create&nbsp;texture&nbsp;from&nbsp;image.&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture-&gt;apply(*state);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;restore&nbsp;the&nbsp;original&nbsp;setting&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture-&gt;setUnRefImageDataAfterApply(unrefImageDataAfterApply);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image-&gt;readImageFromCurrentTexture(0,true);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture-&gt;setInternalFormatMode(osg::Texture::USE_IMAGE_DATA_FORMAT);&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-size:&nbsp;small;&quot;&gt;Thank&nbsp;you!&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-size:&nbsp;small;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-size:&nbsp;small;&quot;&gt;Cheers,&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-size:&nbsp;small;&quot;&gt;Qi&nbsp;Yu&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:&nbsp;12px;font-family:&nbsp;Arial&nbsp;Narrow;padding:2px&nbsp;0&nbsp;2px&nbsp;0;&quot;&gt;------------------&nbsp;原始邮件&nbsp;------------------&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:&nbsp;12px;background:#efefef;padding:8px;&quot;&gt;&lt;div&gt;&lt;b&gt;发件人:&lt;/b&gt;&nbsp;&quot;Steve&nbsp;Powers&quot;&lt;stevenapowers@gmail.com&gt;;&lt;/div&gt;&lt;div&gt;&lt;b&gt;发送时间:&lt;/b&gt;&nbsp;2019年5月9日(星期四)&nbsp;晚上11:33&lt;/div&gt;&lt;div&gt;&lt;b&gt;收件人:&lt;/b&gt;&nbsp;&quot;osg-users&quot;&lt;osg-users@lists.openscenegraph.org&gt;;&lt;wbr&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;主题:&lt;/b&gt;&nbsp;[osg-users]&nbsp;Is&nbsp;it&nbsp;possible&nbsp;to&nbsp;load&nbsp;texture&nbsp;without&nbsp;applying&nbsp;to&nbsp;adrawable&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-size:small&quot;&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;I&nbsp;am&nbsp;attempting&nbsp;to&nbsp;load&nbsp;a&nbsp;Texture2D&nbsp;into&nbsp;memory&nbsp;in&nbsp;order&nbsp;to&nbsp;pass&nbsp;the&nbsp;texture&nbsp;ID&nbsp;to&nbsp;a&nbsp;3rd&nbsp;party&nbsp;OpenGL&nbsp;object&nbsp;that&nbsp;will&nbsp;use&nbsp;the&nbsp;ID&nbsp;within&nbsp;it's&nbsp;own&nbsp;drawable&nbsp;class.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;The&nbsp;issue&nbsp;is&nbsp;that&nbsp;the&nbsp;TextureObject&nbsp;attached&nbsp;to&nbsp;the&nbsp;texture&nbsp;is&nbsp;not&nbsp;getting&nbsp;instantiated&nbsp;and&nbsp;I&nbsp;think&nbsp;this&nbsp;is&nbsp;because&nbsp;it&nbsp;is&nbsp;not&nbsp;assigned&nbsp;to&nbsp;a&nbsp;drawable&nbsp;object&nbsp;and&nbsp;thus&nbsp;not&nbsp;getting&nbsp;visited.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;Instead,&nbsp;I&nbsp;set&nbsp;the&nbsp;texture&nbsp;to&nbsp;a&nbsp;stateset&nbsp;on&nbsp;an&nbsp;osg::Group&nbsp;node&nbsp;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;stateset&nbsp;=&nbsp;group-&gt;getOrCreateStateSet();&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;stateset-&gt;setTextureAttributeAndModes(0,&nbsp;texture,&nbsp;osg::StateAttribute::ON);&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;have&nbsp;this&nbsp;texture&nbsp;object&nbsp;instantiate&nbsp;without&nbsp;physically&nbsp;using&nbsp;the&nbsp;texture&nbsp;on&nbsp;a&nbsp;drawable?&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;Thank&nbsp;you!&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;Cheers,&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;Steven&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;
</tt>
