<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hey,&nbsp;Sergey.&lt;br&gt;&lt;/div&gt;&lt;br&gt;How&nbsp;is&nbsp;your&nbsp;work&nbsp;on&nbsp;emscripten&nbsp;port&nbsp;going?&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2015-04-11&nbsp;4:32&nbsp;GMT+07:00&nbsp;Sergey&nbsp;Kurdakov&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:sergey.forum@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;sergey.forum@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Robert,&lt;br&gt;&lt;br&gt;&lt;/div&gt;after&nbsp;I&nbsp;wrote&nbsp;previous&nbsp;email&nbsp;I&nbsp;dug&nbsp;more&nbsp;into&nbsp;current&nbsp;emscripten&nbsp;way&nbsp;to&nbsp;convert&nbsp;gl&nbsp;calls.&lt;br&gt;&lt;br&gt;&lt;/div&gt;It&nbsp;looks&nbsp;like&nbsp;it&nbsp;is&nbsp;now&nbsp;possible&nbsp;to&nbsp;build&nbsp;working&nbsp;code&nbsp;with&nbsp;current&nbsp;osg&nbsp;naming&nbsp;scheme&nbsp;for&nbsp;extensions&nbsp;(&nbsp;unfortunately&nbsp;emscripten&nbsp;documentation&nbsp;on&nbsp;these&nbsp;issues&nbsp;is &nbsp;scarce,&nbsp;so&nbsp;I&nbsp;missed&nbsp;this&nbsp;possibility&nbsp;it&nbsp;in&nbsp;my&nbsp;previous&nbsp;porting&nbsp;attempts).&lt;br&gt;&lt;/div&gt;&lt;br&gt;Now&nbsp;I&nbsp;will&nbsp;make&nbsp;another&nbsp;round&nbsp;to&nbsp;convert&nbsp;osg&nbsp;with&nbsp;new&nbsp;approach&nbsp;and&nbsp;see&nbsp;if&nbsp;it&nbsp;actually&nbsp;works&nbsp;for&nbsp;osg.&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;Thus&nbsp;disregard&nbsp;my&nbsp;first&nbsp;request.&lt;br&gt;&lt;/div&gt;Thanks&nbsp;for&nbsp;your&nbsp;time.&lt;br&gt;&lt;br&gt;&lt;/div&gt;Regards&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;Sergey&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Apr&nbsp;10,&nbsp;2015&nbsp;at&nbsp;6:25&nbsp;PM,&nbsp;Sergey&nbsp;Kurdakov&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:sergey.forum@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;sergey.forum@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Robert,&lt;br&gt;&lt;br&gt;&lt;/div&gt;you&nbsp;might&nbsp;notice,&nbsp;that&nbsp;I&nbsp;try&nbsp;to&nbsp;make&nbsp;a&nbsp;port&nbsp;of&nbsp;osg&nbsp;to&nbsp;emscripten&lt;br&gt;&lt;br&gt;&lt;/div&gt;Overall&nbsp;osg&nbsp;&#39;for &nbsp;the&nbsp;web&#39; &nbsp;works,&nbsp;but&nbsp;I&nbsp;found&nbsp;several&nbsp;issues&nbsp;with&nbsp;emscripten&nbsp;which&nbsp;require&nbsp;me&nbsp;to&nbsp;keep&nbsp;&lt;br&gt;quite&nbsp;a&nbsp;different&nbsp;copy&nbsp;of&nbsp;osg&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;main&nbsp;issue&nbsp;are &nbsp;extensions.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;problem&nbsp;arises&nbsp;from&nbsp;how&nbsp;emscripten&nbsp;translates&nbsp;OpenGL&nbsp;to&nbsp;WebGL&nbsp;calls.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;it&nbsp;takes&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;gl*&nbsp;functions&nbsp;in&nbsp;C&nbsp;code&nbsp;and&nbsp;directly&nbsp;substitutes&nbsp;them &nbsp;with&nbsp;webgl&nbsp;gl*&nbsp;functions.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now&nbsp;it&nbsp;is&nbsp;clear&nbsp;what&nbsp;the&nbsp;problem&nbsp;is&nbsp;:&nbsp;that&nbsp;emscripten&nbsp;compiler&nbsp;does&nbsp;not&nbsp;understand&nbsp;extension&nbsp;functions&nbsp;which&nbsp;are&nbsp;set&nbsp;in&nbsp;the&nbsp;way&nbsp;&lt;br&gt;&lt;br&gt;setGLExtensionFuncPtr(_gl*&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;let&#39;s&nbsp;take&nbsp;an&nbsp;example:&lt;br&gt;&lt;br&gt;void&nbsp;Texture2DArray::Extensions::&lt;wbr&gt;glTexSubImage3D(&nbsp;GLenum&nbsp;target,&nbsp;GLint&nbsp;level,&nbsp;GLint&nbsp;xoffset,&nbsp;GLint&nbsp;yoffset,&nbsp;GLint&nbsp;zoffset,&nbsp;GLsizei&nbsp;width,&nbsp;GLsizei&nbsp;height,&nbsp;GLsizei&nbsp;depth,&nbsp;GLenum&nbsp;format,&nbsp;GLenum&nbsp;type,&nbsp;const&nbsp;GLvoid&nbsp;*pixels)&nbsp;const&lt;br&gt;{&lt;br&gt;   &nbsp;if&nbsp;(_glTexSubImage3D)&lt;br&gt;   &nbsp;{&lt;br&gt;       &nbsp;_glTexSubImage3D(&nbsp;target,&nbsp;level,&nbsp;xoffset,&nbsp;yoffset,&nbsp;zoffset,&nbsp;width,&nbsp;height,&nbsp;depth,&nbsp;format,&nbsp;type,&nbsp;pixels);&lt;br&gt;   &nbsp;}&lt;br&gt;   &nbsp;else&lt;br&gt;   &nbsp;{&lt;br&gt;       &nbsp;OSG_WARN&lt;&lt;&quot;Error:&nbsp;glTexSubImage3D&nbsp;not&nbsp;supported&nbsp;by&nbsp;OpenGL&nbsp;driver&quot;&lt;&lt;std::endl;&lt;br&gt;   &nbsp;}&lt;br&gt;}&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&nbsp;_glTexSubImage3D&nbsp;function&nbsp;won&#39;t&nbsp;be&nbsp;translated&nbsp;,&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;There&nbsp;are&nbsp;different&nbsp;ways&nbsp;to&nbsp;keep&nbsp;emscripten&nbsp;happy&nbsp;and&nbsp;use&nbsp;that&nbsp;glTexSubImage3D&nbsp;and&nbsp;I&nbsp;have&nbsp;forced&nbsp;it.&lt;br&gt;But&nbsp;the&nbsp;ways&nbsp;how&nbsp;i&nbsp;did&nbsp;so&nbsp;far&nbsp;-&nbsp;looks&nbsp;patchy&nbsp;and&nbsp;inconsistent&nbsp;(&nbsp;lots&nbsp;of&nbsp;&#39;#ifdef&#39;s&nbsp;where&nbsp;calls&nbsp;to&nbsp;extensions&nbsp;occur&nbsp;)&nbsp;&lt;br&gt;&lt;br&gt;And&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;have&nbsp;an&nbsp;osg&nbsp;port&nbsp;which&nbsp;is&nbsp;minimally&nbsp;different&nbsp;from&nbsp;stock&nbsp;osg&nbsp;(&nbsp;just&nbsp;ifdef&nbsp;ed&nbsp;threading&nbsp;functions&nbsp;-&nbsp;there&nbsp;are&nbsp;no&nbsp;threads&nbsp;in&nbsp;browser&nbsp;and&nbsp;there&nbsp;will&nbsp;not&nbsp;be&nbsp;any&nbsp;similar&nbsp;threading&nbsp;functions&nbsp;to&nbsp;one&nbsp;used&nbsp;in&nbsp;osg&nbsp;for&nbsp;foreseeable&nbsp;future&nbsp;).&lt;br&gt;&lt;br&gt;the &nbsp;solution&nbsp;which&nbsp;will&nbsp;satisfy&nbsp;emscripten&nbsp;with&nbsp;least&nbsp;invasive&nbsp;way&nbsp;seems &nbsp;to&nbsp;have&lt;br&gt;&lt;br&gt;Extensions::_gl&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;functions&nbsp;everywhere&nbsp;and&nbsp;also&lt;br&gt;&lt;br&gt;setGLExtensionFuncPtr(gl* &nbsp;//no&nbsp;_&nbsp;before&nbsp;gl&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;approach&nbsp;to&nbsp;set&nbsp;extensions.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;and&nbsp;for&nbsp;setGLExtensionFuncPtr&nbsp;-&nbsp;for&nbsp;emscripten&nbsp;there&nbsp;will&nbsp;be&nbsp;a&nbsp;special&nbsp;function&nbsp;to&nbsp;deal&nbsp;with&nbsp;what&nbsp;gl&nbsp;functions&nbsp;WebGL&nbsp;has&nbsp;and&nbsp;what&nbsp;not.&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;of&nbsp;cause&nbsp;I&nbsp;understand&nbsp;-&nbsp;such&nbsp;a&nbsp;change&nbsp;might&nbsp;break&nbsp;quite&nbsp;a&nbsp;bit&nbsp;of&nbsp;user&nbsp;code&nbsp;in&nbsp;case&nbsp;I&nbsp;develop&nbsp;a&nbsp;patch&nbsp;for&nbsp;osg&nbsp;which&nbsp;follows &nbsp;such&nbsp;convention&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;I&nbsp;have&nbsp;several&nbsp;other&nbsp;ways&nbsp;to&nbsp;deal&nbsp;-&nbsp;to&nbsp;write&nbsp;a&nbsp;special&nbsp;emscripten&nbsp;module&nbsp;which&nbsp;will&nbsp;be&nbsp;clever&nbsp;enough&nbsp;to&nbsp;use&nbsp;both&nbsp;gl&nbsp;and&nbsp;_gl&nbsp;functions&nbsp;during&nbsp;translation&nbsp;phase,&nbsp;but&nbsp;then&nbsp;-&nbsp;it&nbsp;is&nbsp;hardly&nbsp;possible&nbsp;that&nbsp;it&nbsp;will&nbsp;be&nbsp;accepted&nbsp;to&nbsp;emscripten&nbsp;as&nbsp;it&nbsp;will&nbsp;be&nbsp;needed&nbsp;only&nbsp;for&nbsp;my&nbsp;port&nbsp;and&nbsp;any&nbsp;user&nbsp;will&nbsp;need&nbsp;to&nbsp;hack&nbsp;emscripten&nbsp;to&nbsp;compile&nbsp;osg&nbsp;for&nbsp;web.&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;so&nbsp;my&nbsp;question&nbsp;is&nbsp;-&nbsp;how&nbsp;feasible&nbsp;is&nbsp;to&nbsp;ask&nbsp;for&nbsp;_gl&nbsp;gl&nbsp;convention&nbsp;swap&nbsp;for&nbsp;extention&nbsp;_gl*&nbsp;functions&nbsp;and&nbsp;their&nbsp;Extensions::gl*&nbsp;wrappers?&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Best&nbsp;regards&lt;span&nbsp;class=&quot;m_7992334123061022731HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;m_7992334123061022731HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Sergey&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;br&gt;______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&gt;osg-users@lists.&lt;wbr&gt;openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.&lt;wbr&gt;org/listinfo.cgi/osg-users-&lt;wbr&gt;openscenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
