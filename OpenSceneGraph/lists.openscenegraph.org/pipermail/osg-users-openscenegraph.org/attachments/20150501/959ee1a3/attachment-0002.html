<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Robert,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;posted&nbsp;a&nbsp;while&nbsp;ago&nbsp;a&nbsp;question&nbsp;how&nbsp;to&nbsp;get&nbsp;the&nbsp;osg::Program&nbsp;associated&nbsp;with&nbsp;the&nbsp;shaders&nbsp;from&nbsp;the&nbsp;StandardShadowMap&nbsp;in&nbsp;order&nbsp;to&nbsp;extend.&nbsp;And&nbsp;it&nbsp;is&nbsp;localy&nbsp;defined&nbsp;as&nbsp;you&nbsp;can&nbsp;see&nbsp;in&nbsp;the&nbsp;code.&nbsp;However&nbsp;I&nbsp;found&nbsp;a&nbsp;workaround,&nbsp;by&nbsp;extending&nbsp;the&nbsp;ShadowingScene&nbsp;and&nbsp;catch&nbsp;the&nbsp;StateSet&nbsp;from&nbsp;the&nbsp;Cull&nbsp;traversal.&nbsp;But,&nbsp;this&nbsp;will&nbsp;not&nbsp;work&nbsp;since&nbsp;the&nbsp;line&nbsp;below.&nbsp;Here&nbsp;is&nbsp;my&nbsp;proposed&nbsp;change,&nbsp;it&nbsp;will&nbsp;not&nbsp;hurt&nbsp;anyone&nbsp;I&nbsp;think&nbsp;-&nbsp;these&nbsp;ShadowMap*&nbsp;classes&nbsp;are&nbsp;over-encapsulated&nbsp;in&nbsp;my&nbsp;opinion.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,0)&quot;&gt;void&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(192,192,192)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,0,128)&quot;&gt;StandardShadowMap&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;::&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,0,128)&quot;&gt;ViewData&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;::&lt;/span&gt;&lt;span&nbsp;style=&quot;font-style:italic;color:rgb(0,0,0)&quot;&gt;cullShadowReceivingScene&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(192,192,192)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;<br>
&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;{&lt;/span&gt;&lt;/pre&gt;<br>
&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(192,192,192)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,0,0)&quot;&gt;_cv&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;-&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;pushStateSet&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(192,192,192)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,0,0)&quot;&gt;_stateset&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;get&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;()&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(192,192,192)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;);&lt;/span&gt;&lt;/pre&gt;<br>
&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;br&gt;&lt;/pre&gt;<br>
&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,128)&quot;&gt;#if&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(192,192,192)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,128)&quot;&gt;0&lt;/span&gt;&lt;/pre&gt;<br>
&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(192,192,192)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;_st&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;-&gt;&lt;/span&gt;getShadowedScene&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;()-&gt;&lt;/span&gt;osg&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;::&lt;/span&gt;Group&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;::&lt;/span&gt;traverse&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(192,192,192)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;*&lt;/span&gt;_cv&lt;span&nbsp;style=&quot;color:rgb(192,192,192)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;);&lt;/span&gt;&lt;/pre&gt;<br>
&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,128)&quot;&gt;#else&lt;/span&gt;&lt;/pre&gt;<br>
&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(192,192,192)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,0,0)&quot;&gt;_st&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;-&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;getShadowedScene&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;()-&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-style:italic;color:rgb(0,0,0)&quot;&gt;traverse&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(192,192,192)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;*&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,0,0)&quot;&gt;_cv&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(192,192,192)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;);&lt;/span&gt;&lt;/pre&gt;<br>
&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,128)&quot;&gt;#endif&lt;/span&gt;&lt;/pre&gt;<br>
&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;br&gt;&lt;/pre&gt;<br>
&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(192,192,192)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,0,0)&quot;&gt;_cv&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;-&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;popStateSet&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;();&lt;/span&gt;&lt;/pre&gt;<br>
&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;white-space:normal&quot;&gt;It&nbsp;will&nbsp;be&nbsp;nice&nbsp;if&nbsp;this&nbsp;forcing&nbsp;of&nbsp;osg::Group::traverse&nbsp;is&nbsp;replaced&nbsp;by&nbsp;ordinary&nbsp;traverse&nbsp;thus&nbsp;anyone&nbsp;can&nbsp;re-write&nbsp;and&nbsp;extend.&nbsp;What&nbsp;you&nbsp;think?&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;white-space:normal&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;white-space:normal&quot;&gt;Please&nbsp;let&nbsp;me&nbsp;know&nbsp;and&nbsp;thanks&nbsp;a&nbsp;bunch&nbsp;as&nbsp;always!&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;white-space:normal&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;margin-top:0px;margin-bottom:0px&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;white-space:normal&quot;&gt;Nick&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;trajce&nbsp;nikolov&nbsp;nick&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
