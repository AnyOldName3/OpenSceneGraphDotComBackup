<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Mary-Ann,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;recently&nbsp;worked&nbsp;on&nbsp;similar&nbsp;issue&nbsp;and&nbsp;the&nbsp;way&nbsp;how&nbsp;I&nbsp;debug&nbsp;the&nbsp;depth&nbsp;RTT&nbsp;was&nbsp;by&nbsp;rendering&nbsp;the&nbsp;Depth&nbsp;image&nbsp;on&nbsp;a&nbsp;quad&nbsp;(the&nbsp;shader&nbsp;for&nbsp;displaying&nbsp;the&nbsp;Depth&nbsp;image&nbsp;is&nbsp;here: &lt;a&nbsp;href=&quot;http://markmail.org/message/ccscbkzyxsgmb5vl#query:+page:1+mid:c542rbpj3jdw3v5d+state:results&quot;&nbsp;target=&quot;_blank&quot;&nbsp;style=&quot;font-size:12.8px&quot;&gt;http://markmail.org/message/&lt;wbr&gt;ccscbkzyxsgmb5vl#query:+page:&lt;wbr&gt;1+mid:c542rbpj3jdw3v5d+state:&lt;wbr&gt;results&lt;/a&gt; )&lt;/div&gt;&lt;div&gt;or&nbsp;simply&nbsp;attach&nbsp;a&nbsp;color&nbsp;texture&nbsp;to&nbsp;the&nbsp;depth&nbsp;RTT&nbsp;as&nbsp;well&nbsp;-&nbsp;might&nbsp;help&nbsp;you&nbsp;to&nbsp;see&nbsp;if&nbsp;your&nbsp;View/Projection&nbsp;matrices&nbsp;are&nbsp;ok&nbsp;too.&nbsp;The&nbsp;link&nbsp;works&nbsp;with&nbsp;Depth&nbsp;textures&nbsp;in&nbsp;general&nbsp;so&nbsp;maybe&nbsp;the&nbsp;code&nbsp;there&nbsp;will&nbsp;give&nbsp;you&nbsp;some&nbsp;inspiration&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hope&nbsp;this&nbsp;helps&lt;/div&gt;&lt;div&gt;Nick&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Sep&nbsp;19,&nbsp;2016&nbsp;at&nbsp;5:14&nbsp;PM,&nbsp;Mary-Ann&nbsp;Zorra&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:rebebaba2@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rebebaba2@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;pretty&nbsp;new&nbsp;in&nbsp;OSG,&nbsp;so&nbsp;sorry&nbsp;if&nbsp;I&nbsp;am&nbsp;asking&nbsp;a&nbsp;bit&nbsp;noob&nbsp;question.&nbsp;But&nbsp;I&nbsp;am&nbsp;stuck&nbsp;on&nbsp;this&nbsp;problem,&nbsp;and&nbsp;have&nbsp;no&nbsp;idea&nbsp;how&nbsp;I&nbsp;could&nbsp;solve&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;prerender&nbsp;my&nbsp;scene&nbsp;into&nbsp;a&nbsp;framebuffer&nbsp;to&nbsp;have&nbsp;a&nbsp;depth&nbsp;map.&nbsp;I&nbsp;tested&nbsp;everything,&nbsp;my&nbsp;shader&nbsp;seems&nbsp;to&nbsp;work&nbsp;if&nbsp;I&nbsp;am&nbsp;using&nbsp;it&nbsp;in&nbsp;my&nbsp;main&nbsp;rendering&nbsp;pass,&nbsp;and&nbsp;it&nbsp;is&nbsp;being&nbsp;called&nbsp;in&nbsp;my&nbsp;prerender&nbsp;pass&nbsp;too.&nbsp;But&nbsp;for&nbsp;some&nbsp;reason&nbsp;it&nbsp;can&nbsp;not&nbsp;see&nbsp;the&nbsp;objects&nbsp;of&nbsp;the&nbsp;scene,&nbsp;so&nbsp;the&nbsp;depthmap&nbsp;gets&nbsp;black&nbsp;(I&nbsp;do&nbsp;linearize&nbsp;the&nbsp;depth&nbsp;values&nbsp;in&nbsp;the&nbsp;fragment&nbsp;shader&nbsp;too). &nbsp;I&nbsp;think&nbsp;the&nbsp;problem&nbsp;is,&nbsp;that&nbsp;I&nbsp;do&nbsp;not&nbsp;attach&nbsp;the&nbsp;subgraph&nbsp;to&nbsp;the&nbsp;framebuffer&nbsp;camera&nbsp;properly,&nbsp;but&nbsp;I&nbsp;can&nbsp;not&nbsp;figure&nbsp;it&nbsp;out,&nbsp;what&nbsp;I&nbsp;am&nbsp;missing.&nbsp;So&nbsp;please&nbsp;help,&nbsp;I &nbsp;do&nbsp;not&nbsp;have&nbsp;any&nbsp;new&nbsp;ideas &nbsp;anymore&nbsp;:(&lt;br&gt;<br>
&lt;br&gt;<br>
Here&nbsp;is&nbsp;the&nbsp;code:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Code:&lt;br&gt;<br>
camera&nbsp;=&nbsp;new&nbsp;osg::Camera;;&lt;br&gt;<br>
camera-&gt;setViewport(0,&nbsp;0,&nbsp;m_textureSizeX,&nbsp;m_textureSizeY);&lt;br&gt;<br>
camera-&gt;setClearColor(&nbsp;osg::Vec4()&nbsp;);&lt;br&gt;<br>
camera-&gt;setClearMask(&nbsp;GL_COLOR_BUFFER_BIT|GL_DEPTH_B&lt;wbr&gt;UFFER_BIT&nbsp;);&lt;br&gt;<br>
camera-&gt;setRenderTargetImpleme&lt;wbr&gt;ntation(&nbsp;osg::Camera::FRAME_BUFFER_OBJE&lt;wbr&gt;CT,&nbsp;osg::Camera::PIXEL_BUFFER_RTT&nbsp;);&lt;br&gt;<br>
camera-&gt;setRenderOrder(&nbsp;osg::Camera::PRE_RENDER&nbsp;);&lt;br&gt;<br>
camera-&gt;setReferenceFrame(&nbsp;osg::Transform::ABSOLUTE_RF&nbsp;);&lt;br&gt;<br>
camera-&gt;setProjectionMatrix(&nbsp;osg::Matrix::ortho2D(0.0,&nbsp;1.0,&nbsp;0.0,&nbsp;1.0)&nbsp;);&lt;br&gt;<br>
camera-&gt;setViewMatrix(&nbsp;osg::Matrix::identity()&nbsp;);&lt;br&gt;<br>
&lt;br&gt;<br>
m_depthTexture&nbsp;=&nbsp;new&nbsp;osg::Texture2D;&lt;br&gt;<br>
m_depthTexture-&gt;setTextureSize&lt;wbr&gt;(m_textureSizeX,&nbsp;m_textureSizeY);&lt;br&gt;<br>
m_depthTexture-&gt;setInternalFor&lt;wbr&gt;mat(GL_RGBA);&lt;br&gt;<br>
m_depthTexture-&gt;setDataVarianc&lt;wbr&gt;e(osg::Object::DYNAMIC);&lt;br&gt;<br>
m_depthTexture-&gt;setFilter(osg:&lt;wbr&gt;:Texture::MIN_FILTER,&nbsp;osg::Texture::LINEAR_MIPMAP_LI&lt;wbr&gt;NEAR);&lt;br&gt;<br>
m_depthTexture-&gt;setFilter(osg:&lt;wbr&gt;:Texture::MAG_FILTER,&nbsp;osg::Texture::LINEAR);&lt;br&gt;<br>
m_depthTexture-&gt;setWrap(osg::T&lt;wbr&gt;exture::WRAP_S,&nbsp;osg::Texture::REPEAT);&lt;br&gt;<br>
m_depthTexture-&gt;setWrap(osg::T&lt;wbr&gt;exture::WRAP_T,&nbsp;osg::Texture::REPEAT);&lt;br&gt;<br>
m_depthTexture-&gt;setResizeNonPo&lt;wbr&gt;werOfTwoHint(false);&lt;br&gt;<br>
&lt;br&gt;<br>
m_texImage&nbsp;=&nbsp;new&nbsp;osg::Image;&lt;br&gt;<br>
m_texImage-&gt;allocateImage(m_te&lt;wbr&gt;xtureSizeX,&nbsp;m_textureSizeY,&nbsp;1,&nbsp;GL_RGBA,&nbsp;GL_UNSIGNED_BYTE);&lt;br&gt;<br>
&lt;br&gt;<br>
camera-&gt;attach(osg::Camera::Bu&lt;wbr&gt;fferComponent(osg::Camera::COL&lt;wbr&gt;OR_BUFFER),&nbsp;m_texImage);&lt;br&gt;<br>
m_depthTexture-&gt;setImage(0,&nbsp;m_texImage);&lt;br&gt;<br>
&lt;br&gt;<br>
//m_DBRoot&nbsp;is&nbsp;filled&nbsp;by&nbsp;init(),&nbsp;I&nbsp;checked&nbsp;and&nbsp;the&nbsp;subgraph&nbsp;is&nbsp;there&lt;br&gt;<br>
camera-&gt;addChild(m_DBRoot.get(&lt;wbr&gt;));&lt;br&gt;<br>
//the&nbsp;root&nbsp;of&nbsp;the&nbsp;scene&nbsp;graph&lt;br&gt;<br>
root-&gt;addChild(camera.get());&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Thank&nbsp;you!&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
Mary-Ann&lt;br&gt;<br>
&lt;br&gt;<br>
------------------&lt;br&gt;<br>
Read&nbsp;this&nbsp;topic&nbsp;online&nbsp;here:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://forum.openscenegraph.org/viewtopic.php?p=68663#68663&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://forum.openscenegraph.or&lt;wbr&gt;g/viewtopic.php?p=68663#68663&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
osg-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:osg-users@lists.openscenegraph.org&quot;&nbsp;target=&quot;_blank&quot;&gt;osg-users@lists.openscenegraph&lt;wbr&gt;.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.openscenegraph.or&lt;wbr&gt;g/listinfo.cgi/osg-users-opens&lt;wbr&gt;cenegraph.org&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&gt;trajce&nbsp;nikolov&nbsp;nick&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
