

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Coordinate Systems &mdash; osgEarth 2.10 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../../assets.readthedocs.org/static/javascript/readthedocs-doc-embed.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="custom_driver.html" />
    <link rel="prev" title="Shader Composition" href="shader_composition.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="../../latest/developer/coordinate_systems.html" />

<link rel="stylesheet" href="../../../../assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "developer/coordinate_systems"
READTHEDOCS_DATA['source_suffix'] = ".rst"
</script>

<script type="text/javascript" src="../../../../assets.readthedocs.org/static/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index-2.html" class="icon icon-home"> osgEarth
          

          
          </a>

          
            
            
            
              <div class="version">
                2.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="http://docs.osgearth.org/en/2.10/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About the Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../startup.html">Building osgEarth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Topics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="maps.html">Working with Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html">Utilities SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="shader_composition.html">Shader Composition</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Coordinate Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#openscenegraph-opengl-coordinate-spaces">OpenSceneGraph/OpenGL Coordinate Spaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#model-coordinates">Model Coordinates</a></li>
<li class="toctree-l4"><a class="reference internal" href="#view-coordinates">View Coordinates</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clip-coordinates">Clip Coordinates</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data.html">Working with Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/index.html">Reference Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releasenotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">osgEarth Priority Support</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index-2.html">osgEarth</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index-2.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Developer Topics</a> &raquo;</li>
        
      <li>Coordinate Systems</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/gwaldron/osgearth/blob/2.10/docs/source/developer/coordinate_systems.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="coordinate-systems">
<h1>Coordinate Systems<a class="headerlink" href="#coordinate-systems" title="Permalink to this headline">¶</a></h1>
<p>Between OpenGL, OSG, and osgEarth, there are several different coordinate systems
and reference frames in use and it can get confusing sometimes which is which.
Here we will cover some of the basics.</p>
<div class="section" id="openscenegraph-opengl-coordinate-spaces">
<h2>OpenSceneGraph/OpenGL Coordinate Spaces<a class="headerlink" href="#openscenegraph-opengl-coordinate-spaces" title="Permalink to this headline">¶</a></h2>
<p>Here is a brief explanation of the various coordinate systems used in OpenGL and
OSG. For a more detailed explanation (with pictures!) we direct you to read this
excellent tutorial on the subject:</p>
<blockquote>
<div><a class="reference external" href="http://www.songho.ca/opengl/gl_transform.html">OpenGL Transformation</a></div></blockquote>
<div class="section" id="model-coordinates">
<h3>Model Coordinates<a class="headerlink" href="#model-coordinates" title="Permalink to this headline">¶</a></h3>
<p>Model (or Object) space refers to the actual coordinates in the geometry (like
terrain tiles, an airplane model, etc). In OSG, model coordinates might be absolute
or they might be transformed with an OSG <code class="docutils literal notranslate"><span class="pre">Transform</span></code>.</p>
<p>We will often refer to two types of Model coordinates: <em>world</em> and <em>local</em>.</p>
<p><em>World coordinates</em> are expressed in absolute terms; they are not transformed.
<em>Local coordinates</em> have been transformed to make them relative to some reference
point (in <em>world</em> coordinates).</p>
<p>Why use local coordinates? Because OpenGL hardware can only handle 32-bit values for
vertex locations. But in a system like osgEarth, we need to represent locations with
large values and we cannot do that without exceeding the limits of 32-bit precision.
The solution is to use <em>local coordinates</em>. OSG uses a double-precision <code class="docutils literal notranslate"><span class="pre">MatrixTransform</span></code>
to create a local origin (0,0,0), and then we can express our data relative to that.</p>
</div>
<div class="section" id="view-coordinates">
<h3>View Coordinates<a class="headerlink" href="#view-coordinates" title="Permalink to this headline">¶</a></h3>
<p>View space (sometimes called <em>camera</em> or <em>eye</em> space) express the position of
geometry relative to the camera itself. The camera is at the origin (0,0,0) and
the coordinate axes are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">X</span> <span class="p">:</span> <span class="n">Right</span>
<span class="o">+</span><span class="n">Y</span> <span class="p">:</span> <span class="n">Up</span>
<span class="o">-</span><span class="n">Z</span> <span class="p">:</span> <span class="n">Forward</span> <span class="p">(</span><span class="n">direction</span> <span class="n">the</span> <span class="n">camera</span> <span class="ow">is</span> <span class="n">looking</span><span class="p">)</span>
</pre></div>
</div>
<p>In osgEarth, View space is used quite a bit in <em>vertex shaders</em> – they operate on
the GPU which is limited to 32-bit precision, and View space has a <em>local origin</em>
at the camera.</p>
</div>
<div class="section" id="clip-coordinates">
<h3>Clip Coordinates<a class="headerlink" href="#clip-coordinates" title="Permalink to this headline">¶</a></h3>
<p><em>Clip</em> coordinate are what you get after applying the view volume (also know as the
camera frustum). The frustum defines the limits of what you can see from the eyepoint.
The resulting coordinates are in this system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">X</span> <span class="p">:</span> <span class="n">Right</span>
<span class="o">+</span><span class="n">Y</span> <span class="p">:</span> <span class="n">Up</span>
<span class="o">+</span><span class="n">Z</span> <span class="p">:</span> <span class="n">Forward</span>
</pre></div>
</div>
<p>Clip spaces uses 4-dimensional homogeneous coordinates. The range of values in clip
space encompasses the camera frustum and is expressed thusly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">X</span> <span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="n">w</span><span class="o">..</span><span class="n">w</span><span class="p">]</span> <span class="p">(</span><span class="o">-</span><span class="n">w</span> <span class="o">=</span> <span class="n">left</span><span class="p">,</span>   <span class="o">+</span><span class="n">w</span> <span class="o">=</span> <span class="n">right</span><span class="p">)</span>
<span class="n">Y</span> <span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="n">w</span><span class="o">..</span><span class="n">w</span><span class="p">]</span> <span class="p">(</span><span class="o">-</span><span class="n">w</span> <span class="o">=</span> <span class="n">bottom</span><span class="p">,</span> <span class="o">+</span><span class="n">w</span> <span class="o">=</span> <span class="n">top</span><span class="p">)</span>
<span class="n">Z</span> <span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="n">w</span><span class="o">..</span><span class="n">w</span><span class="p">]</span> <span class="p">(</span><span class="o">-</span><span class="n">w</span> <span class="o">=</span> <span class="n">near</span><span class="p">,</span>   <span class="o">+</span><span class="n">w</span> <span class="o">=</span> <span class="n">far</span><span class="p">)</span>
<span class="n">W</span> <span class="p">:</span> <span class="n">perspective</span> <span class="n">divisor</span>
</pre></div>
</div>
<p>Note that the Z value, which represents <em>depth</em>, is non-linear. There is much more
precision closer to the near plane.</p>
<p>Clip space is useful in a <em>shader</em> when you need to sample or manipulator <em>depth</em>
information in the scene.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="custom_driver.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="shader_composition.html" class="btn btn-neutral float-left" title="Shader Composition" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Pelican Mapping
      
        <span class="commit">
          Revision <code>de6041a2</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: 2.10
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="../../latest/index.html">latest</a></dd>
        
          <dd><a href="../../3.0/index.html">3.0</a></dd>
        
          <dd><a href="../index.html">2.10</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="http://readthedocs.org/projects/osgearth/downloads/pdf/2.10/">pdf</a></dd>
        
          <dd><a href="http://readthedocs.org/projects/osgearth/downloads/htmlzip/2.10/">html</a></dd>
        
          <dd><a href="http://readthedocs.org/projects/osgearth/downloads/epub/2.10/">epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="http://readthedocs.org/projects/osgearth/?fromdocs=osgearth">Project Home</a>
          </dd>
          <dd>
            <a href="http://readthedocs.org/builds/osgearth/?fromdocs=osgearth">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org/">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>