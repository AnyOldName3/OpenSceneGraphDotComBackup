

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Working with Maps &mdash; osgEarth 2.10 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../../assets.readthedocs.org/static/javascript/readthedocs-doc-embed.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Utilities SDK" href="utilities.html" />
    <link rel="prev" title="Developer Topics" href="index.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="../../latest/developer/maps.html" />

<link rel="stylesheet" href="../../../../assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "developer/maps"
READTHEDOCS_DATA['source_suffix'] = ".rst"
</script>

<script type="text/javascript" src="../../../../assets.readthedocs.org/static/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index-2.html" class="icon icon-home"> osgEarth
          

          
          </a>

          
            
            
            
              <div class="version">
                2.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="http://docs.osgearth.org/en/2.10/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About the Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../startup.html">Building osgEarth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Topics</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Working with Maps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#loading-a-map-from-an-earth-file">Loading a Map from an Earth File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#programmatic-map-creation">Programmatic Map Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#working-with-a-mapnode-at-runtime">Working with a MapNode at Runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="#working-with-layers">Working with Layers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html">Utilities SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="shader_composition.html">Shader Composition</a></li>
<li class="toctree-l2"><a class="reference internal" href="coordinate_systems.html">Coordinate Systems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data.html">Working with Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/index.html">Reference Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releasenotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">osgEarth Priority Support</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index-2.html">osgEarth</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index-2.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Developer Topics</a> &raquo;</li>
        
      <li>Working with Maps</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/gwaldron/osgearth/blob/2.10/docs/source/developer/maps.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="working-with-maps">
<h1>Working with Maps<a class="headerlink" href="#working-with-maps" title="Permalink to this headline">¶</a></h1>
<p>A <strong>map</strong> is the central data model in osgEarth.
It is a container for image, elevation, and feature layers.</p>
<div class="section" id="loading-a-map-from-an-earth-file">
<h2>Loading a Map from an Earth File<a class="headerlink" href="#loading-a-map-from-an-earth-file" title="Permalink to this headline">¶</a></h2>
<p>The easiest way to render a Map is to load it from an <em>earth file</em>.
Since osgEarth uses OpenSceneGraph plugins, you can do this with a single line of code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">osg</span><span class="p">::</span><span class="n">Node</span><span class="o">*</span> <span class="n">globe</span> <span class="o">=</span> <span class="n">osgDB</span><span class="p">::</span><span class="n">readNodeFile</span><span class="p">(</span><span class="s2">&quot;myglobe.earth&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>You now have an <code class="docutils literal notranslate"><span class="pre">osg::Node</span></code> that you can add to your scene graph and display.
Seriously, it really is that simple!</p>
<p>This method of loading a Map is, more often than not, all that an application will
need to do. However if you want to create your Map using the API, read on.</p>
</div>
<div class="section" id="programmatic-map-creation">
<h2>Programmatic Map Creation<a class="headerlink" href="#programmatic-map-creation" title="Permalink to this headline">¶</a></h2>
<p>osgEarth provides an API for creating Maps at runtime.</p>
<p>The basic steps to creating a Map with the API are:</p>
<ol class="arabic simple">
<li>Create a Map object</li>
<li>Add imagery and elevation layers to the Map as you see fit</li>
<li>Create a <code class="docutils literal notranslate"><span class="pre">MapNode</span></code> that will render the Map object</li>
<li>Add your <code class="docutils literal notranslate"><span class="pre">MapNode</span></code> to your scene graph.</li>
</ol>
<p>You can add layers to the map at any time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">namespace</span> <span class="n">osgEarth</span><span class="p">;</span>
<span class="n">using</span> <span class="n">namespace</span> <span class="n">osgEarth</span><span class="p">::</span><span class="n">Drivers</span><span class="p">;</span>

<span class="c1">#include &lt;osgEarth/Map&gt;</span>
<span class="c1">#include &lt;osgEarth/MapNode&gt;</span>
<span class="c1">#include &lt;osgEarthDrivers/tms/TMSOptions&gt;</span>
<span class="c1">#include &lt;osgEarthDrivers/gdal/GDALOptions&gt;</span>

<span class="n">using</span> <span class="n">namespace</span> <span class="n">osgEarth</span><span class="p">;</span>
<span class="n">using</span> <span class="n">namespace</span> <span class="n">osgEarth</span><span class="p">::</span><span class="n">Drivers</span><span class="p">;</span>
<span class="o">...</span>

<span class="o">//</span> <span class="n">Create</span> <span class="n">a</span> <span class="n">Map</span> <span class="ow">and</span> <span class="nb">set</span> <span class="n">it</span> <span class="n">to</span> <span class="n">Geocentric</span> <span class="n">to</span> <span class="n">display</span> <span class="n">a</span> <span class="n">globe</span>
<span class="n">Map</span><span class="o">*</span> <span class="nb">map</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Map</span><span class="p">();</span>

<span class="o">//</span> <span class="n">Add</span> <span class="n">an</span> <span class="n">imagery</span> <span class="n">layer</span> <span class="p">(</span><span class="n">blue</span> <span class="n">marble</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">TMS</span> <span class="n">source</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">TMSOptions</span> <span class="n">tms</span><span class="p">;</span>
    <span class="n">tms</span><span class="o">.</span><span class="n">url</span><span class="p">()</span> <span class="o">=</span> <span class="s2">&quot;http://labs.metacarta.com/wms-c/Basic.py/1.0.0/satellite/&quot;</span><span class="p">;</span>
    <span class="n">ImageLayer</span><span class="o">*</span> <span class="n">layer</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ImageLayer</span><span class="p">(</span> <span class="s2">&quot;NASA&quot;</span><span class="p">,</span> <span class="n">tms</span> <span class="p">);</span>
    <span class="nb">map</span><span class="o">-&gt;</span><span class="n">addImageLayer</span><span class="p">(</span> <span class="n">layer</span> <span class="p">);</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">Add</span> <span class="n">an</span> <span class="n">elevationlayer</span> <span class="p">(</span><span class="n">SRTM</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">local</span> <span class="n">GeoTiff</span> <span class="n">file</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">GDALOptions</span> <span class="n">gdal</span><span class="p">;</span>
    <span class="n">gdal</span><span class="o">.</span><span class="n">url</span><span class="p">()</span> <span class="o">=</span> <span class="s2">&quot;c:/data/srtm.tif&quot;</span><span class="p">;</span>
    <span class="n">ElevationLayer</span><span class="o">*</span> <span class="n">layer</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ElevationLayer</span><span class="p">(</span> <span class="s2">&quot;SRTM&quot;</span><span class="p">,</span> <span class="n">gdal</span> <span class="p">);</span>
    <span class="nb">map</span><span class="o">-&gt;</span><span class="n">addElevationLayer</span><span class="p">(</span> <span class="n">layer</span> <span class="p">);</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">Create</span> <span class="n">a</span> <span class="n">MapNode</span> <span class="n">to</span> <span class="n">render</span> <span class="n">this</span> <span class="nb">map</span><span class="p">:</span>
<span class="n">MapNode</span><span class="o">*</span> <span class="n">mapNode</span> <span class="o">=</span> <span class="n">new</span> <span class="n">MapNode</span><span class="p">(</span> <span class="nb">map</span> <span class="p">);</span>
<span class="o">...</span>

<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setSceneData</span><span class="p">(</span> <span class="n">mapNode</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="working-with-a-mapnode-at-runtime">
<h2>Working with a MapNode at Runtime<a class="headerlink" href="#working-with-a-mapnode-at-runtime" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">MapNode</span></code> is the scene graph node that renders a <code class="docutils literal notranslate"><span class="pre">Map</span></code>. Whether you loaded your
map from an Earth File or created it using the API, you can access the Map and its
<code class="docutils literal notranslate"><span class="pre">MapNode</span></code> at runtime to make changes. If you did not explicitly create a <code class="docutils literal notranslate"><span class="pre">MapNode</span></code>
using the API, you will first need to get a reference to the <code class="docutils literal notranslate"><span class="pre">MapNode</span></code> to work with.
Use the static <code class="docutils literal notranslate"><span class="pre">get</span></code> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Load</span> <span class="n">the</span> <span class="nb">map</span>
<span class="n">osg</span><span class="p">::</span><span class="n">Node</span><span class="o">*</span> <span class="n">loadedModel</span> <span class="o">=</span> <span class="n">osgDB</span><span class="p">::</span><span class="n">readNodeFile</span><span class="p">(</span><span class="s2">&quot;mymap.earth&quot;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">Find</span> <span class="n">the</span> <span class="n">MapNode</span>
<span class="n">osgEarth</span><span class="p">::</span><span class="n">MapNode</span><span class="o">*</span> <span class="n">mapNode</span> <span class="o">=</span> <span class="n">MapNode</span><span class="p">::</span><span class="n">get</span><span class="p">(</span> <span class="n">loadedModel</span> <span class="p">);</span>
</pre></div>
</div>
<p>Once you have a reference to the <code class="docutils literal notranslate"><span class="pre">MapNode</span></code>, you can get to the map:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Add</span> <span class="n">an</span> <span class="n">OpenStreetMap</span> <span class="n">image</span> <span class="n">source</span>
<span class="n">TMSOptions</span> <span class="n">driverOpt</span><span class="p">;</span>
<span class="n">driverOpt</span><span class="o">.</span><span class="n">url</span><span class="p">()</span> <span class="o">=</span> <span class="s2">&quot;http://tile.openstreetmap.org/&quot;</span><span class="p">;</span>
<span class="n">driverOpt</span><span class="o">.</span><span class="n">tmsType</span><span class="p">()</span> <span class="o">=</span> <span class="s2">&quot;google&quot;</span><span class="p">;</span>

<span class="n">ImageLayerOptions</span> <span class="n">layerOpt</span><span class="p">(</span> <span class="s2">&quot;OSM&quot;</span><span class="p">,</span> <span class="n">driverOpt</span> <span class="p">);</span>
<span class="n">layerOpt</span><span class="o">.</span><span class="n">profile</span><span class="p">()</span> <span class="o">=</span> <span class="n">ProfileOptions</span><span class="p">(</span> <span class="s2">&quot;global-mercator&quot;</span> <span class="p">);</span>

<span class="n">ImageLayer</span><span class="o">*</span> <span class="n">osmLayer</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ImageLayer</span><span class="p">(</span> <span class="n">layerOpt</span> <span class="p">);</span>
<span class="n">mapNode</span><span class="o">-&gt;</span><span class="n">getMap</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">addImageLayer</span><span class="p">(</span> <span class="n">osmLayer</span> <span class="p">);</span>
</pre></div>
</div>
<p>You can also remove or re-order layers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Remove</span> <span class="n">a</span> <span class="n">layer</span> <span class="kn">from</span> <span class="nn">the</span> <span class="nb">map</span><span class="o">.</span>  <span class="n">All</span> <span class="n">other</span> <span class="n">layers</span> <span class="n">are</span> <span class="n">repositioned</span> <span class="n">accordingly</span>
<span class="n">mapNode</span><span class="o">-&gt;</span><span class="n">getMap</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">removeImageLayer</span><span class="p">(</span> <span class="n">layer</span> <span class="p">);</span>

<span class="o">//</span> <span class="n">Move</span> <span class="n">a</span> <span class="n">layer</span> <span class="n">to</span> <span class="n">position</span> <span class="mi">1</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">image</span> <span class="n">stack</span>
<span class="n">mapNode</span><span class="o">-&gt;</span><span class="n">getMap</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">moveImageLayer</span><span class="p">(</span> <span class="n">layer</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="working-with-layers">
<h2>Working with Layers<a class="headerlink" href="#working-with-layers" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Map</span></code> contains <code class="docutils literal notranslate"><span class="pre">ImageLayer</span></code> and <code class="docutils literal notranslate"><span class="pre">ElevationLayer</span></code> objects.
These contain some properties that you can adjust at runtime.
For example, you can toggle a layer on or off or adjust an <code class="docutils literal notranslate"><span class="pre">ImageLayer</span></code> opacity using the API:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ImageLayer</span><span class="o">*</span> <span class="n">layer</span><span class="p">;</span>
<span class="o">...</span>
<span class="n">layer</span><span class="o">-&gt;</span><span class="n">setOpacity</span><span class="p">(</span> <span class="mf">0.5</span> <span class="p">);</span>  <span class="o">//</span> <span class="n">makes</span> <span class="n">the</span> <span class="n">layer</span> <span class="n">partially</span> <span class="n">transparent</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="utilities.html" class="btn btn-neutral float-right" title="Utilities SDK" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Developer Topics" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Pelican Mapping
      
        <span class="commit">
          Revision <code>de6041a2</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: 2.10
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="../../latest/index.html">latest</a></dd>
        
          <dd><a href="../../3.0/index.html">3.0</a></dd>
        
          <dd><a href="../index.html">2.10</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="http://readthedocs.org/projects/osgearth/downloads/pdf/2.10/">pdf</a></dd>
        
          <dd><a href="http://readthedocs.org/projects/osgearth/downloads/htmlzip/2.10/">html</a></dd>
        
          <dd><a href="http://readthedocs.org/projects/osgearth/downloads/epub/2.10/">epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="http://readthedocs.org/projects/osgearth/?fromdocs=osgearth">Project Home</a>
          </dd>
          <dd>
            <a href="http://readthedocs.org/builds/osgearth/?fromdocs=osgearth">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org/">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>