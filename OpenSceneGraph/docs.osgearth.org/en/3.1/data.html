

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Working with Data &mdash; osgEarth 3.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="../../../assets.readthedocs.org/static/javascript/readthedocs-doc-embed.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/styles.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="osgEarth Layers" href="layers.html" />
    <link rel="prev" title="The Earth File" href="earthfile.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="../latest/data.html" />

<link rel="stylesheet" href="../../../assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": false, "api_host": "https://readthedocs.org", "build_date": "2020-12-02T21:12:06Z", "builder": "sphinx", "canonical_url": "http://docs.osgearth.org/en/latest/", "commit": "2b0ab5ae", "docroot": "/docs/source/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "data", "programming_language": "cpp", "project": "osgearth", "proxied_api_host": "/_", "source_suffix": ".md", "subprojects": {}, "theme": "sphinx_rtd_theme", "user_analytics_code": "G-H28EPNP1WC", "version": "3.1"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="../../../assets.readthedocs.org/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index-2.html" class="icon icon-home"> osgEarth
          

          
          </a>

          
            
            
            
              <div class="version">
                3.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="http://docs.osgearth.org/en/3.1/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Building the SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="earthfile.html">The Earth File</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Working with Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#preparing-your-data">Preparing your Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#optimizing-a-geotiff">Optimizing a GeoTIFF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#reproject-your-imagery">Reproject your imagery</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-internal-tiles">Build internal tiles</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-overviews">Build overviews</a></li>
<li class="toctree-l4"><a class="reference internal" href="#spatial-indexing-for-feature-data">Spatial indexing for feature data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#building-tilesets">Building Tilesets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loading-a-directory-of-files">Loading a Directory of Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#where-to-find-data">Where to Find Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="layers.html">Layer Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="3.0_upgrade_guide.html">Upgrade Guide: from 2.x to 3.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Getting Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index-2.html">osgEarth</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index-2.html">Docs</a> &raquo;</li>
        
      <li>Working with Data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/gwaldron/osgearth/blob/3.1/docs/source/data.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="working-with-data">
<h1>Working with Data<a class="headerlink" href="#working-with-data" title="Permalink to this headline">¶</a></h1>
<p>osgEarth can load many different open standard data formats of imagery, elevation data, and vector features. Read on for tips on preparing your data to get the best results.</p>
<div class="section" id="preparing-your-data">
<h2>Preparing your Data<a class="headerlink" href="#preparing-your-data" title="Permalink to this headline">¶</a></h2>
<p>osgEarth needs to chop the source data up into grids of “tiles” for display. You can usually load data directly from source with no pre-processing, but if the data is not optimized, it might be slow! So a little pre-processing is usually a good idea when using large datasets.</p>
<p>Load you data directly first. If it’s fast enough, you are good to go! Otherwise, here are some tips to optimize your data for tiled access. There are two ways to approach it: optimizing a GeoTIFF, or building tilesets. We will also discuss how to combine a folder full of data into a single layer for use in osgEarth.</p>
<div class="section" id="optimizing-a-geotiff">
<h3>Optimizing a GeoTIFF<a class="headerlink" href="#optimizing-a-geotiff" title="Permalink to this headline">¶</a></h3>
<p>GeoTIFF is the most common format for local imagery or elevation data. Here are some steps you can take to speed up osgEarth’s access to GeoTIFFs.</p>
<div class="section" id="reproject-your-imagery">
<h4>Reproject your imagery<a class="headerlink" href="#reproject-your-imagery" title="Permalink to this headline">¶</a></h4>
<p>osgEarth will reproject your data on-the-fly if it does not have the necessary coordinate system. For instance, if you are trying to view a UTM image on a geodetic globe (epsg:4326), osgEarth needs to do that conversion on the fly – but doing it offline beforehand will be faster.</p>
<p>You can use any tool you want to reproject your data such as GDAL, Global Mapper or ArcGIS.</p>
<p>For example, to reproject a UTM image to geodetic using <code class="docutils literal notranslate"><span class="pre">gdal_warp</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdalwarp</span> <span class="o">-</span><span class="n">t_srs</span> <span class="n">epsg</span><span class="p">:</span><span class="mi">4326</span> <span class="n">my_utm_image</span><span class="o">.</span><span class="n">tif</span> <span class="n">my_wgs84_image</span><span class="o">.</span><span class="n">tif</span>
</pre></div>
</div>
</div>
<div class="section" id="build-internal-tiles">
<h4>Build internal tiles<a class="headerlink" href="#build-internal-tiles" title="Permalink to this headline">¶</a></h4>
<p>Typically formats such as GeoTiff store their pixel data in scanlines. However, using a tiled dataset will be more efficient for osgEarth because of how it uses tiles internally.</p>
<p>To create a tiled GeoTiff using <code class="docutils literal notranslate"><span class="pre">gdal_translate</span></code>, issue the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdal_translate</span> <span class="o">-</span><span class="n">of</span> <span class="n">GTiff</span> <span class="o">-</span><span class="n">co</span> <span class="n">TILED</span><span class="o">=</span><span class="n">YES</span> <span class="nb">input</span><span class="o">.</span><span class="n">tif</span> <span class="n">output</span><span class="o">.</span><span class="n">tif</span>
</pre></div>
</div>
<p>Take it a step further and use compression to save space. You can use internal JPEG compression if your data contains no transparency:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdal_translate</span> <span class="o">-</span><span class="n">of</span> <span class="n">GTiff</span> <span class="o">-</span><span class="n">co</span> <span class="n">TILED</span><span class="o">=</span><span class="n">YES</span> <span class="o">-</span><span class="n">co</span> <span class="n">COMPRESS</span><span class="o">=</span><span class="n">JPG</span> <span class="nb">input</span><span class="o">.</span><span class="n">tif</span> <span class="n">output</span><span class="o">.</span><span class="n">tif</span>
</pre></div>
</div>
</div>
<div class="section" id="build-overviews">
<h4>Build overviews<a class="headerlink" href="#build-overviews" title="Permalink to this headline">¶</a></h4>
<p>Adding overviews (also called ‘’pyramids’’ or ‘’rsets’’) can sometimes increase the performance of a large data source in osgEarth. You can use the <a class="reference external" href="http://gdal.org/gdaladdo.html">gdaladdo</a> utility to add overviews to a dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdaladdo</span> <span class="o">-</span><span class="n">r</span> <span class="n">average</span> <span class="n">myimage</span><span class="o">.</span><span class="n">tif</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">8</span> <span class="mi">16</span>
</pre></div>
</div>
</div>
<div class="section" id="spatial-indexing-for-feature-data">
<h4>Spatial indexing for feature data<a class="headerlink" href="#spatial-indexing-for-feature-data" title="Permalink to this headline">¶</a></h4>
<p>Large vector feature datasets (e.g., shapefiles) will benefit greatly from a spatial index. Using the <code class="docutils literal notranslate"><span class="pre">ogrinfo</span></code> tool (included with GDAL/OGR binary distributions) you can create a spatial index for your vector data like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="o">-</span><span class="n">sql</span> <span class="s2">&quot;CREATE SPATIAL INDEX ON myfile&quot;</span> <span class="n">myfile</span><span class="o">.</span><span class="n">shp</span>
</pre></div>
</div>
<p>For shapefiles, this will generate a “.qix” file that contains the spatial index information.</p>
</div>
</div>
<div class="section" id="building-tilesets">
<h3>Building Tilesets<a class="headerlink" href="#building-tilesets" title="Permalink to this headline">¶</a></h3>
<p>Pre-tiling your imagery can speed up load time dramatically, especially over the network. In fact, if you want to serve your data over the network, this is the only way!</p>
<p><code class="docutils literal notranslate"><span class="pre">osgearth_conv</span></code> is a low-level conversion tool that comes with osgEarth. One useful application of the tool is tile up a large GeoTIFF (or other input) in a tiled format. Note: this approach only works with drivers that support writing (MBTiles, TMS).</p>
<p>To make a portable MBTiles file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">osgearth_conv</span> <span class="o">--</span><span class="ow">in</span> <span class="n">driver</span> <span class="n">GDALImage</span> <span class="o">--</span><span class="ow">in</span> <span class="n">url</span> <span class="n">myLargeFile</span><span class="o">.</span><span class="n">tif</span>
              <span class="o">--</span><span class="n">out</span> <span class="n">driver</span> <span class="n">MBTilesImage</span> <span class="o">--</span><span class="n">out</span> <span class="n">filename</span> <span class="n">myData</span><span class="o">.</span><span class="n">mbtiles</span>
              <span class="o">--</span><span class="n">out</span> <span class="nb">format</span> <span class="n">jpg</span>
</pre></div>
</div>
<p>If you want to serve tiles from a web server, use TMS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">osgearth_conv</span> <span class="o">--</span><span class="ow">in</span> <span class="n">driver</span> <span class="n">GDALImage</span> <span class="o">--</span><span class="ow">in</span> <span class="n">url</span> <span class="n">myLargeData</span><span class="o">.</span><span class="n">tif</span>
              <span class="o">--</span><span class="n">out</span> <span class="n">driver</span> <span class="n">TMSImage</span> <span class="o">--</span><span class="n">out</span> <span class="n">url</span> <span class="n">myLargeData</span><span class="o">/</span><span class="n">tms</span><span class="o">.</span><span class="n">xml</span>
              <span class="o">--</span><span class="n">out</span> <span class="nb">format</span> <span class="n">jpg</span>
</pre></div>
</div>
<p>That will yield a folder (called “myLargeData” in this case) that you can deploy on the web behind any standard web server like Apache.</p>
<p><strong>Tip:</strong> The <code class="docutils literal notranslate"><span class="pre">jpg</span></code> format does NOT support transparency. If your data was an alpha channel, use <code class="docutils literal notranslate"><span class="pre">png</span></code> instead.</p>
<p>Just type <code class="docutils literal notranslate"><span class="pre">osgearth_conv</span></code> for a full list of options. The <code class="docutils literal notranslate"><span class="pre">--in</span></code> and <code class="docutils literal notranslate"><span class="pre">--out</span></code> options correspond directly to properties you would normally include in an Earth file.</p>
</div>
<div class="section" id="loading-a-directory-of-files">
<h3>Loading a Directory of Files<a class="headerlink" href="#loading-a-directory-of-files" title="Permalink to this headline">¶</a></h3>
<p>Sometimes the data you have will consist of lots of individual files that make up a single dataset. DTED elevation data is a common example of this. Instead of loading each individual file into osgEarth as a separate layer, it is best to combine them into one “virtual” dataset.</p>
<p>Use the GDAL <a class="reference external" href="https://gdal.org/programs/gdalbuildvrt.html"><code class="docutils literal notranslate"><span class="pre">gdalbuildvrt</span></code></a> utility to create a VRT. A VRT is a “virtual format” that combines multiple files into a single data source.</p>
<p>Say you have a folder full of “.dt1” files. You can create a single layer like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdalbuildvrt</span> <span class="n">output</span><span class="o">.</span><span class="n">vrt</span> <span class="o">*.</span><span class="n">dt1</span>
</pre></div>
</div>
<p>Now you can just load <code class="docutils literal notranslate"><span class="pre">output.vrt</span></code> directly in osgEarth, like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">GDALElevation</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;My DTED data&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">url</span><span class="o">&gt;</span><span class="n">output</span><span class="o">.</span><span class="n">vrt</span><span class="o">&lt;/</span><span class="n">url</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">vdatum</span><span class="o">&gt;</span><span class="n">egm96</span><span class="o">&lt;/</span><span class="n">vdatum</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">GDALElevation</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="where-to-find-data">
<h2>Where to Find Data<a class="headerlink" href="#where-to-find-data" title="Permalink to this headline">¶</a></h2>
<p>Help us add useful sources of freely available data to this list. Always check on attribution and distribution requirements from the provider when using 3rd party data!</p>
<p><strong>Raster data</strong></p>
<ul class="simple">
<li><a class="reference external" href="http://readymap.org/">ReadyMap.org</a> - 15m imagery, 90m elevation, and street tiles for osgEarth developers. Free for development and demo purposes only.</li>
<li><a class="reference external" href="http://nationalmap.gov/viewer.html">USGS National Map</a> - Elevation, orthoimagery, hydrography, geographic names, boundaries, transportation, structures, and land cover products for the US.</li>
<li><a class="reference external" href="http://visibleearth.nasa.gov/view_cat.php?categoryID=1484">NASA BlueMarble</a> - NASA’s whole-earth imagery (including topography and bathymetry maps)</li>
<li><a class="reference external" href="http://www.naturalearthdata.com/">Natural Earth</a> - Free vector and raster map data at various scales</li>
<li><a class="reference external" href="http://www.microsoft.com/maps/choose-your-bing-maps-API.aspx">Bing Maps</a> - Microsoft’s worldwide imagery and map data ($)</li>
</ul>
<p><strong>Elevation data</strong></p>
<ul class="simple">
<li><a class="reference external" href="http://srtm.csi.cgiar.org/">CGIAR</a> - World 90m elevation data derived from SRTM and ETOPO (CGIAR European mirror)</li>
<li><a class="reference external" href="http://www.gebco.net/">GEBCO</a> - General Bathymetry Chart of the Oceans</li>
</ul>
<p><strong>Feature data</strong></p>
<ul class="simple">
<li><a class="reference external" href="http://openstreetmap.org/">OpenStreetMap</a> - Worldwide, community-sources street and land use data (vectors and rasterized tiles)</li>
<li><a class="reference external" href="http://www.naturalearthdata.com/">Natural Earth</a> - Free vector and raster map data at various scales</li>
<li><a class="reference external" href="http://www.diva-gis.org/gData">DIVA-GIS</a> - Free low-resolution vector data for any country</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="layers.html" class="btn btn-neutral float-right" title="osgEarth Layers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="earthfile.html" class="btn btn-neutral float-left" title="The Earth File" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Pelican Mapping
      
        <span class="commit">
          Revision <code>2b0ab5ae</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: 3.1
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="../latest/index.html">latest</a></dd>
        
          <dd><a href="index.html">3.1</a></dd>
        
          <dd><a href="../2.10/index.html">2.10</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="../../_/downloads/en/3.1/htmlzip/index.html">html</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="http://readthedocs.org/projects/osgearth/?fromdocs=osgearth">Project Home</a>
          </dd>
          <dd>
            <a href="http://readthedocs.org/builds/osgearth/?fromdocs=osgearth">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org/">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>